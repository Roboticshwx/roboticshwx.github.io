<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Approaches in Studying Effectively</title>
    <url>/2023/10/18/Approaches-in-Studying-Effectively/</url>
    <content><![CDATA[<h1 id="3-Tips-on-How-to-Study-Effectively"><a href="#3-Tips-on-How-to-Study-Effectively" class="headerlink" title="3 Tips on How to Study Effectively"></a>3 Tips on How to Study Effectively</h1><blockquote>
<p>Forgetting is the friend of learning. -Robert Bjork</p>
</blockquote>
<p>This approaches have great impacts on <strong>exam-oriented education</strong>, mostly have great impacts on <strong>memorizing knowledge</strong>.</p>
<p>The Theory of the way to transfer knowledge from short-term memory to long-term memory.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/18/Approaches-in-Studying-Effectively/fig_1.png"
                      class="" width="600"
                >

<ul>
<li>The repeated firing strengthens the connection between the neurous.</li>
<li>This transfers is crucial during sleep.</li>
<li>New knowledge is integrated with other related concepts you already know.</li>
</ul>
<h2 id="How"><a href="#How" class="headerlink" title="How"></a>How</h2><ul>
<li>Testing yourself with flashcards and quizzes, forces you to actively retrieve knowledge, which updates and strengthens the memory.<ul>
<li>Rereading textbooks and highlighting notes can generate a false sense of competence, since the information is right in front of you.</li>
<li>Testing yourself allows you to more accurately gauge what you actually know.</li>
<li>Making mistakes can actually improve learning in the long term.</li>
<li>It’s theorized that as you rack your brain for the answer, you activate relevant pieces of knowledge. The brain can better integrate this new information with what you already know after the correct answer is later revealed.</li>
</ul>
</li>
</ul>
<h2 id="What"><a href="#What" class="headerlink" title="What"></a>What</h2><ul>
<li>Mixing multiple topics and subjects, interleaving, or mixing the concepts you focus on in a single session, can lead to better retention than practicing a single skill.<ul>
<li>Cycling through different subjects forces you brain to temporarily forget, then retrieve information, futher strengthen the memory.</li>
</ul>
</li>
</ul>
<h2 id="When"><a href="#When" class="headerlink" title="When"></a>When</h2><ul>
<li>Spacing your review across multiple days allows for rest and sleep between sessions.<ul>
<li>While sleep, the brain is actively at work, storing and integrating knowledge in the neocortex.</li>
<li>Cramming the night before the exam may seem logical, the information won’t stick around for the long term.</li>
</ul>
</li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/18/Approaches-in-Studying-Effectively/fig_2.png"
                      class="" width="400"
                >


<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a class="link"   href="https://www.youtube.com/watch?v=TjPFZaMe2yw" >3 tips on how to study effectively<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>Article Extract</title>
    <url>/2023/10/05/Article-Extract/</url>
    <content><![CDATA[<h1 id="Science-amp-Technology"><a href="#Science-amp-Technology" class="headerlink" title="Science&amp;Technology"></a>Science&amp;Technology</h1><h1 id="Economics"><a href="#Economics" class="headerlink" title="Economics"></a>Economics</h1><h1 id="Psychology"><a href="#Psychology" class="headerlink" title="Psychology"></a>Psychology</h1><h2 id="How-to-get-motivated-even-when-you-don’t-feel-like-it"><a href="#How-to-get-motivated-even-when-you-don’t-feel-like-it" class="headerlink" title="How to get motivated even when you don’t feel like it"></a>How to get motivated even when you don’t feel like it</h2><p>You’ve always aspired to be a professional artist. At last, this dream may become a reality, and you’re creating a portfolio to submit to art programs. But as the application deadline looms, you suddenly find yourself unmotivated, and avoiding the canvas altogether.</p>
<p>Why does motivation seem so fickle? And what even is it in the first place? </p>
<p>Psychologists define motivation as the desire or impetus to initiate and maintain a particular behavior. In other words, it’s the energy that drives you to do something. And knowing the source of that drive is particularly important when it comes to understanding how to maintain it.</p>
<p>These motivational forces generally fall into two broad categories: intrinsic and extrinsic. Intrinsic motivation is involved when you experience an activity as an end in itself. Take a hobby, like playing video games. The experience largely explains the desire to do it. Performing tasks that feel right in the moment or that you find a meaningful, interesting, or satisfying are driven by intrinsic motivation. </p>
<p>Extrinsic motivation, on the other hand, refers to pursuing a task as a means to an end. While few would consider going to the dentist as an enjoyable activity, you’re often motivated by the outcome of having clean, healthy teeth. Other examples of extrinsic motivation include completing a task to receive some sort of reward, whether it’s praise, power, or money. Notably, these rewards tend to come later, like receiving a bonus at the end of a quarter, or winning a competition after months of training. While extrinsic rewards, like getting paid, may seem appealing, their effectiveness can be surprisingly short-lived. </p>
<p>For example, a 2017 study found that those who were highly focused on the outcomes of their New Year’s resolutions or driven by extrinsic motivation weren’t the most likely to stick to them. What did predict persistence, however, was how much a person enjoyed pursuing their goals. In other words, you’re more likely to maintain an exercise routine if you take classes you enjoy, rather than just those that build your biceps. </p>
<p>Years of psychology research have shown that high levels of intrinsic motivation for school, a job, or an exercise class are more likely to keep you engaged in the long run. Day-to-day actions, though, are rarely either exclusively intrinsically motivated. Study for histroy exam, for example, can be intrinsically motivated if you’re curious about the culture of ancient Egypt. But extrinsic motivators may also be at play, as you aim to get good grade or feel pressure from family members to do well in school. But having multiple motivators isn’t always better. </p>
<p>One study of military cadets found that those who were driven both by intrinsic motivators, like self-improvement, and extrinsic motivators, like the outcome of getting a good job, were overall less motivated than cadets driven by just one of these factors. As a result, these cadets performed worse and were less likely to graduate. Psychologists call this phenomenon the overjustification effect, the idea that additional extrinsic motivators can actually muddy the waters when you already have the intrinsic drive to do something. </p>
<p>But this is only a problem if you already find a task motivating. When you’re faced with an activity you find tedious or uninteresing, adding extrinsic rewards can be beneficial. In this way, extrincis motivators can provide sufficient justification. While you may never enjoy doing the laundry, it may feel less daunting if you get praise from a loved one, or even promise yourself that you’ll watch your favorite TV show when you’re done folding. </p>
<p>Motication is complicated. And sometimes, no matter how passionate you are about a goal or hobby, finding the motivation to actually do it can be difficult. But there are things you can do to increase your drive, even when it feels impossible. Focus on building intrinsic motivation by making the task more fun in the moment. Asking a friend to join you or simply putting on your favorite playlist can give you the boost to get started and stick with your goals for the long haul. </p>
]]></content>
  </entry>
  <entry>
    <title>C++语法查漏补缺</title>
    <url>/2025/02/10/C-%E8%AF%AD%E6%B3%95%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/</url>
    <content><![CDATA[<h2 id="代码中的基础概念"><a href="#代码中的基础概念" class="headerlink" title="代码中的基础概念"></a>代码中的基础概念</h2><h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>相当于给代码加一个”姓氏”, 避免不同库的同名函数冲突.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> A {</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">()</span> </span>{ <span class="comment">/* 机器人移动 */</span> }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">namespace</span> B {</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">()</span> </span>{ <span class="comment">/* 物体移动 */</span> }</span><br><span class="line">}</span><br><span class="line">A::<span class="built_in">move</span>(); <span class="comment">// 明确调用哪个move</span></span><br></pre></td></tr></table></figure></div>


<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>除了C中的<code>int</code>, <code>float</code>, <code>double</code>, <code>char</code>以外, C++还可以通过<code>auto</code>自动识别变量类型.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> age = <span class="number">25</span>;          <span class="comment">// 自动识别为 int</span></span><br><span class="line"><span class="keyword">auto</span> price = <span class="number">9.99</span>;      <span class="comment">// 自动识别为 double</span></span><br><span class="line"><span class="keyword">auto</span> name = <span class="string">"Alice"</span>;    <span class="comment">// 自动识别为 const char*</span></span><br><span class="line"></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>};</span><br><span class="line"><span class="keyword">auto</span> first_num = numbers[<span class="number">0</span>];  <span class="comment">// 自动识别为 int</span></span><br></pre></td></tr></table></figure></div>


<h3 id="类-x2F-结构体"><a href="#类-x2F-结构体" class="headerlink" title="类/结构体"></a>类/结构体</h3><p>类是一个自己定制的”数据类型说明书”, 有很多不同的属性和功能, 通过类来构建对象;</p>
<p>以手机为例</p>
<ul>
<li>每部手机具有颜色, 型号, 电量这些属性;</li>
<li>手机都有充电, 打电话, 拍照这些功能;</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> {  <span class="comment">// 类名首字母建议大写</span></span><br><span class="line"><span class="keyword">public</span>:        <span class="comment">// 公开的接口（就像手机的开机键、充电口这些你能接触的部分）</span></span><br><span class="line">  <span class="comment">// 属性（成员变量）</span></span><br><span class="line">  string color;</span><br><span class="line">  string model;</span><br><span class="line">  <span class="type">int</span> battery;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 功能（成员函数）</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">charge</span><span class="params">(<span class="type">int</span> minutes)</span> </span>{</span><br><span class="line">    battery += minutes * <span class="number">2</span>; <span class="comment">// 每分钟充2%电</span></span><br><span class="line">    <span class="keyword">if</span>(battery &gt; <span class="number">100</span>) battery = <span class="number">100</span>;</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">call</span><span class="params">(string number)</span> </span>{</span><br><span class="line">    cout &lt;&lt; <span class="string">"正在拨打："</span> &lt;&lt; number &lt;&lt; endl;</span><br><span class="line">    battery -= <span class="number">5</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="comment">// 创建对象（根据设计图生产具体手机）</span></span><br><span class="line">  Phone myPhone;  <span class="comment">// 我的手机</span></span><br><span class="line">  Phone momPhone; <span class="comment">// 妈妈的手机</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置属性</span></span><br><span class="line">  myPhone.color = <span class="string">"黑色"</span>;</span><br><span class="line">  myPhone.model = <span class="string">"Mate60"</span>;</span><br><span class="line">  myPhone.battery = <span class="number">20</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 使用功能</span></span><br><span class="line">  myPhone.<span class="built_in">charge</span>(<span class="number">30</span>); <span class="comment">// 充电30分钟</span></span><br><span class="line">  myPhone.<span class="built_in">call</span>(<span class="string">"13800138000"</span>); </span><br><span class="line">  </span><br><span class="line">  cout &lt;&lt; <span class="string">"剩余电量："</span> &lt;&lt; myPhone.battery &lt;&lt; <span class="string">"%"</span>; <span class="comment">// 输出：剩余电量：75%</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>当需要在类外部定义函数的时候, 用<code>::</code></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类外定义</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Phone::charge</span><span class="params">(<span class="type">int</span> minutes)</span> </span>{ <span class="comment">// 类名::成员函数</span></span><br><span class="line">  battery += minutes * <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>当这个类只需要提供一些数据, 并且默认可以访问的时候, 这个就是<strong>结构体</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">BookShelf</span> {</span><br><span class="line">    std::string shelf_name;     <span class="comment">// 书架名称</span></span><br><span class="line">    <span class="type">int</span> total_books;            <span class="comment">// 书籍总数</span></span><br><span class="line">    std::vector&lt;std::string&gt; book_titles; <span class="comment">// 书名列表</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">BookShelf my_shelf;</span><br><span class="line">my_shelf.shelf_name = <span class="string">"科幻小说"</span>;</span><br><span class="line"></span><br><span class="line">my_shelf.book_titles.<span class="built_in">push_back</span>(<span class="string">"三体"</span>);</span><br><span class="line">my_shelf.book_titles.<span class="built_in">push_back</span>(<span class="string">"银河帝国"</span>);</span><br></pre></td></tr></table></figure></div>

<p>当需要表达一些状态或者模式选择的时候, 通常会用到枚举类<code>enum class</code></p>
<p>在机器人中通常用于机器人控制状态管理</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum class</span> <span class="title class_">ControllerState</span> : std::<span class="type">uint8_t</span> <span class="comment">// 该枚举类为1byte, 节省内存</span></span><br><span class="line">{</span><br><span class="line">  INITIALIZING = <span class="number">0</span>,  <span class="comment">// 初始化中</span></span><br><span class="line">  RUNNING = <span class="number">1</span>,       <span class="comment">// 运行中</span></span><br><span class="line">  ERROR = <span class="number">2</span>          <span class="comment">// 错误状态</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RobotController</span> {</span><br><span class="line">    ControllerState state_ = ControllerState::INITIALIZING;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ControllerState <span class="title">getState</span><span class="params">()</span> <span class="type">const</span> </span>{ <span class="keyword">return</span> state_; } <span class="comment">// 定义函数, 必须返回ControllerState类型的值, 并交给state_变量</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	RobotController controller;</span><br><span class="line">	ControllerState currentState = controller.<span class="built_in">getState</span>(); <span class="comment">// 定义currentState变量的类型是ControllerState类型</span></span><br><span class="line"></span><br><span class="line">	currentState = ControllerState::RUNNING <span class="comment">// 直接操作枚举值</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<h3 id="智能指针"><a href="#智能指针" class="headerlink" title="智能指针"></a>智能指针</h3><p>传统的指针容易导致内存泄漏, C++中有三种智能指针, 可以实现内存自动释放;</p>
<ul>
<li><code>unique_ptr</code><ul>
<li>唯一性</li>
</ul>
</li>
<li><code>shared_ptr</code><ul>
<li>不同的指针共享同一数据</li>
</ul>
</li>
<li><code>weak_ptr</code><ul>
<li>不能访问, 只能观察</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// unique_ptr</span></span><br><span class="line"><span class="keyword">auto</span> smartPtr = std::<span class="built_in">make_unique</span>&lt;<span class="type">int</span>&gt;(<span class="number">10</span>); <span class="comment">// 自动管理内存</span></span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; *smartPtr; <span class="comment">// 输出10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//shared_ptr</span></span><br><span class="line"><span class="keyword">auto</span> ptr1 = std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">auto</span> ptr2 = ptr1; <span class="comment">// 两个指针可以共享数据</span></span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; *ptr1 &lt;&lt; <span class="string">" "</span> &lt;&lt; *ptr2; <span class="comment">// 输出20 20</span></span><br></pre></td></tr></table></figure></div>


<h3 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h3><ul>
<li><code>std:fmod(a, b)</code>计算 a 除以 b 的余数</li>
<li><code>std::pow(-1.0, n)</code>生成 -1 的 n 次方.</li>
<li><code>std::floor()</code>确保结果是整数</li>
<li><code>std::cos()</code>将弧度值转化为余弦波形;</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">std::<span class="built_in">fmod</span>(<span class="number">10</span>, <span class="number">8</span>) = <span class="number">2</span></span><br></pre></td></tr></table></figure></div>

<h4 id="Eigen库"><a href="#Eigen库" class="headerlink" title="Eigen库"></a>Eigen库</h4><ul>
<li><strong>矩阵定义</strong></li>
</ul>
<p>矩阵主要分为两种</p>
<ul>
<li>固定矩阵: 编译时就会确定大小, 不发生改变</li>
<li>动态矩阵: 运行时确定大小, 可以改变</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">Matrix3d mat;					<span class="comment">// 3x3的double矩阵 (固定矩阵)</span></span><br><span class="line">Vetor3d vec;					<span class="comment">// 3x1的double列向量 (固定矩阵)</span></span><br><span class="line"></span><br><span class="line"><span class="function">MatrixXd <span class="title">mat</span><span class="params">(<span class="number">2</span>, <span class="number">2</span>)</span></span>;			<span class="comment">// 2x2的double动态矩阵</span></span><br><span class="line"><span class="function">VectorXd <span class="title">vec</span><span class="params">(<span class="number">4</span>)</span></span>;				<span class="comment">// 4x1的动态向量</span></span><br></pre></td></tr></table></figure></div>

<p>矩阵赋值的时候会按行填充;</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">mat &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">       <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>,</span><br><span class="line">       <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>;     <span class="comment">// 按行填充</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>特殊矩阵</strong></li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">mat = Matrix3d::<span class="built_in">Zero</span>();      <span class="comment">// 3x3 零矩阵</span></span><br><span class="line">mat = Matrix3d::<span class="built_in">Identity</span>();  <span class="comment">// 3x3 单位矩阵</span></span><br><span class="line">mat = Matrix3d::<span class="built_in">Random</span>();    <span class="comment">// 3x3 随机矩阵（元素范围 [-1,1]）</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>基本运算</strong></li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">c = a + b;   <span class="comment">// 矩阵加法（维度必须相同）</span></span><br><span class="line">c = a - b;   <span class="comment">// 矩阵减法</span></span><br><span class="line">c = <span class="number">2.5</span> * a;     <span class="comment">// 标量乘法</span></span><br><span class="line">c = a / <span class="number">3.0</span>;     <span class="comment">// 标量除法</span></span><br><span class="line"></span><br><span class="line">c = a * b;       <span class="comment">// 矩阵乘法（注意维度匹配：a的列数 = b的行数）</span></span><br><span class="line"></span><br><span class="line">c = a.<span class="built_in">array</span>() * b.<span class="built_in">array</span>();  <span class="comment">// 逐元素相乘（对应位置相乘）</span></span><br><span class="line">c = a.<span class="built_in">array</span>() / b.<span class="built_in">array</span>();  <span class="comment">// 逐元素相除</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>向量操作</strong></li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">Vector3d v1, v2;</span><br><span class="line"><span class="type">double</span> dot = v1.<span class="built_in">dot</span>(v2);    <span class="comment">// 点积</span></span><br><span class="line">Vector3d cross = v1.<span class="built_in">cross</span>(v2); <span class="comment">// 叉积（仅限3D向量）</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> norm = v1.<span class="built_in">norm</span>();    <span class="comment">// L2 范数（向量长度）</span></span><br><span class="line">v1.<span class="built_in">normalize</span>();             <span class="comment">// 单位化向量 (归一化)</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><p><strong>转置与逆</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">b = a.<span class="built_in">transpose</span>();          <span class="comment">// 转置（不修改原矩阵）</span></span><br><span class="line">Matrix3d a_inv = a.<span class="built_in">inverse</span>();  <span class="comment">// 逆矩阵（要求矩阵可逆）</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>访问与修改</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mat</span>(<span class="number">0</span>, <span class="number">1</span>) = <span class="number">2.5</span>;       <span class="comment">// 修改第1行第2列的元素（索引从0开始）</span></span><br><span class="line"><span class="type">double</span> val = <span class="built_in">mat</span>(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// 读取第3行第3列的元素</span></span><br><span class="line">Vector3d row = mat.<span class="built_in">row</span>(<span class="number">0</span>);   <span class="comment">// 获取第1行</span></span><br><span class="line">Vector3d col = mat.<span class="built_in">col</span>(<span class="number">1</span>);   <span class="comment">// 获取第2列</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>C++中常用<code>try...catch</code>作为异常处理机制, 用于捕获和处理程序运行中可能出现的错误, 例如网络中断, 文件不存在.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> {</span><br><span class="line">	<span class="comment">// 可能出错的代码, 如打开文件, 进行数学计算</span></span><br><span class="line">} <span class="built_in">catch</span> (异常类型<span class="number">1</span> 变量名) {</span><br><span class="line">	<span class="comment">// 处理异常类型1</span></span><br><span class="line">} <span class="built_in">catch</span> (异常类型<span class="number">2</span> 变量名) {</span><br><span class="line">	<span class="comment">// 处理异常类型2</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">// ...可以有多个 catch</span></span><br></pre></td></tr></table></figure></div>

<p>c++提供了标准异常(如 <code>std::runtimeerror</code> ), 推荐使用</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;exception&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">	<span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">"文件打开失败!"</span>);</span><br><span class="line">} <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) {</span><br><span class="line">	cout &lt;&lt; e.<span class="built_in">what</span>();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<h3 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h3><p><code>future</code>机制是C++11引入的异步编程工具</p>
<p>核心组件:</p>
<ul>
<li><code>std::future</code><ul>
<li>表示一个异步操作的未来结果, 通过<code>get()</code>方法获取结果, 若结果未就绪, 会阻塞当前线程, 可以通过<code>.wait_for()</code>来支持超时等待;</li>
</ul>
</li>
<li><code>std::promise</code><ul>
<li>用于在异步任务中设置结果或异常;</li>
</ul>
</li>
<li><code>std::async</code><ul>
<li>启动异步任务, 返回一个future对象, 常用<code>std::launch::async</code>来强制新线程执行;</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟耗时2秒的计算任务</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">compute</span><span class="params">()</span> </span>{</span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">sconds</span>(<span class="number">2</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">	std::future&lt;<span class="type">int</span>&gt; fut = std::<span class="built_in">async</span>(std::launch::async, compute);</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; <span class="string">"Doing other work..."</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> result = fut.<span class="built_in">get</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">"Result: "</span> &lt;&lt; result &lt;&lt; std::endl; <span class="comment">// 输出42</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>


<h2 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h2><h3 id="Joint-Velocity-Example"><a href="#Joint-Velocity-Example" class="headerlink" title="Joint Velocity Example"></a>Joint Velocity Example</h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::InterfaceConfiguration</span></span><br><span class="line"><span class="function"><span class="title">JointVelocityExampleController::command_interface_configuration</span><span class="params">()</span> <span class="type">const</span> </span>{</span><br><span class="line">  controller_interface::InterfaceConfiguration config;</span><br><span class="line">  config.type = controller_interface::interface_configuration_type::INDIVIDUAL;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num_joints; ++i) {</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/velocity"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>在franka的库中, 即<code>joint_velocity_example_controller.hpp</code>中, <code>JointVelocityExampleController</code>这个类定义了三个函数;</p>
<ul>
<li><code>command_interface_configuration()</code><ul>
<li>用于控制器向机器人输出控制信号, 只包含速度信息;</li>
</ul>
</li>
<li><code>state_interface_configuration()</code><ul>
<li>用于从机器人中读取状态信号, 包含位置和速度信息;</li>
</ul>
</li>
<li><code>update()</code><ul>
<li>控制机器人的运行频率, 可以理解为机器人的”心脏跳动”</li>
</ul>
</li>
</ul>
<p>代码中<code>JointVelocityExampleController::command_interface_configuration() const {}</code>重写了, 即重新定义了新的函数.</p>
<p>并且调用了<code>ros2_control</code>库中的工具</p>
<p>在<code>controller_interface_base.hpp</code>中的定义如下:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> controller_interface</span><br><span class="line">{</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">InterfaceConfiguration</span></span><br><span class="line">{</span><br><span class="line">  interface_configuration_type type;</span><br><span class="line">  std::vector&lt;std::string&gt; names = {};</span><br><span class="line">};}</span><br></pre></td></tr></table></figure></div>
<p>在这个<code>InterfaceConfiguration</code>的结构体中, 构建了一个<code>config</code>对象, 并且贴上了<code>INDIVIDUAL</code>这个标签<code>type</code>, 通过for函数添加名称<code>name</code>;</p>
<p>总而言之, 这里定义了函数<code>command_interface_configuration</code>, 创建了控制接口<code>config</code>对象, 通过<code>config</code>来存储接口的<code>type</code>和<code>name</code>的信息, 将这个<code>config</code>返回控制器, 让控制器知道需要控制哪些接口并且发布速度指令.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::InterfaceConfiguration</span></span><br><span class="line"><span class="function"><span class="title">JointVelocityExampleController::state_interface_configuration</span><span class="params">()</span> <span class="type">const</span> </span>{</span><br><span class="line">  controller_interface::InterfaceConfiguration config;</span><br><span class="line">  config.type = controller_interface::interface_configuration_type::INDIVIDUAL;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num_joints; ++i) {</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/position"</span>);</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/velocity"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>同理, 这里也定义了函数<code>state_interface_configuration</code>, 使得控制接口<code>config</code>的状态<code>position</code>和<code>velocity</code>能够从机器人中读取出来.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::return_type</span></span><br><span class="line"><span class="function"><span class="title">JointVelocityExampleController::update</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Time&amp; <span class="comment">/*time*/</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Duration&amp; period)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  elapsed_time_ = elapsed_time_ + period;			<span class="comment">// 累计运行总时间</span></span><br><span class="line">  <span class="function">rclcpp::Duration <span class="title">time_max</span><span class="params">(<span class="number">8.0</span>, <span class="number">0.0</span>)</span></span>;				<span class="comment">// 定义周期</span></span><br><span class="line">  <span class="type">double</span> omega_max = <span class="number">0.1</span>;											<span class="comment">// 定义最大角速度</span></span><br><span class="line">	</span><br><span class="line">  <span class="type">double</span> cycle = std::<span class="built_in">floor</span>(std::<span class="built_in">pow</span>(</span><br><span class="line">      <span class="number">-1.0</span>, (elapsed_time_.<span class="built_in">seconds</span>() - std::<span class="built_in">fmod</span>(elapsed_time_.<span class="built_in">seconds</span>(), time_max.<span class="built_in">seconds</span>())) /</span><br><span class="line">                time_max.<span class="built_in">seconds</span>()));</span><br><span class="line">  <span class="type">double</span> omega = cycle * omega_max / <span class="number">2.0</span> *</span><br><span class="line">                 (<span class="number">1.0</span> - std::<span class="built_in">cos</span>(<span class="number">2.0</span> * M_PI / time_max.<span class="built_in">seconds</span>() * elapsed_time_.<span class="built_in">seconds</span>()));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num_joints; i++) {</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">3</span> || i == <span class="number">4</span>) {</span><br><span class="line">      command_interfaces_[i].<span class="built_in">set_value</span>(omega);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      command_interfaces_[i].<span class="built_in">set_value</span>(<span class="number">0.0</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> controller_interface::return_type::OK;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>显然从虚定义中<code>update()</code>需要<code>time</code>和<code>period</code>这两个参数的输入;</p>
<ul>
<li><code>time</code>表示当前时间, 不需要所以注释</li>
<li><code>period</code>表示距离上一次update的时间间隔</li>
</ul>
<p>在ros2的<code>controller_interfac_base.hpp</code>中同样有一个枚举类来表示机器人状态, 其命名空间与<code>InterfaceConfiguration</code>相同, 都是<code>controller_interface</code></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum class</span> <span class="title class_">return_type</span> : std::<span class="type">uint8_t</span></span><br><span class="line">{</span><br><span class="line">  OK = <span class="number">0</span>,</span><br><span class="line">  ERROR = <span class="number">1</span>,</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<p>因此<code>update()</code>的函数需要返回<code>return_type</code>这种类型来显示结果.</p>
<p><code>elapsed_time_ = elapsed_time_ + period;</code>用于记录控制器运行的总时间</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> cycle = std::<span class="built_in">floor</span>(std::<span class="built_in">pow</span>(</span><br><span class="line">    <span class="number">-1.0</span>, (elapsed_time_.<span class="built_in">seconds</span>() - std::<span class="built_in">fmod</span>(elapsed_time_.<span class="built_in">seconds</span>(), time_max.<span class="built_in">seconds</span>())) /</span><br><span class="line">              time_max.<span class="built_in">seconds</span>()));</span><br></pre></td></tr></table></figure></div>

<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.577ex;" xmlns="http://www.w3.org/2000/svg" width="15.444ex" height="4.701ex" role="img" focusable="false" viewBox="0 -1381 6826.4 2078"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(466,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(764,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(1293,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(1796,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(2265,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(2953.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(3953.4,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(4503.4,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(5381.4,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(5866.4,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g><g data-mml-node="mrow" transform="translate(2388.2,-686)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(361,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(706,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1584,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g></g><rect width="6586.4" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p>
<ul>
<li><code>elapse</code>为当前运行时间;</li>
<li>分母<code>time</code>为周期, 代码中定义为8秒;</li>
<li><code>fmod</code>为余数, 分子为当前时间所属周期的起点</li>
</ul>
<p>上述计算得到了当前是第几个周期, 通过 -1 的 n 次方使得<code>cycle</code>每8秒在 1 和 -1 之间切换, 用来控制方向.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> omega = cycle * omega_max / <span class="number">2.0</span> *</span><br><span class="line">               (<span class="number">1.0</span> - std::<span class="built_in">cos</span>(<span class="number">2.0</span> * M_PI / time_max.<span class="built_in">seconds</span>() * elapsed_time_.<span class="built_in">seconds</span>()));</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>2.0 * M_PI / time_max.seconds()</code>将8秒周期转换为角频率, 即每秒转动多少弧度;</li>
</ul>
<p>这里通过将余弦波形压缩并向上平移,使其在 0 ~ 1 之间波动, 再通过<code>omega_max</code>限幅.</p>
<p>最终得到的计算结果使得角速度<code>omega</code>会以正弦波的形式加速和减速, 每 8 秒反向一次.</p>
<p>通过<code>command_interfaces_[i].set_value(omega)</code>来控制三四关节的角速度, <code>return controller_interface::return_type::OK;</code>最终返回任务结果, 执行成功.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">CallbackReturn <span class="title">JointVelocityExampleController::on_init</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="built_in">auto_declare</span>&lt;<span class="type">bool</span>&gt;(<span class="string">"gazebo"</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">auto_declare</span>&lt;std::string&gt;(<span class="string">"robot_description"</span>, <span class="string">""</span>);</span><br><span class="line">  } <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) {</span><br><span class="line">		<span class="comment">// 如果出错, 打印错误信息并返回错误状态</span></span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">"Exception thrown during init stage with message: %s \n"</span>, e.<span class="built_in">what</span>());</span><br><span class="line">    <span class="keyword">return</span> CallbackReturn::ERROR;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> CallbackReturn::SUCCESS;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>这里调用了头文件<code>joint_velocity_example_controller.hpp</code>的生命周期回调函数.</p>
<p>ROS2生命周期有几个关键阶段:</p>
<ul>
<li><code>on_init():</code> 初始化参数</li>
<li><code>on_configure:</code> 加载配置</li>
<li><code>on_activate():</code> 启动控制器</li>
</ul>
<p>控制器启动之后, <code>update()</code>会被周期性的调用.</p>
<p><code>CallbackReturn</code>是<code>lifecycle_node_interface.hpp</code>, 即ROS2中定义的一个枚举类(<code>enum class</code>), 通常在<code>on_init()</code>, <code>on_configure()</code>, <code>on_activate()</code>等函数需要返回<code>CallbackReturn</code>, 返回类型有两种, <code>SUCCESS</code>和<code>ERROR</code>.</p>
<p>这里通过<code>auto_declare</code>定义一个<code>gazebo</code>的bool参数, 默认值为<code>false</code>, 然后定义一个字符串<code>robot_description</code>, 默认为空字符串, 后续通过python启动的时候, 再传入<code>URDF</code>参数.</p>
<p><code>auto_declare</code>来源于ROS2中的工具函数, 用于告诉节点需要哪些参数;</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">CallbackReturn <span class="title">JointVelocityExampleController::on_configure</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp_lifecycle::State&amp; <span class="comment">/*previous_state*/</span>)</span> </span>{</span><br><span class="line">  is_gazebo = <span class="built_in">get_node</span>()-&gt;<span class="built_in">get_parameter</span>(<span class="string">"gazebo"</span>).<span class="built_in">as_bool</span>(); <span class="comment">// 获取gazebo参数</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> parameters_client =</span><br><span class="line">      std::<span class="built_in">make_shared</span>&lt;rclcpp::AsyncParametersClient&gt;(<span class="built_in">get_node</span>(), <span class="string">"/robot_state_publisher"</span>);</span><br><span class="line">  parameters_client-&gt;<span class="built_in">wait_for_service</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获取robot_description参数</span></span><br><span class="line">  <span class="keyword">auto</span> future = parameters_client-&gt;<span class="built_in">get_parameters</span>({<span class="string">"robot_description"</span>});</span><br><span class="line">  <span class="keyword">auto</span> result = future.<span class="built_in">get</span>();</span><br><span class="line">  <span class="keyword">if</span> (!result.<span class="built_in">empty</span>()) {</span><br><span class="line">    robot_description_ = result[<span class="number">0</span>].<span class="built_in">value_to_string</span>();</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="built_in">RCLCPP_ERROR</span>(<span class="built_in">get_node</span>()-&gt;<span class="built_in">get_logger</span>(), <span class="string">"Failed to get robot_description parameter."</span>);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  arm_id_ = robot_utils::<span class="built_in">getRobotNameFromDescription</span>(robot_description_, <span class="built_in">get_node</span>()-&gt;<span class="built_in">get_logger</span>());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置碰撞行为</span></span><br><span class="line">  <span class="keyword">if</span> (!is_gazebo) {</span><br><span class="line">    <span class="keyword">auto</span> client = <span class="built_in">get_node</span>()-&gt;<span class="built_in">create_client</span>&lt;franka_msgs::srv::SetFullCollisionBehavior&gt;(</span><br><span class="line">        <span class="string">"service_server/set_full_collision_behavior"</span>);		<span class="comment">// 创建服务客户端</span></span><br><span class="line">    <span class="keyword">auto</span> request = DefaultRobotBehavior::<span class="built_in">getDefaultCollisionBehaviorRequest</span>();		<span class="comment">// 准备请求数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> future_result = client-&gt;<span class="built_in">async_send_request</span>(request);		<span class="comment">// 发送异步请求</span></span><br><span class="line">    future_result.<span class="built_in">wait_for</span>(robot_utils::time_out);							<span class="comment">// 阻塞等待结果</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> success = future_result.<span class="built_in">get</span>();													<span class="comment">// 获取结果</span></span><br><span class="line">    <span class="keyword">if</span> (!success) {</span><br><span class="line">      <span class="built_in">RCLCPP_FATAL</span>(<span class="built_in">get_node</span>()-&gt;<span class="built_in">get_logger</span>(), <span class="string">"Failed to set default collision behavior."</span>);</span><br><span class="line">      <span class="keyword">return</span> CallbackReturn::ERROR;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="built_in">RCLCPP_INFO</span>(<span class="built_in">get_node</span>()-&gt;<span class="built_in">get_logger</span>(), <span class="string">"Default collision behavior set."</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> CallbackReturn::SUCCESS;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<p>根据头文件<code>.hpp</code>中对<code>on_configure</code>的定义, 函数的输入要包括机器人的状态, 但是这里不需要, 但根据ROS2的接口要求必须保留参数类型, 所以给参数添加了注释.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">CallbackReturn <span class="title">JointVelocityExampleController::on_configure</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp_lifecycle::State&amp; <span class="comment">/*previous_state*/</span>)</span> </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><p><code>is_gazebo</code>从ROS参数服务器获取了<code>gazebo</code>的参数, 其中的参数都通过<code>as_bool()</code>转化为bool类型.</p>
</li>
<li><p>通过<code>auto parameters_client</code>创建一个异步参数客户端, 用于获取其他节点的参数.</p>
</li>
<li><p>通过<code>future</code>变量获取<code>robot_description</code>参数, 其中包含机器人的URDF描述.</p>
</li>
<li><p><code>future.get()</code>会阻塞直到结果返回;</p>
</li>
<li><p><code>arm_id</code>从URDF中解析得到了机械臂名称, 如<code>fr3</code>;</p>
</li>
</ul>
<p>最后通过设置碰撞行为, 约束真实机器人工作时的约束条件.</p>
<p>整个控制器架构</p>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="code"><pre><span class="line">整个控制器架构</span><br><span class="line">├── 接口配置</span><br><span class="line">│   ├── command_interface_configuration()  // 控制指令接口</span><br><span class="line">│   └── state_interface_configuration()    // 状态反馈接口</span><br><span class="line">├── 核心逻辑</span><br><span class="line">│   └── update()                           // 控制循环（生成速度指令）</span><br><span class="line">└── 生命周期管理</span><br><span class="line">    ├── on_init()                          // 初始化参数</span><br><span class="line">    ├── on_configure()                      // 主要配置工作 ← 当前重点</span><br><span class="line">    └── on_activate()                       // 激活控制器</span><br></pre></td></tr></table></figure></div>

<h3 id="Gravity-Compensation"><a href="#Gravity-Compensation" class="headerlink" title="Gravity Compensation"></a>Gravity Compensation</h3><p>该控制器通过直接控制关节力矩实现, 主要是两个部分:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::InterfaceConfiguration</span></span><br><span class="line"><span class="function"><span class="title">GravityCompensationExampleController::command_interface_configuration</span><span class="params">()</span> <span class="type">const</span> </span>{</span><br><span class="line">  controller_interface::InterfaceConfiguration config;</span><br><span class="line">  config.type = controller_interface::interface_configuration_type::INDIVIDUAL;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num_joints; ++i) {</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/effort"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>这里控制器给机械臂输入的指令中, <code>/effort</code>直接给机械臂的每个关节发送力矩参数;</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::return_type <span class="title">GravityCompensationExampleController::update</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Time&amp; <span class="comment">/*time*/</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Duration&amp; <span class="comment">/*period*/</span>)</span> </span>{</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; command_interface : command_interfaces_) {</span><br><span class="line">    command_interface.<span class="built_in">set_value</span>(<span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> controller_interface::return_type::OK;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p><code>update()</code>在ros2的控制周期负责执行机器人的底层控制逻辑.</p>
<ul>
<li>由于这个控制器只需要给机器人的关节输入0力矩, 不需要时间和计算, 因此<code>time</code>和<code>period</code>都被注释;</li>
<li><code>auto&amp; command_interface : command_interfaces_</code>用于遍历机械臂的7个关节控制接口;</li>
<li><code>command_interface.set_value(0)</code>设置机器人的关节力矩为0.</li>
</ul>
<h3 id="Move-to-Start"><a href="#Move-to-Start" class="headerlink" title="Move to Start"></a>Move to Start</h3><p>通过力矩控制, 使得机器人回归固定的坐标系;</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::InterfaceConfiguration</span></span><br><span class="line"><span class="function"><span class="title">MoveToStartExampleController::command_interface_configuration</span><span class="params">()</span> <span class="type">const</span> </span>{</span><br><span class="line">  controller_interface::InterfaceConfiguration config;</span><br><span class="line">  config.type = controller_interface::interface_configuration_type::INDIVIDUAL;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num_joints; ++i) {</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/effort"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>给<code>config</code>配置了力矩输入接口;</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::InterfaceConfiguration</span></span><br><span class="line"><span class="function"><span class="title">MoveToStartExampleController::state_interface_configuration</span><span class="params">()</span> <span class="type">const</span> </span>{</span><br><span class="line">  controller_interface::InterfaceConfiguration config;</span><br><span class="line">  config.type = controller_interface::interface_configuration_type::INDIVIDUAL;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num_joints; ++i) {</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/position"</span>);</span><br><span class="line">    config.names.<span class="built_in">push_back</span>(arm_id_ + <span class="string">"_joint"</span> + std::<span class="built_in">to_string</span>(i) + <span class="string">"/velocity"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>通过<code>state_interface_configuration()</code>读取机械臂关节的<code>position</code>和<code>velocity</code>信息.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">controller_interface::return_type <span class="title">MoveToStartExampleController::update</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Time&amp; <span class="comment">/*time*/</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> rclcpp::Duration&amp; <span class="comment">/*period*/</span>)</span> </span>{</span><br><span class="line"></span><br><span class="line">  <span class="built_in">updateJointStates</span>();					<span class="comment">// 更新关节状态</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> trajectory_time = <span class="keyword">this</span>-&gt;<span class="built_in">get_node</span>()-&gt;<span class="built_in">now</span>() - start_time_;					<span class="comment">// 计算从开始运动到归位的时间差</span></span><br><span class="line">  <span class="keyword">auto</span> motion_generator_output = motion_generator_-&gt;<span class="built_in">getDesiredJointPositions</span>(trajectory_time);		<span class="comment">// 获取期望位置并生成平滑轨迹</span></span><br><span class="line">  Vector7d q_desired = motion_generator_output.first;</span><br><span class="line">  <span class="type">bool</span> finished = motion_generator_output.second;</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>trajectory_time</code>通过指针读取<code>rclcpp::Time</code>的时间戳, 记录从开始运动到现在的运动时间;</li>
<li><code>motion_generator_</code>根据时间<code>trajectory_time</code>生成平滑的关节轨迹.</li>
<li><code>motion_generator_output</code>返回期望关节位置, 即初始位置, 最终储存到<code>Vetor7d</code>这个向量上;</li>
<li><code>finished</code>作为一个bool变量判断机械臂是否已经完成整个轨迹.</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">not</span> finished) {</span><br><span class="line">  <span class="type">const</span> <span class="type">double</span> kAlpha = <span class="number">0.99</span>;</span><br><span class="line">  dq_filtered_ = (<span class="number">1</span> - kAlpha) * dq_filtered_ + kAlpha * dq_;</span><br><span class="line">  Vector7d tau_d_calculated =</span><br><span class="line">      k_gains_.<span class="built_in">cwiseProduct</span>(q_desired - q_) + d_gains_.<span class="built_in">cwiseProduct</span>(-dq_filtered_);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; ++i) {</span><br><span class="line">    command_interfaces_[i].<span class="built_in">set_value</span>(<span class="built_in">tau_d_calculated</span>(i));</span><br><span class="line">  }</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; command_interface : command_interfaces_) {</span><br><span class="line">    command_interface.<span class="built_in">set_value</span>(<span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">this</span>-&gt;<span class="built_in">get_node</span>()-&gt;<span class="built_in">set_parameter</span>({<span class="string">"process_finished"</span>, <span class="literal">true</span>});</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> controller_interface::return_type::OK;</span><br></pre></td></tr></table></figure></div>
<p>这里使用了PD控制和低通滤波;</p>
<p>一阶低通滤波数学公式:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">dq_filtered_ = (<span class="number">1</span> - kAlpha) * dq_filtered_ + kAlpha * dq_;</span><br></pre></td></tr></table></figure></div>



<h3 id="Joint-Impedance-Example"><a href="#Joint-Impedance-Example" class="headerlink" title="Joint Impedance Example"></a>Joint Impedance Example</h3><h3 id="Joint-Impedance-with-IK-Example"><a href="#Joint-Impedance-with-IK-Example" class="headerlink" title="Joint Impedance with IK Example"></a>Joint Impedance with IK Example</h3>]]></content>
  </entry>
  <entry>
    <title>Deepseek R1部署</title>
    <url>/2025/02/03/Deepseek-R1%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://zhuanlan.zhihu.com/p/20642808493" >DeepSeek-R1 本地部署指南：Ollama 助你轻松实现，支持2G显卡<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Hexo部署Githubpages</title>
    <url>/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/</url>
    <content><![CDATA[<blockquote>
<p>本教程用于将本地的hexo博客部署到github pages上, 以实现在互联网上的访问; (github pages目前不需要科学上网)</p>
</blockquote>
<h2 id="设置Github密钥"><a href="#设置Github密钥" class="headerlink" title="设置Github密钥"></a>设置Github密钥</h2><p>github采用ssh加密的方式来推送代码, 推送的时候, git会匹配私钥(自己电脑里)和github上面的公钥是否配对, 若配对则认为你是合法用户, 则允许推送.</p>
<p>(在任意地方)右键打开<code>Git Bash Here</code>.</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;2557095375@qq.com&quot;</span></span><br></pre></td></tr></table></figure></div>
<p>生成ssh密钥文件, 然后连续三次回车;</p>
<p>打开github的账户中的<code>Settings</code>, 打开<code>SSH and GPG keys</code>这个页面;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_1.png"
                      class="" width="600"
                >

<p><code>C:\Users\hwx_pc\.ssh</code>在这个路径中找到文件<code>id_rsa.pub</code>(也可以用Everything找), 用记事本打开, 将内容复制并粘贴到<code>key</code>中;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_2.png"
                      class="" width="600"
                >

<p>添加完成如图；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_3.png"
                      class="" width="400"
                >

<p>回到<code>github bash</code>, 输入:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh git@github.com</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_4.png"
                      class="" width="400"
                >
<p>这样就是连接成功了.</p>
<h2 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h2><p>在github新建一个仓库, 输入自己的账户名, 后面加上<code>.github.io</code>, 点击<code>Initialize this repository with a README</code></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_6.png"
                      class="" width="400"
                >

<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>在hexo的根目录下找到<code>_config.yml</code>文件, 修改<code>Deployment</code>中的参数选项;</p>
<div class="code-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/Roboticshwx/Roboticshwx.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure></div>
<p><code>repo</code>为github pages的访问ip地址;</p>
<h2 id="部署-x2F-更新"><a href="#部署-x2F-更新" class="headerlink" title="部署&#x2F;更新"></a>部署&#x2F;更新</h2><p>想要部署或者内容, 在hexo根目录下输入以下命令</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></div>
<p>即可访问该网页;<br><a class="link"   href="https://roboticshwx.github.io/" >Fomalhaut Wiki<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h2><ul>
<li>Connection refuesd<br>在<code>git bash</code>中，输入<code>ssh-keygen -t rsa -C &quot;2557095375@qq.com&quot;</code>后可能会出现一种情况, 报错显示无法访问;<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh: connect to host github.com port 22: Connection refused</span><br></pre></td></tr></table></figure></div>
确认浏览器可以正常登入github之后, 可能是因为22端口被电脑或路由器的防火墙屏蔽了, 则用443端口代替;</li>
</ul>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.ssh/config</span><br></pre></td></tr></table></figure></div>

<p>在这个文件添加如下内容, ssh连接github的时候就会使用443端口;</p>
<div class="code-container" data-rel="Vim"><figure class="iseeu highlight vim"><table><tr><td class="code"><pre><span class="line">Host github.<span class="keyword">com</span></span><br><span class="line">    Hostname ssh.github.<span class="keyword">com</span></span><br><span class="line">    Port <span class="number">443</span></span><br></pre></td></tr></table></figure></div>
<p>再进行测试即可.</p>
<p>如果还是不行, 可能github的DNS被污染了, 可以从下面文章找到解决方法.</p>
<p>参考资料: <a class="link"   href="https://zhuanlan.zhihu.com/p/521340971" >坑：ssh: connect to host github.com port 22: Connection refused<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li>Unsupported proxy syntax in ‘:7890’:No host part in the URL</li>
</ul>
<p>输入<code>hexo d</code>之后可能会出现以下报错:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/Roboticshwx/Roboticshwx.github.io.git/&#x27;</span>: Unsupported proxy syntax <span class="keyword">in</span> <span class="string">&#x27;:7890&#x27;</span>: No host part <span class="keyword">in</span> the URL</span><br></pre></td></tr></table></figure></div>

<p>这个情况是本机系统代理端口和git端口不一致导致的, 也有可能是没有设置git对应端口;</p>
<p>查看自己本机的系统代理;<br><code>设置</code>–<code>网络和Internet</code>–<code>代理</code>–<code>手动设置代理</code></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_5.png"
                      class="" width="400"
                >

<p>修改git配置, 其中7890为电脑的端口;</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:7890</span><br><span class="line">git config --global https.proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure></div>

<p>再次部署则成功.</p>
<ul>
<li>Error: EPERM: operation not permitted, unlink ‘D:\OneDrive - 华南师范大学\fomalhaut_wiki.deploy_git\2024\09\14’</li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/Hexo%E9%83%A8%E7%BD%B2Githubpages/fig_7.png"
                      class="" width="400"
                >

<p>疑似OneDrive同步导致的问题, 重启OneDrive等待同步完成即可.</p>
]]></content>
      <categories>
        <category>Basic Computer Programming</category>
      </categories>
  </entry>
  <entry>
    <title>ESP32入门学习</title>
    <url>/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="🛠️开发环境搭建"><a href="#🛠️开发环境搭建" class="headerlink" title="🛠️开发环境搭建"></a>🛠️开发环境搭建</h1><hr>
<h2 id="Vscode-PlatformIO"><a href="#Vscode-PlatformIO" class="headerlink" title="Vscode PlatformIO"></a>Vscode PlatformIO</h2><p>利用vscode platformIO搭建开发环境。</p>
<p><strong>1. 将ESP32开发板连接到电脑上，打开设备管理器，查看端口号.</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_1.png"
                      class="" width="600"
                >

<p>这里是COM5，如果没有显示端口号则需要安装驱动。</p>
<p><strong>2. 新建工程文件夹（例如某个项目文件夹里面），在文件夹的环境中打开vscode(Shift+F10 在code环境中打开)，然后打开插件PlarformIO-(左下角)<code>QUICK ACCESS</code>-<code>PIO HOME</code>-<code>Open</code></strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_2.png"
                      class="" width="700"
                >

<p>可以在<code>Devices</code>中查看到ESP32的端口号(左边栏)</p>
<p>也可以在<code>Projects</code>中打开其他工程文件夹</p>
<p><strong>3. 新建项目，点击上图<code>New Project</code>，按照下图填上框架。</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_3.png"
                      class="" width="500"
                >

<p>如果vscode没有打开文件夹，则可以在<code>Project Wizzard</code>最下面新建一个项目的文件夹和它的地址；</p>
<p>创建之后在<code>src</code>文件夹中会有一个<code>main.cpp</code>文件，代码就放在这个地方。</p>
<p><strong>编译下载</strong></p>


<p>在vscode左下角</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_9.png"
                      class="" width="800"
                >

<p>点击左边的Build编译，点击右边的Upload下载。</p>
<h1 id="📬ESP32串口通信"><a href="#📬ESP32串口通信" class="headerlink" title="📬ESP32串口通信"></a>📬ESP32串口通信</h1><hr>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>串口是单片机常用的一种通信方式，通过两条线：TX和RX进行通信。</p>
<p>连接方式：一端的Tx接另外一端Rx，一端的Rx接另外一端Tx。</p>
<h2 id="串口收发"><a href="#串口收发" class="headerlink" title="串口收发"></a>串口收发</h2><h3 id="发送"><a href="#发送" class="headerlink" title="发送"></a>发送</h3><p>将ESP32与电脑连接（注意Tx和RX连接方式），利用TTL转USB模块连接。</p>
<p>ESP32有四个串口，分别是：Serial0、Serial1、Serial2、Serial3，一般不用Serial0，因为它用来烧录程序。</p>
<p>这里用Serial1向电脑发送指令，我们用串口调试助手来看效果。</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  Serial1.<span class="built_in">begin</span>(<span class="number">115200</span>, SERIAL_8N1, <span class="number">17</span>, <span class="number">16</span>); </span><br><span class="line">  <span class="comment">// 初始化Serial1，波特率为115200，帧格式为8位数据位，无校验位，1位停止位，设置接收端IO17为RX, IO16为TX</span></span><br><span class="line"></span><br><span class="line">  Serial1.<span class="built_in">println</span>(<span class="string">&quot;ESP32 Serial Communication Test&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial1.<span class="built_in">println</span>(<span class="string">&quot;Hello from ESP32!&quot;</span>);  <span class="comment">// 向电脑发送指令包</span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

  <div class="note p-4 mb-4 rounded-small default">
    <p><code>SERIAL_8N1</code>表示传输的一帧的帧格式，内容为8位数据位，无校验位，1位停止位。然后先设置Rx引脚，再设置Tx引脚。</p>

  </div>

<p>我们需要在串口调试助手中选择好串口，设置波特率和帧格式，这里设置为115200，8N1。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_4.png"
                      class="" width="500"
                >

<p>烧录程序，打开串口</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_5.png"
                      class="" width="500"
                >

<p>ESP32不断向电脑发送指令包，电脑不断接收并且显示出来。</p>
<h3 id="接收"><a href="#接收" class="headerlink" title="接收"></a>接收</h3><p>同样的连接方式。</p>
<p>通过LED灯来判断是否接收到数据。</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Serial1.<span class="built_in">begin</span>(<span class="number">115200</span>, SERIAL_8N1, <span class="number">17</span>, <span class="number">16</span>);</span><br><span class="line">    <span class="built_in">pinMode</span>(LED_PIN, OUTPUT);</span><br><span class="line">    <span class="built_in">digitalWrite</span>(LED_PIN, LOW);</span><br><span class="line"></span><br><span class="line">    Serial1.<span class="built_in">println</span>(<span class="string">&quot;ESP32 Serial Communication Test&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Serial1.<span class="built_in">available</span>()) <span class="comment">// 检查串口是否有数据</span></span><br><span class="line">    &#123;</span><br><span class="line">        String receiveData = Serial1.<span class="built_in">readString</span>(); <span class="comment">// 读取并存储串口数据</span></span><br><span class="line">        Serial1.<span class="built_in">println</span>(<span class="string">&quot;Received data: &quot;</span> + receiveData); <span class="comment">// 将串口数据发送回电脑</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (receiveData == <span class="string">&quot;on&quot;</span>) <span class="comment">// 如果串口数据为“on”</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">digitalWrite</span>(LED_PIN, HIGH); <span class="comment">// 点亮LED</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">digitalWrite</span>(LED_PIN, LOW); <span class="comment">// 关闭LED</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>电脑返回发送的数据：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_6.png"
                      class="" width="500"
                >
<p>当只发送”on”，则可以点亮LED，发送其他数据则关闭LED。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_7.jpg"
                      class="" width="200"
                >

<h2 id="16进制数据收发"><a href="#16进制数据收发" class="headerlink" title="16进制数据收发"></a>16进制数据收发</h2><p>通常，我们在串口调试助手中发送的数据都是ASCII码，但是与传感器通信时通常都需要16进制的指令包。</p>
<p>因为一个字节等于两位16进制数，因此发送的时候以两位16进制为单位进行编码，16进制的编码格式：</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="type">const</span> <span class="type">uint8_t</span> PS_Search[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0x50</span>, <span class="number">0x00</span>, <span class="number">0x0A</span>, <span class="number">0x00</span>, <span class="number">0x68</span>&#125;; </span><br><span class="line"><span class="comment">// 指令包: EF01 FF 01 50 000A 0068</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial1.<span class="built_in">begin</span>(<span class="number">57600</span>, SERIAL_8N2, <span class="number">27</span>, <span class="number">26</span>); <span class="comment">// 初始化串口</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial1.<span class="built_in">write</span>(PS_Search, <span class="built_in">sizeof</span>(PS_Search)); <span class="comment">// 发送指令包</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>如果需要计算校验和，一定要谨慎，校验和的计算很容易出错，计算时先把16进制全部转化为10进制，加起来再转换为16进制。</p>
<p>可以用在线的<a class="link"   href="https://www.sojson.com/hexconvert/10to16.html" >进制转换工具<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>。</p>
<h1 id="📮ESP32SPI通信"><a href="#📮ESP32SPI通信" class="headerlink" title="📮ESP32SPI通信"></a>📮ESP32SPI通信</h1><blockquote>
<p>SPI 串行外设接口 (Serial Peripheral Interface) 是一种高速的，全双工，同步的通信总线。</p>
</blockquote>
<p>ESP32集成了4个SPI控制器，分别是SPI0, SPI1, SPI2, SPI3，由于flash使用SPI0, SPI1，因此SPI2和SPI3是通用的SPI控制器，日常使用这两个SPI进行开发。</p>

  <div class="note p-4 mb-4 rounded-small default">
    <p>SPI2也叫HSPI，SPI3也叫VSPI。</p>

  </div>

<p>使用默认的引脚，可以使用80MHz的时钟。</p>
<table>
<thead>
<tr>
<th>SPI2 (HSPI)</th>
<th>SPI3 (VSPI)</th>
<th>SPI Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>13</td>
<td>23</td>
<td>MOSI</td>
<td>主设备输出，从设备输入</td>
</tr>
<tr>
<td>12</td>
<td>19</td>
<td>MISO</td>
<td>主设备输入，从设备输出</td>
</tr>
<tr>
<td>14</td>
<td>18</td>
<td>SCLK</td>
<td>时钟信号</td>
</tr>
<tr>
<td>15</td>
<td>5</td>
<td>SS</td>
<td>片选信号（用于从设备选择）</td>
</tr>
</tbody></table>
<h1 id="🦾ESP32输出PWM信号"><a href="#🦾ESP32输出PWM信号" class="headerlink" title="🦾ESP32输出PWM信号"></a>🦾ESP32输出PWM信号</h1><p>ESP32的芯片中有专门用于脉宽调制（PWM）的模块, pwm信号在ESP32中有两个模块经常用到：</p>
<ul>
<li>LEDc模块<ul>
<li>16个可用通道;</li>
<li>8个可用定时器;</li>
<li>频率范围从1Hz~40MHz;</li>
<li>PWM分别率从1位到16位;</li>
</ul>
</li>
<li>MCPWM (Motor Control PWM)<ul>
<li>6个可用通道;</li>
<li>内置死区控制, 用于电机控制的驱动H桥;</li>
<li>包括捕获功能, 可以读取外部PWM信号的频率和占空比;</li>
<li>主要用于复杂的电机控制;</li>
</ul>
</li>
</ul>
<h2 id="LEDc模块"><a href="#LEDc模块" class="headerlink" title="LEDc模块"></a>LEDc模块</h2><p>LEDc模块通常用于LED控制或者简单的电机控制; 关于为什么不用<code>analogWrite()</code>, 看看gpt怎么说:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_14.png"
                      class="" width="500"
                >

<p>参考资料: <a class="link"   href="https://www.zhihu.com/tardis/zm/art/639633183?source_id=1005" >深度ESP32 PWM教程如何在ESP32中使用PWM<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>常用的三个API:</p>
<ul>
<li><code>ledcSetup(channel, frequence, resolution)</code><ul>
<li>设置的参数依次是通道, 频率, 分辨率;</li>
</ul>
</li>
<li><code>ledcAttachPin(pin, channel)</code><ul>
<li>将GPIO与LEDc的通道绑定</li>
</ul>
</li>
<li><code>ledcWrite(channel, Occupational cycle)</code><ul>
<li>输出pwm信号</li>
</ul>
</li>
</ul>
<p>代码示例(用于pwm控制电机)</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> motorPinPWM = <span class="number">5</span>; <span class="comment">// 选择一个GPIO用于PWM输出</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> freq = <span class="number">15000</span>;    <span class="comment">// 设置PWM频率为15kHz，根据需要在15-25kHz范围内更改这个值</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> ledChannel = <span class="number">0</span>;  <span class="comment">// 使用LEDc模块的通道0</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> resolution = <span class="number">8</span>;  <span class="comment">// 使用8位解析度，即PWM值在0-255之间</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// 配置LEDc的定时器</span></span><br><span class="line">  ledcSetup(ledChannel, freq, resolution);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 将GPIO与LEDc的通道绑定</span></span><br><span class="line">  ledcAttachPin(motorPinPWM, ledChannel);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// 设置PWM值为中间值</span></span><br><span class="line">  ledcWrite(ledChannel, <span class="number">128</span>);</span><br><span class="line">  </span><br><span class="line">  delay(<span class="number">2000</span>); <span class="comment">// 等待2秒</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置PWM值为最大</span></span><br><span class="line">  ledcWrite(ledChannel, <span class="number">255</span>);</span><br><span class="line">  </span><br><span class="line">  delay(<span class="number">2000</span>); <span class="comment">// 等待2秒</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置PWM值为最小</span></span><br><span class="line">  ledcWrite(ledChannel, <span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  delay(<span class="number">2000</span>); <span class="comment">// 等待2秒</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>需要根据电机的调速频率设置<code>freq</code>参数, 这里的电机调速范围是15-25kHz.</p>
<p>如果需要设置脉宽来控制电机或者舵机，可以使用函数：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setMotorPWM</span><span class="params">(<span class="type">int</span> motor, <span class="type">int</span> pulseWidthUs)</span> &#123;</span><br><span class="line">  <span class="comment">// 计算占空比</span></span><br><span class="line">  <span class="type">uint32_t</span> duty = (pulseWidthUs * (<span class="number">1</span> &lt;&lt; LEDC_RESOLUTION)) / <span class="number">20000</span>;</span><br><span class="line">  ledcWrite(motorChannels[motor], duty);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>对于常用的舵机SG90，其PWM信号的周期为20ms（控制频率为50Hz），占空比为0.5ms（0度）<del>2.5ms（180度），在10位分辨率下，占空比为26</del>128</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> resolution 10 <span class="comment">// 分辨率</span></span></span><br><span class="line">...</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  ledcWrite(ledChannel, <span class="number">26</span>); <span class="comment">// 0度</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">  ledcWrite(ledChannel, <span class="number">77</span>); <span class="comment">// 90度</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">  ledcWrite(ledChannel, <span class="number">128</span>); <span class="comment">// 180度</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>





<h1 id="🚦ESP32外部中断"><a href="#🚦ESP32外部中断" class="headerlink" title="🚦ESP32外部中断"></a>🚦ESP32外部中断</h1><p>可以通过配置某些引脚在其状态变化时，触发一个函数。</p>
<h1 id="⚙️ESP32常用模块"><a href="#⚙️ESP32常用模块" class="headerlink" title="⚙️ESP32常用模块"></a>⚙️ESP32常用模块</h1><h2 id="超声波模块"><a href="#超声波模块" class="headerlink" title="超声波模块"></a>超声波模块</h2><p>以HC-SR04为例：</p>

  <div class="note p-4 mb-4 rounded-small primary">
    <p>原理：</p>
<ol>
<li>单片机给模块发送一个至少10us的高电平脉冲到Trig引脚（触发）。</li>
<li>模块接收到脉冲后会在Echo引脚（回声）发出一个高电平脉冲。</li>
<li>这个脉冲的持续时间就是声波从发出到反射回来的时间，通过测量声速往返的时间，便可以得到距离。</li>
</ol>

  </div>



<h2 id="蓝牙模块"><a href="#蓝牙模块" class="headerlink" title="蓝牙模块"></a>蓝牙模块</h2><p>蓝牙模块使用的是&lt;BLEDevice.h&gt;这个库，通过一段示例代码，使得手机或者平板可以通过蓝牙设备搜索，以LED为信号，来尝试连接esp32;</p>
<p>UUID用于区分一个服务器中不同的服务和不同的特性，可以用UUID生成器（直接搜一个）来生成UUID;</p>
<p>在BLE中，有以下几个重要的概念：</p>
<ul>
<li><p>BLE设备 (BLE Device): </p>
<ul>
<li>任何能够进行BLE通信的物理设备都可以被认为是一个BLE设备。这包括手机或平板或ESP32。</li>
</ul>
</li>
<li><p>BLE服务器 (BLE Server): </p>
<ul>
<li>在BLE通信中，服务器是保存并提供数据的设备。服务器拥有一种称为“GATT (Generic Attribute Profile)”的数据结构，这个数据结构包含了这个服务器可以提供的所有数据。</li>
</ul>
</li>
<li><p>BLE服务 (BLE Service): </p>
<ul>
<li>在GATT数据结构中，服务是一种组织数据的方式。每个服务都有一个唯一的UUID，以标识这个服务。服务包含了一组特性，每个特性都代表了一个数据点。</li>
</ul>
</li>
<li><p>BLE特性 (BLE Characteristic): </p>
<ul>
<li>特性代表了一个数据点，例如一个传感器的读数或一个开关的状态。每个特性都有一个唯一的UUID，以标识这个特性。特性可以有不同的属性，例如可以读取、可以写入、可以通知等。</li>
</ul>
</li>
</ul>
<p>因此需要在代码中一步步创建以上四个对象。最后开始服务和开始广播，则可以在手机或者平板中找到对应的esp32设备进行连接。</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;BLEDevice.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> deviceConnected = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVICE_UUID           <span class="string">&quot;fdad0fc5-a2af-4afd-a90e-4b1b590687bf&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CHARACTERISTIC_UUID    <span class="string">&quot;5a5409a9-1206-4f6d-8f0b-c758946329e2&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyServerCallbacks</span>: <span class="keyword">public</span> BLEServerCallbacks &#123;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">onConnect</span><span class="params">(BLEServer* pServer)</span> </span>&#123;</span><br><span class="line">    deviceConnected = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">digitalWrite</span>(LED_PIN, HIGH);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">onDisconnect</span><span class="params">(BLEServer* pServer)</span> </span>&#123;</span><br><span class="line">    deviceConnected = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">digitalWrite</span>(LED_PIN, LOW);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">115200</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建设备</span></span><br><span class="line">  BLEDevice::<span class="built_in">init</span>(<span class="string">&quot;ESP32_BLE&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建服务器</span></span><br><span class="line">  BLEServer *pServer = BLEDevice::<span class="built_in">createServer</span>();</span><br><span class="line">  pServer-&gt;<span class="built_in">setCallbacks</span>(<span class="keyword">new</span> <span class="built_in">MyServerCallbacks</span>());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建服务</span></span><br><span class="line">  BLEService *pService = pServer-&gt;<span class="built_in">createService</span>(SERVICE_UUID);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建特性</span></span><br><span class="line">  BLECharacteristic *pCharacteristic = pService-&gt;<span class="built_in">createCharacteristic</span>(</span><br><span class="line">    CHARACTERISTIC_UUID,</span><br><span class="line">    BLECharacteristic::PROPERTY_READ   |</span><br><span class="line">    BLECharacteristic::PROPERTY_WRITE  |</span><br><span class="line">    BLECharacteristic::PROPERTY_NOTIFY |</span><br><span class="line">    BLECharacteristic::PROPERTY_INDICATE</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">//开始服务</span></span><br><span class="line">  pService-&gt;<span class="built_in">start</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//开始广播</span></span><br><span class="line">  BLEAdvertising *pAdvertising = pServer-&gt;<span class="built_in">getAdvertising</span>();</span><br><span class="line">  pAdvertising-&gt;<span class="built_in">start</span>();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">pinMode</span>(LED_PIN, OUTPUT);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h2 id="WiFi模块"><a href="#WiFi模块" class="headerlink" title="WiFi模块"></a>WiFi模块</h2><p>Esp32的WiFi模块有三种工作模式：</p>
<ul>
<li>Wi-Fi Station<ul>
<li>作为网络的客户端，可以连接路由器与互联网交换数据；</li>
</ul>
</li>
<li>Access Point<ul>
<li>作为一个“热点”，可以不需要路由器，其他设备连接Esp32与其交换数据；</li>
</ul>
</li>
<li>Wi-Fi Station + Access Point<ul>
<li>两者功能兼具；</li>
</ul>
</li>
</ul>
<p>参考资料：<a class="link"   href="https://randomnerdtutorials.com/esp32-useful-wi-fi-functions-arduino/" >ESP32 Useful Wi-Fi Library Functions (Arduino IDE)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="Access-Point"><a href="#Access-Point" class="headerlink" title="Access Point"></a>Access Point</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_11.png"
                      class="" width="600"
                >

<p>在AP模式下, 所有设备可以作为客户端与ESP32进行连接, 利用ESP32的Arduion框架中的<code>WiFi.h</code>, 然后通过设置wifi连接, 同时在代码种通过HTML来设计网页, 可以实现通过wifi网页控制ESP32, 或者控制机器人等.</p>
<p>示例代码, 通过wifi控制ESP32的led开关.</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Load Wi-Fi library</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WiFi.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Replace with your network credentials</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* ssid     = <span class="string">&quot;ESP32-Access-Point&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set web server port number to 80</span></span><br><span class="line">WiFiServer <span class="title function_">server</span><span class="params">(<span class="number">80</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Variable to store the HTTP request</span></span><br><span class="line">String header;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Auxiliar variables to store the current output state</span></span><br><span class="line">String output2State = <span class="string">&quot;off&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Assign output variables to GPIO pins</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> output2 = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  <span class="comment">// Initialize the output variables as outputs</span></span><br><span class="line">  pinMode(output2, OUTPUT);</span><br><span class="line">  <span class="comment">// Set outputs to LOW</span></span><br><span class="line">  digitalWrite(output2, LOW);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Connect to Wi-Fi network with SSID and password</span></span><br><span class="line">  Serial.print(<span class="string">&quot;Setting AP (Access Point)…&quot;</span>);</span><br><span class="line">  <span class="comment">// Remove the password parameter, if you want the AP (Access Point) to be open</span></span><br><span class="line">  WiFi.softAP(ssid, password);</span><br><span class="line"></span><br><span class="line">  IPAddress IP = WiFi.softAPIP();</span><br><span class="line">  Serial.print(<span class="string">&quot;AP IP address: &quot;</span>);</span><br><span class="line">  Serial.println(IP);</span><br><span class="line">  </span><br><span class="line">  server.begin();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span>&#123;</span><br><span class="line">  WiFiClient client = server.available();   <span class="comment">// Listen for incoming clients</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (client) &#123;                             <span class="comment">// If a new client connects,</span></span><br><span class="line">    Serial.println(<span class="string">&quot;New Client.&quot;</span>);          <span class="comment">// print a message out in the serial port</span></span><br><span class="line">    String currentLine = <span class="string">&quot;&quot;</span>;                <span class="comment">// make a String to hold incoming data from the client</span></span><br><span class="line">    <span class="keyword">while</span> (client.connected()) &#123;            <span class="comment">// loop while the client&#x27;s connected</span></span><br><span class="line">      <span class="keyword">if</span> (client.available()) &#123;             <span class="comment">// if there&#x27;s bytes to read from the client,</span></span><br><span class="line">        <span class="type">char</span> c = client.read();             <span class="comment">// read a byte, then</span></span><br><span class="line">        Serial.write(c);                    <span class="comment">// print it out the serial monitor</span></span><br><span class="line">        header += c;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;\n&#x27;</span>) &#123;                    <span class="comment">// if the byte is a newline character</span></span><br><span class="line">          <span class="comment">// if the current line is blank, you got two newline characters in a row.</span></span><br><span class="line">          <span class="comment">// that&#x27;s the end of the client HTTP request, so send a response:</span></span><br><span class="line">          <span class="keyword">if</span> (currentLine.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// HTTP headers always start with a response code (e.g. HTTP/1.1 200 OK)</span></span><br><span class="line">            <span class="comment">// and a content-type so the client knows what&#x27;s coming, then a blank line:</span></span><br><span class="line">            client.println(<span class="string">&quot;HTTP/1.1 200 OK&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;Content-type:text/html&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;Connection: close&quot;</span>);</span><br><span class="line">            client.println();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// turns the GPIOs on and off</span></span><br><span class="line">            <span class="keyword">if</span> (header.indexOf(<span class="string">&quot;GET /2/on&quot;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">              Serial.println(<span class="string">&quot;GPIO 2 on&quot;</span>);</span><br><span class="line">              output2State = <span class="string">&quot;on&quot;</span>;</span><br><span class="line">              digitalWrite(output2, HIGH);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (header.indexOf(<span class="string">&quot;GET /2/off&quot;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">              Serial.println(<span class="string">&quot;GPIO 2 off&quot;</span>);</span><br><span class="line">              output2State = <span class="string">&quot;off&quot;</span>;</span><br><span class="line">              digitalWrite(output2, LOW);</span><br><span class="line">            &#125; </span><br><span class="line"></span><br><span class="line">            <span class="comment">// Display the HTML web page</span></span><br><span class="line">            client.println(<span class="string">&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;&lt;head&gt;&lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1\&quot;&gt;&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;&lt;link rel=\&quot;icon\&quot; href=\&quot;data:,\&quot;&gt;&quot;</span>);</span><br><span class="line">            <span class="comment">// CSS to style the on/off buttons </span></span><br><span class="line">            <span class="comment">// Feel free to change the background-color and font-size attributes to fit your preferences</span></span><br><span class="line">            client.println(<span class="string">&quot;&lt;style&gt;html &#123; font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center;&#125;&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;.button &#123; background-color: #4CAF50; border: none; color: white; padding: 16px 40px;&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;text-decoration: none; font-size: 30px; margin: 2px; cursor: pointer;&#125;&quot;</span>);</span><br><span class="line">            client.println(<span class="string">&quot;.button2 &#123;background-color: #555555;&#125;&lt;/style&gt;&lt;/head&gt;&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Web Page Heading</span></span><br><span class="line">            client.println(<span class="string">&quot;&lt;body&gt;&lt;h1&gt;ESP32 Web Server&lt;/h1&gt;&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Display current state, and ON/OFF buttons for GPIO 2  </span></span><br><span class="line">            client.println(<span class="string">&quot;&lt;p&gt;GPIO 2 - State &quot;</span> + output2State + <span class="string">&quot;&lt;/p&gt;&quot;</span>);</span><br><span class="line">            <span class="comment">// If the output2State is off, it displays the ON button       </span></span><br><span class="line">            <span class="keyword">if</span> (output2State==<span class="string">&quot;off&quot;</span>) &#123;</span><br><span class="line">              client.println(<span class="string">&quot;&lt;p&gt;&lt;a href=\&quot;/2/on\&quot;&gt;&lt;button class=\&quot;button\&quot;&gt;ON&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              client.println(<span class="string">&quot;&lt;p&gt;&lt;a href=\&quot;/2/off\&quot;&gt;&lt;button class=\&quot;button button2\&quot;&gt;OFF&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.println(<span class="string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// The HTTP response ends with another blank line</span></span><br><span class="line">            client.println();</span><br><span class="line">            <span class="comment">// Break out of the while loop</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123; <span class="comment">// if you got a newline, then clear currentLine</span></span><br><span class="line">            currentLine = <span class="string">&quot;&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c != <span class="string">&#x27;\r&#x27;</span>) &#123;  <span class="comment">// if you got anything else but a carriage return character,</span></span><br><span class="line">          currentLine += c;      <span class="comment">// add it to the end of the currentLine</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Clear the header variable</span></span><br><span class="line">    header = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// Close the connection</span></span><br><span class="line">    client.stop();</span><br><span class="line">    Serial.println(<span class="string">&quot;Client disconnected.&quot;</span>);</span><br><span class="line">    Serial.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>烧录代码后, 打开wifi连接, 选择如下图:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_12.png"
                      class="" width="400"
                >

<p>然后进入浏览器, 输入ip地址<code>192.168.4.1</code>, 得到以下画面.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_13.jpg"
                      class="" width="200"
                >

<p>可以进行led的控制了.</p>
<h2 id="Mqtt通信"><a href="#Mqtt通信" class="headerlink" title="Mqtt通信"></a>Mqtt通信</h2><p>在PlatformIO中开发需要提前安装好<code>PubSubClinet.h</code>库；</p>
<p>关于Mqtt的基础知识，可以看这里：<a class="link"   href="https://randomnerdtutorials.com/what-is-mqtt-and-how-it-works/" >What is MQTT and How It Works<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>烧录代码到esp32中，这里连接了家里的wifi，并且订阅了节点<code>test/led</code>，通过树莓派订阅节点并且向borker发送消息即可点亮或者关闭led;</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;PubSubClient.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WiFi.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Wifi SSID/Password</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* ssid = <span class="string">&quot;HUAWEI&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* password = <span class="string">&quot;22600692&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MQTT Broker ip</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* mqtt_server = <span class="string">&quot;192.168.3.232&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> ledPin = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">WiFiClient espClient;</span><br><span class="line">PubSubClient <span class="title function_">client</span><span class="params">(espClient)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// conncet Wifi and Mqtt</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup_wifi</span><span class="params">()</span> &#123;</span><br><span class="line">  delay(<span class="number">10</span>);</span><br><span class="line">  Serial.println();</span><br><span class="line">  Serial.print(<span class="string">&quot;Connecting to &quot;</span>);</span><br><span class="line">  Serial.println(ssid);</span><br><span class="line"></span><br><span class="line">  WiFi.begin(ssid, password);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (WiFi.status() != WL_CONNECTED) &#123;</span><br><span class="line">    delay(<span class="number">500</span>);</span><br><span class="line">    Serial.print(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Serial.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  Serial.println(<span class="string">&quot;WiFi connected&quot;</span>);</span><br><span class="line">  Serial.println(<span class="string">&quot;IP address: &quot;</span>);</span><br><span class="line">  Serial.println(WiFi.localIP());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// receive message from topic, check the message and control led</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">callback</span><span class="params">(<span class="type">char</span>* topic, byte* payload, <span class="type">unsigned</span> <span class="type">int</span> length)</span> &#123;</span><br><span class="line">  Serial.print(<span class="string">&quot;Message arrived on topic: &quot;</span>);</span><br><span class="line">  Serial.print(topic);</span><br><span class="line">  Serial.print(<span class="string">&quot;. Message: &quot;</span>);</span><br><span class="line"></span><br><span class="line">  payload[length] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">  String message = (<span class="type">char</span>*)payload;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (message == <span class="string">&quot;led on&quot;</span>) &#123;</span><br><span class="line">    digitalWrite(ledPin, HIGH);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message == <span class="string">&quot;led off&quot;</span>) &#123;</span><br><span class="line">    digitalWrite(ledPin, LOW);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line"></span><br><span class="line">  setup_wifi();</span><br><span class="line">  client.setServer(mqtt_server, <span class="number">1883</span>);</span><br><span class="line">  client.setCallback(callback);</span><br><span class="line"></span><br><span class="line">  pinMode(ledPin, OUTPUT);</span><br><span class="line">  digitalWrite(ledPin, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// loop until we&#x27;re reconnected</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">reconnect</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (!client.connected()) &#123;</span><br><span class="line">    Serial.print(<span class="string">&quot;Attempting MQTT connection...&quot;</span>);</span><br><span class="line">    <span class="comment">// Attempt to connect</span></span><br><span class="line">    <span class="keyword">if</span> (client.connect(<span class="string">&quot;ESP8266Client&quot;</span>)) &#123;</span><br><span class="line">      Serial.println(<span class="string">&quot;connected&quot;</span>);</span><br><span class="line">      <span class="comment">// Subscribe to Mqtt topics</span></span><br><span class="line">      client.subscribe(<span class="string">&quot;test/led&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      Serial.print(<span class="string">&quot;failed, rc=&quot;</span>);</span><br><span class="line">      Serial.print(client.state());</span><br><span class="line">      Serial.println(<span class="string">&quot; try again in 5 seconds&quot;</span>);</span><br><span class="line">      <span class="comment">// Wait 5 seconds before retrying</span></span><br><span class="line">      delay(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!client.connected()) &#123;</span><br><span class="line">    reconnect();</span><br><span class="line">  &#125;</span><br><span class="line">  client.loop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>在树莓派中订阅topic并且发送消息</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">mosquitto_pub -d -t <span class="built_in">test</span>/led -m <span class="string">&quot;led on&quot;</span></span><br><span class="line">mosquitto_pub -d -t <span class="built_in">test</span>/led -m <span class="string">&quot;led off&quot;</span></span><br></pre></td></tr></table></figure></div>
<p>能观察到led的开关。</p>
<h1 id="🪄常见问题"><a href="#🪄常见问题" class="headerlink" title="🪄常见问题"></a>🪄常见问题</h1><hr>
<h2 id="无法定位到库"><a href="#无法定位到库" class="headerlink" title="无法定位到库"></a>无法定位到库</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/11/ESP32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/fig_10.png"
                      class="" width="800"
                >

<p>在项目工程文件夹中<code>platformio.ini</code>中添加<code>lib_deps = ESP32Servo</code>，然后重新编译。</p>
<div class="code-container" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[env:esp32dev]</span></span><br><span class="line"><span class="attr">platform</span> = espressif32</span><br><span class="line"><span class="attr">board</span> = esp32dev</span><br><span class="line"><span class="attr">framework</span> = ardui<span class="literal">no</span></span><br><span class="line"><span class="attr">lib_deps</span> = ESP32Servo</span><br></pre></td></tr></table></figure></div>

<p>多个库的话，用空格隔开</p>
<div class="code-container" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">lib_deps</span> = </span><br><span class="line">    MFRC522</span><br><span class="line">    IRremote</span><br></pre></td></tr></table></figure></div>

<h2 id="无法烧录"><a href="#无法烧录" class="headerlink" title="无法烧录"></a>无法烧录</h2><ul>
<li>检查串口是否被占用，或者是否连接到错误的串口；</li>
<li>检查ESP32的pin2是否外部输入高电平，如果是则无法烧录；</li>
</ul>
<h2 id="中断函数"><a href="#中断函数" class="headerlink" title="中断函数"></a>中断函数</h2><p>中断函数很难用，一般情况下不要使用，而且不要在中断函数中用串口发送信息。</p>
]]></content>
      <categories>
        <category>Electronics and Embedded System</category>
      </categories>
  </entry>
  <entry>
    <title>CAD设计技巧</title>
    <url>/2023/07/21/CAD%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<blockquote>
<p>CAD能力的提升在于不断的练习, 熟能生巧.</p>
</blockquote>
<h2 id="SolidWorks"><a href="#SolidWorks" class="headerlink" title="SolidWorks"></a>SolidWorks</h2><p><code>Alt + T</code>+<code>Z</code>可以打开自定义设置，设置鼠标笔势和快捷键。</p>
<h3 id="鼠标笔势"><a href="#鼠标笔势" class="headerlink" title="鼠标笔势"></a>鼠标笔势</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/21/CAD%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/fig_1.png"
                      class="" width="600"
                >

<p>将常用的命令分配到对应的鼠标笔势即可。</p>
<h3 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h3><ul>
<li>将<code>正视于</code>改为空格；</li>
</ul>
<p>常用特征：<br><code>Q</code>为拉伸凸台，<code>W</code>为拉伸切除；<br><code>E</code>为旋转拉伸，<code>R</code>为旋转切除；</p>
<p><code>T</code>为草图的快速尺寸；</p>
<p>草图中，右键能够选中封闭曲线；</p>
<h2 id="UG"><a href="#UG" class="headerlink" title="UG"></a>UG</h2><h3 id="UG常用命令快捷键"><a href="#UG常用命令快捷键" class="headerlink" title="UG常用命令快捷键"></a>UG常用命令快捷键</h3><ul>
<li><code>Ctrl+J</code> 编辑对象显示<ul>
<li>常用于修改对象的图层, 颜色, 透明度等;</li>
</ul>
</li>
<li><code>Ctrl+E</code> 表达式<ul>
<li>定义常量, 用于同个数据的多次标注或者函数表达式;</li>
</ul>
</li>
<li><code>Ctrl+B</code> 隐藏指定对象</li>
<li><code>Ctrl+Shift+B</code> 反隐藏指定对象</li>
<li><code>Ctrl+Shift+U</code> 显示全部对象</li>
<li><code>Ctrl+W</code> 显示与隐藏<ul>
<li>可以单独设置每个对象的隐藏和反隐藏;</li>
</ul>
</li>
<li><code>Ctrl+L</code> 图层设置<ul>
<li>用于查看和设置对象的图层数, 并控制可见与不可见;</li>
</ul>
</li>
<li><code>F8</code> 定向<ul>
<li>通过旋转到临近的面来正视于;</li>
</ul>
</li>
<li><code>Ctrl+F</code> 适合窗口<ul>
<li>当不小心将零件放大缩小到不合适的尺寸的时候, 可以将其适配窗口大小;</li>
</ul>
</li>
<li><code>F4</code> 重复上一步操作步骤</li>
<li><code>Ctrl+S</code> 保存</li>
<li><code>Ctrl+O</code> 打开</li>
<li><code>Ctrl+N</code> 新建</li>
</ul>
<h3 id="图层分类"><a href="#图层分类" class="headerlink" title="图层分类"></a>图层分类</h3><p>按照规定的图层进行分类, 易于零件进行修改和展示;</p>
<table>
<thead>
<tr>
<th align="center">最终实体</th>
<th align="center">1</th>
</tr>
</thead>
<tbody><tr>
<td align="center">实体</td>
<td align="center">11-20</td>
</tr>
<tr>
<td align="center">草图</td>
<td align="center">21-60</td>
</tr>
<tr>
<td align="center">固定基准</td>
<td align="center">61</td>
</tr>
<tr>
<td align="center">基准</td>
<td align="center">62-80</td>
</tr>
<tr>
<td align="center">曲线</td>
<td align="center">81-90</td>
</tr>
<tr>
<td align="center">片体</td>
<td align="center">91-110</td>
</tr>
</tbody></table>
<h3 id="快捷操作"><a href="#快捷操作" class="headerlink" title="快捷操作"></a>快捷操作</h3><p>在新建特征的时候, 窗口有<code>确定</code>和<code>应用</code>两个按钮, 可以通过鼠标中键快速应用和确定(点一次应用, 点两次确定, 确定后串口关闭);</p>
]]></content>
      <categories>
        <category>Mechanical Design</category>
      </categories>
  </entry>
  <entry>
    <title>IELTS Writing</title>
    <url>/2023/10/12/IEILTS-Writing/</url>
    <content><![CDATA[<h1 id="IELTs-Writing-Task-1"><a href="#IELTs-Writing-Task-1" class="headerlink" title="IELTs Writing Task 1"></a>IELTs Writing Task 1</h1><h2 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h2><h3 id="Car-ownership"><a href="#Car-ownership" class="headerlink" title="Car ownership"></a>Car ownership</h3><p><strong>The graph below gives information about car ownership in Britain from 1971 to 2007.</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/12/IEILTS-Writing/fig_1.png"
                      class="" width="400"
                >

<p>The graph shows changes in the number of cars per household in Great Britain over a period of 36 years.</p>
<p>Overall, car ownership in Britain increased between 1971 and 2007. In particular, the percentage of households with two cars rose, while the figure for households without a car fell.</p>
<p>In 1971, almost half of all British households did not have regular use of car. Around 44% of households had one car, but only about 7% had two cars. It was uncommon for families to own three or more cars, with around 2% of households falling into this category.</p>
<p>The one-car household was the most common type from the late 1970s onwards, although there was little change in the figures for the category. The biggest change was seen in the proportion of households without a car, which fell steadily over the 36-year period to around 25% in 2007. In contrast, the proportion of two-car families rose steadily, reaching about 26% in 2007, and the proportion of households with more than two cars rose by around 5%.</p>
<h3 id="Internet-users"><a href="#Internet-users" class="headerlink" title="Internet users"></a>Internet users</h3><p><strong>The graph below shows changes in the proportion of Internet users in three different countries from 1999 to 2009</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/12/IEILTS-Writing/fig_2.png"
                      class="" width="400"
                >

<p>The line graph compares the percentage of people in three countries who used the Internet between 1999 and 2009.</p>
<p>It is clear that the proporton of the population who used the Internet in each country over the period shown. Canada experienced the fastest growth in Internet usage, whereas Mexico remained the country with lowest proportion of people who accessed the Internet.</p>
<p>In 1999, the proportion of people using the Internet in the USA stood at about 20%. By contrast, the figures for Canada and Mexico were significantly lower, at around 10% and 5% respectively. However, in the year 2002, Canada overtook the USA in terms of the proportion of its citizens who went online.</p>
<p>In 2005, Internet usage in both the USA and Canada rose to around 70% of the population, while the figure for Mexico reached just over 25%. Four years later, in 2009, the percentage of Internet users was considerably higher in Candada than in the other two countries. In that year, almost 100% of Canadians used the Internet, compared to about 80% of Americans and only 40% of Mexicans.</p>
<h3 id="Migration"><a href="#Migration" class="headerlink" title="Migration"></a>Migration</h3><p><strong>The chart below shows figures for long-term international migration to and from the UK over a 10-year period.</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/12/IEILTS-Writing/fig_3.png"
                      class="" width="400"
                >

<p>The chart gives information about UK immigration, emigration and net migration between 1999 and 2008.</p>
<p>Both immigration and emigration rates rose over the period shown, but the figures for immigration were significantly higher. Net migration peaked in 2004 and 2007.</p>
<p>In 1999, over 450,000 people came to live in the UK, while the number of people who emigrated stood at just under 300,000. The figure for net migration was around 160,000, and it reamined at a similar level until 2003. From 1999 to 2004, the immigration rate rose by nearly 150,000 people, but there was a much smaller rise in emigration. Net migration peaked at almost 250,000 people in 2004.</p>
<p>After 2004, the rate of immigration remained high, but the number of people emigrating fluctuated. Emigration fell suddenly in 2007, before peaking at about 420,000 people in 2008. As a result, the net migration figure rose to around 240,000 in 2007, but fell back to around 160,000 in 2008.</p>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>IELTS阅读做题技巧</title>
    <url>/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<h2 id="雅思阅读概述"><a href="#雅思阅读概述" class="headerlink" title="雅思阅读概述"></a>雅思阅读概述</h2><p>流程：听力-阅读-写作<br>时间：60min三篇阅读，平均一篇阅读20min<br>模式：机考&#x2F;纸笔</p>
<p>目标分数：7.5</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_1.png"
                      class="" width="400"
                >
<p>错误率： 每篇文章错误在两个以内，三篇文章总共错题不超过六道；</p>
<h2 id="找到定位词"><a href="#找到定位词" class="headerlink" title="找到定位词"></a>找到定位词</h2><p>勾画出题干中的定位词，使用组合定位：</p>
<ul>
<li>眼球词词汇+n. (眼球词词汇指的是能够快速锁定，较为特殊的词汇，例如时间地点数字人名以及长难生词)</li>
<li>adj.+n. (从抽象到具体，抽象名词不需要画出来，只需要记具体名词)</li>
<li>n.+n. (总会有原词出现，因此最好把所有出现的名词都画下来)</li>
</ul>
<blockquote>
<p>名词不好进行同义替换，因此可以用于定位；</p>
</blockquote>
<h2 id="考点词同义替换"><a href="#考点词同义替换" class="headerlink" title="考点词同义替换"></a>考点词同义替换</h2><h3 id="1-词性替换"><a href="#1-词性替换" class="headerlink" title="1.词性替换"></a>1.词性替换</h3><ul>
<li>Egypt - Egyptian</li>
<li>fertilize - fertilizers</li>
</ul>
<h3 id="2-同义替换"><a href="#2-同义替换" class="headerlink" title="2.同义替换"></a>2.同义替换</h3><ul>
<li>tough - difficult</li>
<li>hard - tough</li>
<li>copy - follow - mimic - replicate - duplicate</li>
</ul>
<h3 id="3-肯否转换"><a href="#3-肯否转换" class="headerlink" title="3.肯否转换"></a>3.肯否转换</h3><ul>
<li>not traditional - new</li>
<li>worth exploring - shouldn’t exclude its possibility</li>
</ul>
<h3 id="4-抽象具体转换（子集-amp-具体化）"><a href="#4-抽象具体转换（子集-amp-具体化）" class="headerlink" title="4.抽象具体转换（子集&amp;具体化）"></a>4.抽象具体转换（子集&amp;具体化）</h3><ul>
<li>environment - light, sound and warmth</li>
<li>university - South China Normal University</li>
</ul>
<h3 id="5-解释说明（以名词为主）"><a href="#5-解释说明（以名词为主）" class="headerlink" title="5.解释说明（以名词为主）"></a>5.解释说明（以名词为主）</h3><ul>
<li>lack - do not exist</li>
</ul>
<h3 id="6-主被动"><a href="#6-主被动" class="headerlink" title="6.主被动"></a>6.主被动</h3><p>This room is for Mary - This room is occupied by Mary</p>
<h2 id="题型分解"><a href="#题型分解" class="headerlink" title="题型分解"></a>题型分解</h2><h3 id="小标题-List-of-Headings"><a href="#小标题-List-of-Headings" class="headerlink" title="小标题 List of Headings"></a>小标题 List of Headings</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_2.png"
                      class="" width="400"
                >

<p>对每个段落赋予方框中的一个小标题，对相应的内容进行概括；</p>
<p>可以利用其他题目来做，利用选择题的细节题来找对应；</p>
<p>做题的时候对每一个Headings进行拆解（即先阅读完所有的headings），然后再去扫读文章来确定答案</p>
<p>多注意动词和形容词的，题干中动词和形容词画出来，文章中动词和形容词画出来</p>
<p>每做完一个删除一个，一个词触发答案，所在句要检查；（检查对象，句意）</p>
<p>答案句通常出现在首局和尾句上</p>
<p>可以像老师一样去判断这个段落是否有离题</p>
<h3 id="人名匹配"><a href="#人名匹配" class="headerlink" title="人名匹配"></a>人名匹配</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_3.png"
                      class="" width="400"
                >

<p>把人名与观点或事迹进行对应；</p>
<p>三个位置：</p>
<ul>
<li>全称，完整的名字</li>
<li>指代 &#x2F; last name &#x2F; 身份</li>
<li>两个人一起说观点，观点属于第一作者</li>
</ul>
<p>studied&#x2F;researched&#x2F;experimented&#x2F;suggested&#x2F;chaimed&#x2F;concluded&#x2F;found&#x2F;speculated&#x2F;note+观点</p>
<p>做这种题顺序，先去扫读文章，如果一个段落中没有出现人名，则迅速跳过，如果出现人名，则看题目中有没有出现对应的人物，如果没有也是迅速跳过；</p>
<p>文章中，特定人物对应的内容一般再人物下方，也有可能往上走。</p>
<p>例如出现this，人名前有逻辑关系词(for example)，人名后方内容所剩无几</p>
<p>方向：</p>
<ul>
<li>往下</li>
<li>往上（this, for example, ‘’, 内容所剩无几）</li>
</ul>
<p>重点关注有引号的内容</p>
<h3 id="半句匹配"><a href="#半句匹配" class="headerlink" title="半句匹配"></a>半句匹配</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_4.png"
                      class="" width="400"
                >

<p>题干+选项&#x3D;文章中的一句话，两句话或者是半个段落的同替；</p>
<h3 id="信息包含"><a href="#信息包含" class="headerlink" title="信息包含"></a>信息包含</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_5.png"
                      class="" width="400"
                >

<blockquote>
<p>Which paragraph <strong>contains</strong> the following information?</p>
</blockquote>
<p>题干中的信息对应文章中的信息：原词&#x2F;同替</p>
<p>特点：</p>
<ul>
<li>不需要概括大意，只需要包含信息</li>
<li>可以有原词</li>
<li>本质是词与词的同义替换</li>
</ul>
<p>利用定位词的原理，以及考点词的同义替换，来找到对应的段落；同时借助其他题目来帮助定位；（人名，填空）</p>
<p>先通过题干中出现的抽象词，来判断出一个大致的筛选范围：</p>
<blockquote>
<p>the <strong>importance</strong> of finding the real cause under the dispute</p>
</blockquote>
<p>从题干回到文章之后，只需要扫读，找到对应的单词或者同义替换，不要去理解原文是什么意思。</p>
<p>对应出某一个词后，检查该词所在的句子其他对象是否复现，匹配</p>
<p>抽象词对应：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_10.png"
                      class="" width="400"
                >

<p>抽象词缩小范围，再由具体词锁定段落</p>
<p>可以通过将题干写几个中文的单词，然后再从文章对应</p>
<h3 id="判断题"><a href="#判断题" class="headerlink" title="判断题"></a>判断题</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_6.png"
                      class="" width="400"
                >

<p>三个选项：</p>
<ul>
<li>TRUE</li>
<li>FALSE</li>
<li>NOT GIVEN</li>
</ul>
<p>多了一个选项：if there is no information on this （题干：西瓜，原文：芒果）</p>
<p>三个基础概念：</p>
<ul>
<li>定位词</li>
<li>考点词</li>
<li>陷阱</li>
</ul>
<p>作为细节题，做法与填空题大致相同，通过题干中的定位词找到文章对应的答案句，再从两个句子中找到考点词的同义替换，或者理解句意来做题；</p>
<p>判断题的方法核心在于：<strong>理解句意</strong></p>
<p>五种陷阱：</p>
<ol>
<li>是非能够陷阱</li>
</ol>
<blockquote>
<p>Efficient cities <strong>can improve</strong> the quality of life for their inhabitants.</p>
</blockquote>
<p>can improve这里作为陷阱，句子其余部分可以作为定位词和考点词去寻找文章对应的内容。</p>
<p>文章：pointed out that these more efficient cities were able to put the difference into attracting industry and jobs or creating a better place to live.</p>
<p>显然是T</p>
<ol start="2">
<li>程度陷阱</li>
</ol>
<blockquote>
<p>The ISTP study examined public and private systems in <strong>every</strong> city of the world.</p>
</blockquote>
<p>most, only, all, -est, every, both, 数字 都可以作为程度陷阱</p>
<p>文章：The study compared the proportion of wealth poured into transport by thirty-seven cities around the world.</p>
<p>显然选择F</p>
<ol start="3">
<li>比较陷阱</li>
</ol>
<ul>
<li>不变：谁在比</li>
<li>变：比什么</li>
</ul>
<blockquote>
<p>Private schools in Japan are more modern and spacious than state-run lower secondary schools.</p>
</blockquote>
<p>文章：Schools are usually modern in design, set well back from the road and spacious inside.</p>
<p>显然是不存在比较关系，因此选NG</p>
<ol start="4">
<li>原因目的陷阱</li>
</ol>
<p>（逻辑推理，排除了所有的可能性，剩下的就是答案）</p>
<blockquote>
<p>The FAA was created as a result of the introduction of the jet engine.</p>
</blockquote>
<p>文章：An accident that occurred in the skies over the Grand Canyon in 1956 resulted in the establishment of the Federal Aviation Administration to regulate and oversee the operation of aircraft in the skies over the United States, which were becoming quite congested.</p>
<p>因此选择NG</p>
<ol start="5">
<li>动词后方陷阱</li>
</ol>
<blockquote>
<p>The essay, ‘In the company of ants’, explores ant communication.</p>
</blockquote>
<p>文章：in his essay ‘In the company of ants’, advises readers who ask what to do with the ants in their kitchen to: “Watch where you step. Be carful of little lives.’</p>
<p>根据排他性原则，这题选择NG</p>
<p>Not Given中容易考到的点</p>
<ol>
<li>权威效应<blockquote>
<p>I believe Chinese football team is much better that Brazilian one.</p>
</blockquote>
</li>
</ol>
<p>文章：Chinese football team is much better than Brazilian one.</p>
<p>选择NG，事实和人们认为的往往有出入；</p>
<ol start="2">
<li><p>主客观转换<br>原文出现发誓，承诺，愿望，决心等主观限定词，而题目去掉其限定词变成客观事实陈述，则选Not Given<br>常见有：Promise, Vow, Swear, Aim, Pledge, Resolve, Guarantee</p>
</li>
<li><p>偷换概念，范围大小变化</p>
</li>
</ol>
<ul>
<li>打印机是1885年发明的</li>
<li>激光打印机是1885年发明的</li>
</ul>
<p>一般只要题干和内容讨论的东西不在一个具体的层次，就是NG，为了减少看漏，可以两题为一组去做</p>
<p>关键是看一个行为是否具有排他性</p>
<h3 id="填空题-有选项-x2F-无选项"><a href="#填空题-有选项-x2F-无选项" class="headerlink" title="填空题 有选项&#x2F;无选项"></a>填空题 有选项&#x2F;无选项</h3><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_7.png"
                      class="" width="400"
                >

<p>特征：</p>
<ul>
<li>顺序出题，个别乱序（往前找）</li>
<li>局部范围，细节出题，一般是1~3个段落</li>
<li>必有逻辑，有明现逻辑关系词，空的前后逻辑，看空的前后位置</li>
</ul>
<p><strong>方法</strong>：</p>
<p>填空题方法的核心在于：<strong>特征关系</strong></p>
<p>现在一篇文章中锁定一个段落，然后再到一句话，最后一个词；</p>
<p><strong>定位段落</strong>：<br>在题干中画出定位词之后，回到文章先找<strong>眼球词词汇</strong>，然后再到名词或者形容词+名词；最后是由名词来确定固定的段落；</p>
<p>如果没有眼球词词汇，可以利用邻近题来帮助定位；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_8.png"
                      class="" width="400"
                >

<p>此题的定位词为： complex, Step Pyramid, surroundings, Egyptian, past</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/01/03/IELTS%E9%98%85%E8%AF%BB%E5%81%9A%E9%A2%98%E6%8A%80%E5%B7%A7/fig_9.png"
                      class="" width="400"
                >

<p>此题的定位词为： 18th century, engineer, first iron bridge</p>
<p><strong>定位句子</strong><br>利用定位词中考点词的同义替换来找到对应的句子；</p>
<p><strong>定位单词</strong></p>
<ul>
<li>逻辑关系词 (but, however, more, in addition…)</li>
</ul>
<p>在空的前后找到逻辑关系词的同义替换，定位到具体的单词；</p>
<ul>
<li>空前后关系<ol>
<li>确定词数</li>
<li>确定词性</li>
<li>确定特征（通过题干的前后找到修饰这个单词的内容）</li>
</ol>
</li>
</ul>
<h3 id="单选题"><a href="#单选题" class="headerlink" title="单选题"></a>单选题</h3><blockquote>
<p>雅思阅读的所有题目，每个问题都有对应的答案句，雅思阅读的题目没有推理，只有对应的答案句，因此每个题目都要找到对应的<strong>答案句</strong>。</p>
</blockquote>
<p>特征：</p>
<ul>
<li>顺序出题，题题之间顺序出题，选项也是顺序出题</li>
<li>出题频率为60%</li>
<li>单题不会跨段出题，找到A选项后，BCD都会在该段落以内，或者没有提到；</li>
</ul>
<p>&#x3D;&#x3D;务必找到答案句！&#x3D;&#x3D;</p>
<p>不需要提前阅读选项，提前阅读容易被误导；</p>
<p>做法：勾画题干的定位词和考点词，然后定位到答案句进行选项比对；（和填空题差不多）</p>
<p>就算选项在文章有对应的地方，即选项是正确的，但是如何选项没有回答题干的问题，则视为错误；</p>
<p>如果题干需要概述<strong>一个段落</strong>，以句为单位找段落中有逻辑关系词的句子；(And不算)</p>
<p>像选项<code>it would be wrong to overlook the contribution of sound to the artistry of films</code>这种用了<code>wrong</code>或者<code>mistaken</code>的委婉语气，一般都是正确的；</p>
<h3 id="多选题"><a href="#多选题" class="headerlink" title="多选题"></a>多选题</h3><ol>
<li>阅读5个题干</li>
<li>勾画定位词</li>
</ol>
<p>通过多选的选项和文章内容进行反复比较，一旦出现足够数目的正确答案就结束；</p>
<p>每次只阅读一个段落</p>
<p>优先选择柔和语气</p>
<h2 id="完整套题做法"><a href="#完整套题做法" class="headerlink" title="完整套题做法"></a>完整套题做法</h2><p>先做细节题，再做全文题</p>
<p>细节题的反应过程中，也可以得到全文题的答案</p>
<p>套题分类：</p>
<ul>
<li>2全文题，1细节题</li>
<li>2细节题，1全文题</li>
<li>全细节题</li>
</ul>
<p>全文题：contain，people，heading</p>
<p>2细节题和全细节题，<strong>需要按题型来做</strong>，即先做细节题，如果发现该段落的细节题已经考察完了，下一个细节题更换段落了，则需要完成该段落的全文题。</p>
<p>当全文题比较多的时候，即2全文题，1细节题时，<strong>应该按照段落去做</strong>，完成一个段落的所有题目，再去完成下一个段落。</p>
<p>先处理好，全文题的选项，定出细节题第一题的位置，不做题，如果一个段落有细节也有全文，先做细节题，可以通过细节题推导全文题</p>
<p>一般只会出现contain+people或者heading+people</p>
<p>判断完细节题开始的段落之后，前面没有细节题的段落可以扫读看有没有人名和contain的代号信息；</p>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>IELTS Speaking</title>
    <url>/2023/10/17/IELTS-Speaking/</url>
    <content><![CDATA[<h2 id="Oral-expression-accumulation"><a href="#Oral-expression-accumulation" class="headerlink" title="Oral expression accumulation"></a>Oral expression accumulation</h2>
  <div class="note p-4 mb-4 rounded-small blue">
    <p>Your <strong>vision</strong> was right.</p>

  </div>

<blockquote>
<p>A vision refers to a mental image or a dream, commonly used in the real world to refer to a person’s ability to think about the future with imagination or intelligence.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>Tai Lung has <strong>broken out</strong> of prison.<br>Do you feel stuck? Try to <strong>break out</strong> of your daily routine.<br>You <strong>broke out</strong> of your normal roles to accomplish something as a family.</p>

  </div>

<blockquote>
<p>It means to escapte from a place, aslo can be used figuratively, meaning to escape a situation.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>He wasn’t even meant to <strong>be</strong> here.</p>

  </div>

<blockquote>
<p>Contrastive stress. It means something wasn’t planned or supposed to happen.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>All good things come to an end.</p>

  </div>

<blockquote>
<p>When going through changes or losses in life, one can refer to this saying. It works as a reminder to appreciate the good moments because they will not always be there.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    <p>I don’t like to use this phrase because it’s offensive to <strong>our kind</strong>.</p>

  </div>

<blockquote>
<p>One’s kind refers to people with whom we have things in common or who share a similar background to ours.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>And if I go back, Max, it’s <strong>the end of the line</strong> for me.</p>

  </div>

<blockquote>
<p>Something is the end of the line, it means that it has ended or that it won’t be possible to continue it and it’s better to give it up.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    <p>Friends, <strong>I am afraid</strong> that I have some terrible news.<br><strong>I’m afraid</strong> I can’t help you. It’s gone, you know.<br>Well, <strong>I’m afraid</strong> Fiona isn’t really warming up to Prince Charming.</p>

  </div>

<blockquote>
<p>It can be used when I have to introduce some sad or bad news. Also can be used as a synonym for I’m sorry.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p>He’s not going to eat us, we’ve already <strong>been over</strong> it.<br>But first, let’s <strong>go over</strong> the rules.</p>

  </div>

<blockquote>
<p>Going over something is the same as reviewing, examining, or checking something carefully.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    <p>We gotta save him. &#x3D; We have got to save him.<br>You gotta be kidding me. &#x3D; You got to be kidding me.</p>

  </div>

<blockquote>
<p>“we have got to” becomes “we gotta”</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>Same way I <strong>found out</strong> your name.<br>And I intent to <strong>find out</strong> which.</p>

  </div>

<blockquote>
<p>To find out means to discover or to become aware and learn about sth.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>So your mistake will be <strong>short-lived</strong>.<br>His experience as a professional lawyer was short-lived. </p>

  </div>

<blockquote>
<p>If sth is short-lived, it only lasts for a short period of time.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>I’m all ears.</p>

  </div>

<blockquote>
<p>I’m all ears &#x3D; I’m listening carefully.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    
  </div>

<blockquote>
</blockquote>
<h2 id="Speaking-practice-by-gpt-4"><a href="#Speaking-practice-by-gpt-4" class="headerlink" title="Speaking practice by gpt-4"></a>Speaking practice by gpt-4</h2><blockquote>
<p>Chatgpt prompts: I want you to act as an IELTS speaking examiner. I will show you the question. Then I give a ambiguous answer which refers to my real situation. You should correct it and tell me how to express to the IELTS examiner more colloquially not complicatedly.</p>
</blockquote>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>Isaac Sim (Container)学习</title>
    <url>/2024/08/29/Issac-Sim-Container-%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<blockquote>
<p>与下载到本地Linux的Isaac Sim不同, 由于采用服务器的方式, 整个Isaac Sim都需要在Docker中运行, 所有的应用都要采取Headless mode.</p>
</blockquote>
<h2 id="Isaac-Sim-安装"><a href="#Isaac-Sim-安装" class="headerlink" title="Isaac Sim 安装"></a>Isaac Sim 安装</h2><p><a class="link"   href="https://docs.omniverse.nvidia.com/isaacsim/latest/installation/install_container.html" >Container Installation<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="Isaac-Sim-启动"><a href="#Isaac-Sim-启动" class="headerlink" title="Isaac Sim 启动"></a>Isaac Sim 启动</h2><p>创建docker容器</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --name isaac-sim --entrypoint bash -it --runtime=nvidia --gpus all -e <span class="string">&quot;ACCEPT_EULA=Y&quot;</span> --network=host \</span><br><span class="line">    -e <span class="string">&quot;PRIVACY_CONSENT=Y&quot;</span> \</span><br><span class="line">    -v ~/docker/isaac-sim/cache/kit:/isaac-sim/kit/cache:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/cache/ov:/root/.cache/ov:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/cache/pip:/root/.cache/pip:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/cache/glcache:/root/.cache/nvidia/GLCache:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/cache/computecache:/root/.nv/ComputeCache:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/logs:/root/.nvidia-omniverse/logs:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/data:/root/.local/share/ov/data:rw \</span><br><span class="line">    -v ~/docker/isaac-sim/documents:/root/Documents:rw \</span><br><span class="line">    nvcr.io/nvidia/isaac-sim:4.1.0</span><br></pre></td></tr></table></figure></div>

<p>加载GUI</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">./runheadless.native.sh -v</span><br></pre></td></tr></table></figure></div>

<p>同时启用多个doker容器的终端</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it isaac-sim bash</span><br></pre></td></tr></table></figure></div>

<p>之后的docker启动只能从服务器主机进行, 不能直接ssh进到container中启动Isaac Sim</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -p 22 amdt@10.30.47.11 <span class="comment">#Password: AMDT123456</span></span><br><span class="line">docker start isaac-sim</span><br><span class="line">docker <span class="built_in">exec</span> -it isaac-sim bash</span><br></pre></td></tr></table></figure></div>

<h3 id="Vscode连接source-code"><a href="#Vscode连接source-code" class="headerlink" title="Vscode连接source code"></a>Vscode连接source code</h3><p>由于服务器是通过vscode中的remote ssh连接, 然后isaac-sim在docker中运行.</p>
<p>在docker中配置ssh, 然后用vscode的remote-ssh连接</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装ssh</span></span><br><span class="line">apt update</span><br><span class="line">apt install openssh-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改配置文件</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">Port 6789</span><br><span class="line">PermitRootLogin <span class="built_in">yes</span></span><br></pre></td></tr></table></figure></div>

<p>然后重启和检查ssh服务</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">service ssh restart</span><br><span class="line">service ssh status</span><br></pre></td></tr></table></figure></div>

<p>设置登录密码</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">passwd <span class="comment">#设置为amdt</span></span><br></pre></td></tr></table></figure></div>

<p>在windows终端, 如果之前生成过ssh key, 需要删除</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -R [10.30.47.11]:6789</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -p 6789 root@10.30.47.11 <span class="comment">#Password: amdt</span></span><br></pre></td></tr></table></figure></div>

<h2 id="基本操作逻辑"><a href="#基本操作逻辑" class="headerlink" title="基本操作逻辑"></a>基本操作逻辑</h2><ul>
<li>Alt+左键旋转视角</li>
<li>鼠标滚轮放大缩小</li>
<li>鼠标滚轮按着平移</li>
<li>右边操作树选中物体后，按F聚焦物体</li>
</ul>
<h2 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h2><blockquote>
<p>Usage: Building interactive GUIs, custom application modules, and real-time sensitive applications.</p>
</blockquote>
<h2 id="Standalone-Application"><a href="#Standalone-Application" class="headerlink" title="Standalone Application"></a>Standalone Application</h2><blockquote>
<p>Usage: Large scale traning for reinforcement learning, systematic world generation, and modification.</p>
</blockquote>
<p>对于container中的Isaac Sim:</p>
<blockquote>
<p>The Isaac Sim container supports running our Python apps and standalone examples in headless mode only.</p>
</blockquote>
<p>要执行standalone application, 首先需要确定standalone python script和python.sh (通常在根目录下) 的路径.</p>
<p>例如要运行<code>follow_target_with_rmpflow.py</code>, 该路径为<code>standalone_examples/api/omni.isaac.franka/follow_target_with_rmpflow.py</code>;</p>
<h3 id="配置Python-Environment"><a href="#配置Python-Environment" class="headerlink" title="配置Python Environment"></a>配置Python Environment</h3><p>进入isaac-sim的根目录</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">cd</span> isaac-sim</span><br></pre></td></tr></table></figure></div>

<p>打开根目录下的apps&#x2F;omni.isaac.sim.python.kit文件, 添加以下内容</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">...</span><br><span class="line"><span class="comment"># Streaming client</span></span><br><span class="line"><span class="string">&quot;omni.kit.streamsdk.plugins-3.2.1&quot;</span> = &#123;&#125;</span><br><span class="line"><span class="string">&quot;omni.kit.livestream.core-3.2.0&quot;</span> = &#123;&#125;</span><br><span class="line"><span class="string">&quot;omni.kit.livestream.native&quot;</span> = &#123;&#125;</span><br></pre></td></tr></table></figure></div>

<p>对于Python的脚本, 需要进行一个修改:</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line">simulation_app = SimulationApp(&#123;<span class="string">&quot;headless&quot;</span>: <span class="literal">True</span>&#125;) <span class="comment"># False 改为 True</span></span><br></pre></td></tr></table></figure></div>

<p>启动~</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">./python.sh standalone_examples/api/omni.isaac.franka/follow_target_with_rmpflow.py</span><br></pre></td></tr></table></figure></div>

<h3 id="franka机械臂仿真程序"><a href="#franka机械臂仿真程序" class="headerlink" title="franka机械臂仿真程序"></a>franka机械臂仿真程序</h3><p>以<code>follow_target_with_rmpflow.py</code>和<code>franka_gripper.py</code>为例机型讲解</p>
<h4 id="follow-target-with-rmpflow-py"><a href="#follow-target-with-rmpflow-py" class="headerlink" title="follow_target_with_rmpflow.py"></a><code>follow_target_with_rmpflow.py</code></h4><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础设置</span></span><br><span class="line"><span class="keyword">from</span> isaacsim <span class="keyword">import</span> SimulationApp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Container运行要改为True</span></span><br><span class="line">simulation_app = SimulationApp(&#123;<span class="string">&quot;headless&quot;</span>: <span class="literal">True</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment"># World是Isaac Sim中的核心场景管理类</span></span><br><span class="line"><span class="keyword">from</span> omni.isaac.core <span class="keyword">import</span> World</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特定任务下的Controller和Tasks</span></span><br><span class="line"><span class="keyword">from</span> omni.isaac.franka.controllers.rmpflow_controller <span class="keyword">import</span> RMPFlowController</span><br><span class="line"><span class="keyword">from</span> omni.isaac.franka.tasks <span class="keyword">import</span> FollowTarget</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建World和Task实例</span></span><br><span class="line">my_world = World(stage_units_in_meters=<span class="number">1.0</span>)</span><br><span class="line">my_task = FollowTarget(name=<span class="string">&quot;follow_target_task&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将Task添加到World中, 并初始化状态</span></span><br><span class="line">my_world.add_task(my_task)</span><br><span class="line">my_world.reset()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取Task的参数, 提取了机器人和目标的名字</span></span><br><span class="line">task_params = my_world.get_task(<span class="string">&quot;follow_target_task&quot;</span>).get_params()</span><br><span class="line">franka_name = task_params[<span class="string">&quot;robot_name&quot;</span>][<span class="string">&quot;value&quot;</span>]</span><br><span class="line">target_name = task_params[<span class="string">&quot;target_name&quot;</span>][<span class="string">&quot;value&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用get_object()从场景中获取franka机械臂对象</span></span><br><span class="line">my_franka = my_world.scene.get_object(franka_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建控制器实例, 并且将franka机械臂输入</span></span><br><span class="line">my_controller = RMPFlowController(name=<span class="string">&quot;target_follower_controller&quot;</span>, robot_articulation=my_franka)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用get_articulation_controller()获取机械臂的关节控制器, 用于控制动作</span></span><br><span class="line">articulation_controller = my_franka.get_articulation_controller()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表示是否需要重置, 初始化为False, 确保启动的时候不会重置</span></span><br><span class="line">reset_needed = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 控制循环</span></span><br><span class="line"><span class="keyword">while</span> simulation_app.is_running():</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 仿真世界中前进一帧</span></span><br><span class="line">    my_world.step(render=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检测仿真是否已停止, 并且准备在下一次播放重置</span></span><br><span class="line">    <span class="keyword">if</span> my_world.is_stopped() <span class="keyword">and</span> <span class="keyword">not</span> reset_needed:</span><br><span class="line">        reset_needed = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 仿真正在运行, 代码进入控制逻辑</span></span><br><span class="line">    <span class="keyword">if</span> my_world.is_playing():</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 如果需要重置, 重置仿真世界和控制器</span></span><br><span class="line">        <span class="keyword">if</span> reset_needed:</span><br><span class="line">            my_world.reset()</span><br><span class="line">            my_controller.reset()</span><br><span class="line">            reset_needed = <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 获取机械臂和目标物体当前6D位姿</span></span><br><span class="line">        observations = my_world.get_observations()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># forward()方法即为控制器中用到的一种传统的路径规划方法</span></span><br><span class="line">        <span class="comment"># 调用控制器的forward()方法, 传入目标末端执行器(方块)的6D位姿, 并输出一个关节动作列表</span></span><br><span class="line">        actions = my_controller.forward(</span><br><span class="line">            target_end_effector_position=observations[target_name][<span class="string">&quot;position&quot;</span>],</span><br><span class="line">            target_end_effector_orientation=observations[target_name][<span class="string">&quot;orientation&quot;</span>],</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 利用apply_action()将forward()方法输出的关节动作列表应用到机械臂的关节上</span></span><br><span class="line">        articulation_controller.apply_action(actions)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭仿真并且清理资源</span></span><br><span class="line">simulation_app.close()</span><br></pre></td></tr></table></figure></div>


<p>其中用到的库文件:<br>&#x2F;isaac-sim&#x2F;exts&#x2F;omni.isaac.franka&#x2F;omni&#x2F;isaac&#x2F;franka&#x2F;controllers&#x2F;rmpflow_controller.py</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> omni.isaac.motion_generation <span class="keyword">as</span> mg</span><br><span class="line"><span class="keyword">from</span> omni.isaac.core.articulations <span class="keyword">import</span> Articulation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RMPFlowController</span>(mg.MotionPolicyController):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;[summary]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        name (str): [description]</span></span><br><span class="line"><span class="string">        robot_articulation (Articulation): [description]</span></span><br><span class="line"><span class="string">        physics_dt (float, optional): [description]. Defaults to 1.0/60.0.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name: <span class="built_in">str</span>, robot_articulation: Articulation, physics_dt: <span class="built_in">float</span> = <span class="number">1.0</span> / <span class="number">60.0</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.rmp_flow_config = mg.interface_config_loader.load_supported_motion_policy_config(<span class="string">&quot;Franka&quot;</span>, <span class="string">&quot;RMPflow&quot;</span>)</span><br><span class="line">        self.rmp_flow = mg.lula.motion_policies.RmpFlow(**self.rmp_flow_config)</span><br><span class="line"></span><br><span class="line">        self.articulation_rmp = mg.ArticulationMotionPolicy(robot_articulation, self.rmp_flow, physics_dt)</span><br><span class="line"></span><br><span class="line">        mg.MotionPolicyController.__init__(self, name=name, articulation_motion_policy=self.articulation_rmp)</span><br><span class="line">        (</span><br><span class="line">            self._default_position,</span><br><span class="line">            self._default_orientation,</span><br><span class="line">        ) = self._articulation_motion_policy._robot_articulation.get_world_pose()</span><br><span class="line">        self._motion_policy.set_robot_base_pose(</span><br><span class="line">            robot_position=self._default_position, robot_orientation=self._default_orientation</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        mg.MotionPolicyController.reset(self)</span><br><span class="line">        self._motion_policy.set_robot_base_pose(</span><br><span class="line">            robot_position=self._default_position, robot_orientation=self._default_orientation</span><br><span class="line">        )</span><br></pre></td></tr></table></figure></div>

<p>&#x2F;isaac-sim&#x2F;exts&#x2F;omni.isaac.franka&#x2F;omni&#x2F;isaac&#x2F;franka&#x2F;tasks&#x2F;follow_target.py</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> omni.isaac.core.tasks <span class="keyword">as</span> tasks</span><br><span class="line"><span class="keyword">from</span> omni.isaac.core.utils.prims <span class="keyword">import</span> is_prim_path_valid</span><br><span class="line"><span class="keyword">from</span> omni.isaac.core.utils.string <span class="keyword">import</span> find_unique_string_name</span><br><span class="line"><span class="keyword">from</span> omni.isaac.franka <span class="keyword">import</span> Franka</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FollowTarget</span>(tasks.FollowTarget):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;[summary]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        name (str, optional): [description]. Defaults to &quot;franka_follow_target&quot;.</span></span><br><span class="line"><span class="string">        target_prim_path (Optional[str], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        target_name (Optional[str], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        target_position (Optional[np.ndarray], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        target_orientation (Optional[np.ndarray], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        offset (Optional[np.ndarray], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        franka_prim_path (Optional[str], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">        franka_robot_name (Optional[str], optional): [description]. Defaults to None.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        name: <span class="built_in">str</span> = <span class="string">&quot;franka_follow_target&quot;</span>,</span></span><br><span class="line"><span class="params">        target_prim_path: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        target_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        target_position: <span class="type">Optional</span>[np.ndarray] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        target_orientation: <span class="type">Optional</span>[np.ndarray] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        offset: <span class="type">Optional</span>[np.ndarray] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        franka_prim_path: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        franka_robot_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        tasks.FollowTarget.__init__(</span><br><span class="line">            self,</span><br><span class="line">            name=name,</span><br><span class="line">            target_prim_path=target_prim_path,</span><br><span class="line">            target_name=target_name,</span><br><span class="line">            target_position=target_position,</span><br><span class="line">            target_orientation=target_orientation,</span><br><span class="line">            offset=offset,</span><br><span class="line">        )</span><br><span class="line">        self._franka_prim_path = franka_prim_path</span><br><span class="line">        self._franka_robot_name = franka_robot_name</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_robot</span>(<span class="params">self</span>) -&gt; Franka:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;[summary]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            Franka: [description]</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self._franka_prim_path <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self._franka_prim_path = find_unique_string_name(</span><br><span class="line">                initial_name=<span class="string">&quot;/World/Franka&quot;</span>, is_unique_fn=<span class="keyword">lambda</span> x: <span class="keyword">not</span> is_prim_path_valid(x)</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">if</span> self._franka_robot_name <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self._franka_robot_name = find_unique_string_name(</span><br><span class="line">                initial_name=<span class="string">&quot;my_franka&quot;</span>, is_unique_fn=<span class="keyword">lambda</span> x: <span class="keyword">not</span> self.scene.object_exists(x)</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> Franka(prim_path=self._franka_prim_path, name=self._franka_robot_name)</span><br></pre></td></tr></table></figure></div>

<h4 id="franka-gripper-py"><a href="#franka-gripper-py" class="headerlink" title="franka_gripper.py"></a><code>franka_gripper.py</code></h4><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> isaacsim <span class="keyword">import</span> SimulationApp</span><br><span class="line"></span><br><span class="line">simulation_app = SimulationApp(&#123;<span class="string">&quot;headless&quot;</span>: <span class="literal">False</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> omni.isaac.core <span class="keyword">import</span> World</span><br><span class="line"><span class="keyword">from</span> omni.isaac.core.utils.types <span class="keyword">import</span> ArticulationAction</span><br><span class="line"><span class="keyword">from</span> omni.isaac.franka <span class="keyword">import</span> Franka</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;--test&quot;</span>, default=<span class="literal">False</span>, action=<span class="string">&quot;store_true&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Run in test mode&quot;</span>)</span><br><span class="line">args, unknown = parser.parse_known_args()</span><br><span class="line"></span><br><span class="line">my_world = World(stage_units_in_meters=<span class="number">1.0</span>)</span><br><span class="line">my_franka = my_world.scene.add(Franka(prim_path=<span class="string">&quot;/World/Franka&quot;</span>, name=<span class="string">&quot;my_franka&quot;</span>))</span><br><span class="line">my_world.scene.add_default_ground_plane()</span><br><span class="line">my_world.reset()</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">reset_needed = <span class="literal">False</span></span><br><span class="line"><span class="keyword">while</span> simulation_app.is_running():</span><br><span class="line">    my_world.step(render=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> my_world.is_stopped() <span class="keyword">and</span> <span class="keyword">not</span> reset_needed:</span><br><span class="line">        reset_needed = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> my_world.is_playing():</span><br><span class="line">        <span class="keyword">if</span> reset_needed:</span><br><span class="line">            my_world.reset()</span><br><span class="line">            reset_needed = <span class="literal">False</span></span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        gripper_positions = my_franka.gripper.get_joint_positions()</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="number">500</span>:</span><br><span class="line">            my_franka.gripper.apply_action(</span><br><span class="line">                ArticulationAction(joint_positions=[gripper_positions[<span class="number">0</span>] - (<span class="number">0.005</span>), gripper_positions[<span class="number">1</span>] - (<span class="number">0.005</span>)])</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">500</span>:</span><br><span class="line">            my_franka.gripper.apply_action(</span><br><span class="line">                ArticulationAction(joint_positions=[gripper_positions[<span class="number">0</span>] + (<span class="number">0.005</span>), gripper_positions[<span class="number">1</span>] + (<span class="number">0.005</span>)])</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">1000</span>:</span><br><span class="line">            i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> args.test <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">simulation_app.close()</span><br></pre></td></tr></table></figure></div>


<h2 id="Isaac-Lab"><a href="#Isaac-Lab" class="headerlink" title="Isaac Lab"></a>Isaac Lab</h2><blockquote>
<p>Isaac Lab is the official robot learning framework for Isaac Sim, providing APIs and examples for reinforcement learning, imitation learning, and more.</p>
</blockquote>
<blockquote>
<p>Isaac Gym is a deprecated framework. All reinforcement learning and imitation learning examples have been migrated to Isaac Lab.</p>
</blockquote>
<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><ul>
<li>一直警告: 2024-09-18 09:42:53 [17,934ms] [Warning] [omni.graph.core.plugin] OmniGraphSettings::getCudaDeviceOrdinal: unable to get a valid CUDA device id from the renderer. Defaulting to GPU0.</li>
</ul>
<p>之前启用的python脚本占用了CUDA的ID, 但是没有释放, 重新启动docker即可.</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">docker stop isaac-sim</span><br><span class="line">docker start isaac-sim</span><br></pre></td></tr></table></figure></div>


<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a class="link"   href="https://zhaoxuhui.top/blog/2023/02/19/omniverse-and-isaac-sim-note9-standalone-workflow-and-imu-frequency-setting.html" >NVIDIA Omniverse和Isaac Sim笔记9：Standalone工作流介绍与IMU帧率设置<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
  </entry>
  <entry>
    <title>Iterative Optimal Control for Robotics System</title>
    <url>/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/</url>
    <content><![CDATA[<blockquote>
<p>系统性的学习Iterative Optimal Control.</p>
</blockquote>
<h2 id="最优控制理论基础"><a href="#最优控制理论基础" class="headerlink" title="最优控制理论基础"></a>最优控制理论基础</h2><blockquote>
<p>最优控制理论最早是在航空航天领域发展的, 用于设计发射和航行轨迹; 核心问题是寻找一种控制策略，使系统在满足某些约束的条件下，能够优化某个目标（例如时间、能量、成本等）。<br>控制系统的模型和目标函数都是非线性的, 这导致最优控制理论优化问题变成非凸问题;</p>
</blockquote>
<h2 id="Model-Predictive-Control-MPC"><a href="#Model-Predictive-Control-MPC" class="headerlink" title="Model Predictive Control (MPC)"></a>Model Predictive Control (MPC)</h2><p>MPC的核心思想是利用<strong>系统的数学模型来预测未来的行为</strong>，并在每个控制周期上求解一个优化问题，来确定最佳的控制输入。关键优势之一是能够处理多变量系统, 并且可以显示地考虑约束条件. 它能在动态和复杂的环境下, 提供稳健的控制解决方案.</p>
<p>MPC是一个线性或非线性动态方程, 用来描述系统在未来时刻的行为. 常见的形式是线性离散时间模型:</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="51.003ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 22543.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(394,0)"></path><path data-c="62" d="M307 -11Q234 -11 168 55L158 37Q156 34 153 28T147 17T143 10L138 1L118 0H98V298Q98 599 97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V543Q179 391 180 391L183 394Q186 397 192 401T207 411T228 421T254 431T286 439T323 442Q401 442 461 379T522 216Q522 115 458 52T307 -11ZM182 98Q182 97 187 90T196 79T206 67T218 55T233 44T250 35T271 29T295 26Q330 26 363 46T412 113Q424 148 424 212Q424 287 412 323Q385 405 300 405Q270 405 239 390T188 347L182 339V98Z" transform="translate(950,0)"></path><path data-c="6A" d="M98 609Q98 637 116 653T160 669Q183 667 200 652T217 609Q217 579 200 564T158 549Q133 549 116 564T98 609ZM28 -163Q58 -168 64 -168Q124 -168 135 -77Q137 -65 137 141T136 353Q132 371 120 377T72 385H52V408Q52 431 54 431L58 432Q62 432 70 432T87 433T108 434T133 436Q151 437 171 438T202 441T214 442H218V184Q217 -36 217 -59T211 -98Q195 -145 153 -175T58 -205Q9 -205 -23 -179T-55 -117Q-55 -94 -40 -79T-2 -64T36 -79T52 -118Q52 -143 28 -163Z" transform="translate(1506,0)"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(1812,0)"></path><path data-c="63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z" transform="translate(2256,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(2700,0)"></path><path data-c="20" d="" transform="translate(3089,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(3339,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(3728,0)"></path><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(4228,0)"></path></g><g data-mml-node="mstyle" transform="translate(4506,0)"><g data-mml-node="mspace"></g></g><g data-mml-node="mi" transform="translate(5506,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(6078,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6467,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(7210.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(8210.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(8710.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(9377.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(10433,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(11183,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(11755,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(12144,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(12665,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(13276.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(14276.4,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mi" transform="translate(15035.4,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(15607.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(15996.4,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(16517.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(16906.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mstyle" transform="translate(17184.4,0)"><g data-mml-node="mspace"></g></g><g data-mml-node="mi" transform="translate(18351.1,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(18923.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(19312.1,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(19812.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(20478.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(21534.7,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g></svg></mjx-container></p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.864ex;" xmlns="http://www.w3.org/2000/svg" width="43.69ex" height="6.784ex" role="img" focusable="false" viewBox="0 -1733 19310.9 2998.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munder"><g data-mml-node="mo"><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(833,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(1111,0)"></path></g><g data-mml-node="TeXAtom" transform="translate(228.6,-697.3) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(961,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(1322,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="munderover" transform="translate(1833.7,0)"><g data-mml-node="mo" transform="translate(43.8,0)"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(129.8,-1107.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1299,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(0,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1666,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g><g data-mml-node="mrow" transform="translate(3531.9,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="28" d="M152 251Q152 646 388 850H416Q422 844 422 841Q422 837 403 816T357 753T302 649T255 482T236 250Q236 124 255 19T301 -147T356 -251T403 -315T422 -340Q422 -343 416 -349H388Q359 -325 332 -296T271 -213T212 -97T170 56T152 251Z"></path></g><g data-mml-node="mi" transform="translate(458,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(1030,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1419,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(2162.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(3162.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="msup" transform="translate(3662.4,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(422,413) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mi" transform="translate(4632.2,0)"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mi" transform="translate(5423.2,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(5995.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6384.2,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(7127.5,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(8127.7,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(8627.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(9238.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(10239.1,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(10811.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(11200.1,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="msup" transform="translate(11721.1,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(422,413) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mi" transform="translate(12690.9,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mi" transform="translate(13449.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(14021.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(14410.9,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(14931.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(15320.9,0) translate(0 -0.5)"><path data-c="29" d="M305 251Q305 -145 69 -349H56Q43 -349 39 -347T35 -338Q37 -333 60 -307T108 -239T160 -136T204 27T221 250T204 473T160 636T108 740T60 807T35 839Q35 850 50 850H56H69Q197 743 256 566Q305 425 305 251Z"></path></g></g></g></g></svg></mjx-container></p>
<h2 id="Reinforcement-Learning-RL"><a href="#Reinforcement-Learning-RL" class="headerlink" title="Reinforcement Learning (RL)"></a>Reinforcement Learning (RL)</h2><p>机器学习广义上的分类:</p>
<ul>
<li>Supervised Learning (监督学习)</li>
<li>Unsupervised Learning (无监督学习)</li>
<li>Reinforcement Learning (强化学习)</li>
</ul>
<p>RL很重要的一个特性就是与环境进行实时的交互. 与其他两种机器学习不同, 其目标不是对数据进行分类或标记, 而是找到能够产生最优结果的最佳动作序列.<br>(RL work with dynamic enviroments.)</p>
<p>两个策略需要很好的平衡</p>
<ul>
<li>Exploration<ul>
<li>Explore new areas in the environment.</li>
</ul>
</li>
<li>Exploitation<ul>
<li>Collect the most reward you already know.</li>
</ul>
</li>
</ul>
<p>使用RL的方法设计一个控制器:</p>
<ul>
<li>We have to set up the controller structure. (Policy)</li>
<li>We have to know what success is. (Reward)</li>
<li>We have to learn efficiently. (Learning Algorithm)</li>
</ul>
<h3 id="WorkFlow"><a href="#WorkFlow" class="headerlink" title="WorkFlow"></a>WorkFlow</h3><img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/1.png" class="" width="500">

<p>环境Environment是指除了Agent以外的所有事物, 机器人通过与环境交互, 从而得到奖励rewards和observation观测值.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/2.png" class="" width="500">

<p>对于智能体所需要交互的环境, 有两种不同的类型, RL可以基于模型也可以不基于模型</p>
<ul>
<li>Model-Based RL<ul>
<li>通过补偿学习过程来学习最优策略</li>
</ul>
</li>
<li>Model-Free RL<ul>
<li>直接通过与环境交互来学习最优策略</li>
</ul>
</li>
</ul>
<p>设计奖励函数的两个问题:</p>
<ul>
<li>Rewards can come after long sequences of actions. (sparse rewards)<ul>
<li>例如让一个机器人行走十米才能获得奖励, 中间任何步骤都不获得奖励, 那么这个随机探索的过程将会变得非常漫长;</li>
</ul>
</li>
<li>If you give an optimization algorithm a shortcut, it’ll take it.<ul>
<li>例如让机器人只走一米就能获得奖励, 那么机器人可能会摔过去而不是走过去. (更优先于走捷径)</li>
</ul>
</li>
</ul>
<p>对于一个智能体Agent, 其中有两个紧密交织的核心:</p>
<ul>
<li>Policy<ul>
<li>Policy是一个用于接收状态观测值并输出动作的函数. (Input: State, Output: Action)</li>
</ul>
</li>
<li>Learning Algorithm<ul>
<li>如何得到一个最优的Policy, 即设计一个函数的结构, 使得在给定一个State时, 能够选择一个最优的Action.</li>
</ul>
</li>
</ul>
<p>例如在Q函数中, 通过查找对应的状态S, 选择其中一个最有价值的动作A.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/3.png" class="" width="500">

<p>这个表格称为Q Table, 也会随着时间更新, 每个State不同时间时所对应的Action的价值也会不同.</p>
<p><strong>如何去设计给定一个State时, 选择一个value最大的Action, 这就是Policy的设计.</strong></p>
<p>RL的做法就是通过神经网络去训练得到这个Policy.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/5.png" class="" width="500">

<p>对于一个需要行走到正确地点的智能体, 它需要计算当前状态下所能采取的每个动作所带来的收益, 并选择其中最大的那个动作.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/4.png" class="" width="500">

<p>这个过程的算法称之为Value-function based algorithms, 即函数评价器.</p>
<p>在采取一个特定的Action之后, 智能体会使用奖励和新的环境信息来更新它刚刚采取动作的价值;</p>
<p>这里的更新就会用到Bellman Equation, 用于更新Q Table.</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="60.776ex" height="2.396ex" role="img" focusable="false" viewBox="0 -809 26862.9 1059"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mi" transform="translate(888,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(1354,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(2070,0)"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mo" transform="translate(2861,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3250,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(3719,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4163.7,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(4692.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(5359.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(6415.2,0)"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mo" transform="translate(7206.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7595.2,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(8064.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(8508.9,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(9037.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(9649.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(10649.3,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mo" transform="translate(11289.3,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(11567.3,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(12326.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(12715.3,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(13184.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(13629,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(14158,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(14769.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(15769.4,0)"><path data-c="1D6FE" d="M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z"></path></g><g data-mml-node="mo" transform="translate(16479.1,0)"><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(833,0)"></path><path data-c="78" d="M201 0Q189 3 102 3Q26 3 17 0H11V46H25Q48 47 67 52T96 61T121 78T139 96T160 122T180 150L226 210L168 288Q159 301 149 315T133 336T122 351T113 363T107 370T100 376T94 379T88 381T80 383Q74 383 44 385H16V431H23Q59 429 126 429Q219 429 229 431H237V385Q201 381 201 369Q201 367 211 353T239 315T268 274L272 270L297 304Q329 345 329 358Q329 364 327 369T322 376T317 380T310 384L307 385H302V431H309Q324 428 408 428Q487 428 493 431H499V385H492Q443 385 411 368Q394 360 377 341T312 257L296 236L358 151Q424 61 429 57T446 50Q464 46 499 46H516V0H510H502Q494 1 482 1T457 2T432 2T414 3Q403 3 377 3T327 1L304 0H295V46H298Q309 46 320 51T331 63Q331 65 291 120L250 175Q249 174 219 133T185 88Q181 83 181 74Q181 63 188 55T206 46Q208 46 208 23V0H201Z" transform="translate(1333,0)"></path></g><g data-mml-node="msup" transform="translate(18506.8,0)"><g data-mml-node="mi"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mo" transform="translate(824,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(19575.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(19964.2,0)"><g data-mml-node="mi"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(502,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(20710.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(21155.4,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(562,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(21961.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(22573,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(23573.3,0)"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mo" transform="translate(24364.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(24753.3,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(25222.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(25666.9,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(26195.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(26584.9,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container></p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.741ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2979.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(759,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1148,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(1617,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2061.7,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(2590.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>时对执行动作<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.197ex" height="1.02ex" role="img" focusable="false" viewBox="0 -441 529 451"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>后的奖励;</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex;" xmlns="http://www.w3.org/2000/svg" width="1.229ex" height="1.486ex" role="img" focusable="false" viewBox="0 -441 543 657"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FE" d="M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z"></path></g></g></g></svg></mjx-container>是折扣因子, 用于平衡当前奖励和未来奖励, 大小取0~1;</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="13.284ex" height="2.283ex" role="img" focusable="false" viewBox="0 -759 5871.7 1009"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(833,0)"></path><path data-c="78" d="M201 0Q189 3 102 3Q26 3 17 0H11V46H25Q48 47 67 52T96 61T121 78T139 96T160 122T180 150L226 210L168 288Q159 301 149 315T133 336T122 351T113 363T107 370T100 376T94 379T88 381T80 383Q74 383 44 385H16V431H23Q59 429 126 429Q219 429 229 431H237V385Q201 381 201 369Q201 367 211 353T239 315T268 274L272 270L297 304Q329 345 329 358Q329 364 327 369T322 376T317 380T310 384L307 385H302V431H309Q324 428 408 428Q487 428 493 431H499V385H492Q443 385 411 368Q394 360 377 341T312 257L296 236L358 151Q424 61 429 57T446 50Q464 46 499 46H516V0H510H502Q494 1 482 1T457 2T432 2T414 3Q403 3 377 3T327 1L304 0H295V46H298Q309 46 320 51T331 63Q331 65 291 120L250 175Q249 174 219 133T185 88Q181 83 181 74Q181 63 188 55T206 46Q208 46 208 23V0H201Z" transform="translate(1333,0)"></path></g><g data-mml-node="msup" transform="translate(2027.7,0)"><g data-mml-node="mi"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g><g data-mml-node="mo" transform="translate(824,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(3096.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(3485.1,0)"><g data-mml-node="mi"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(502,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(4231.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(4676.2,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(562,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(5482.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>是下一个状态的最大价值;</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.448ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 640 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g></g></g></svg></mjx-container>是学习率, 用于控制更新的速度.</li>
</ul>
<p>在States和Actions都是连续的情况下, 无法使用Q Table, 这时候也同样需要使用神经网络来拟合Q函数. 网络的输入为State和Action, 输出为Q值, 即最大期望价值.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/6.png" class="" width="500">

<p>最后两个神经网络形成一个Actor-Critic结构, Actor用于选择动作, Critic用于评价动作的价值.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/30/Iterative-Optimal-Control-for-Robotics-System/7.png" class="" width="500">

<h2 id="MPC-vs-RL"><a href="#MPC-vs-RL" class="headerlink" title="MPC vs RL"></a>MPC vs RL</h2><blockquote>
<p>Indeed, I do favor MPC over RL.<br>I’ve been making that point since at least 2016.<br>RL requires ridiculously large numbers of trials to learn any new task.<br>In contrast MPC is zero shot: If you have a good world model and a task objective, MPC can solve new tasks without any task-specific learning.<br>That’s the magic of planning.<br>It doesn’t mean that RL is useless, but its use should be a last resort.<br>—-Yann LeCun</p>
</blockquote>
<p>MPC的问题在于如何求解精确的MPC模型, MPC的前提是有一个准确的模型, 但是在实际应用中, 很难得到一个准确的模型, 这就是MPC的局限性.</p>
<p>对于难以建模或具有复杂动态的问题, 强化学习是一个更好的选择. 对于建模良好且动态可预测的问题. MPC模型预测控制是一个更好的选择.</p>
<p>很多人认为, MPC与RL的结合, MPC用于实时系统的控制, RL用于参数的调整以获得更好的性能.</p>
<blockquote>
<p>MPC controls real-time movement, while RL adapts parameters for better performance.</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1WbeueyELJ?p=1&vd_source=3c842e78ba17ee7afd3375b35f554ca1">【强化学习训练走路的机器人】油管最强动画强化学习入门！不愧是MATLAB官方教程，行走机器人|深度学习|AI 人工智能<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1zp421972W/?spm_id_from=333.788.recommend_more_video.0&vd_source=3c842e78ba17ee7afd3375b35f554ca1">(强推!) 2024CMU最新【最优控制与强化学习】全套教程，私立顶尖大学的水平！-人工智能/卡内基梅隆大学/16-745<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1RF411u7T4/?spm_id_from=333.337.search-card.all.click&vd_source=3c842e78ba17ee7afd3375b35f554ca1">「现代控制理论」Chap12 最优控制 泛函与变分<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Mathematics</category>
      </categories>
  </entry>
  <entry>
    <title>Introduction to Machine Learning</title>
    <url>/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/</url>
    <content><![CDATA[<h2 id="Overview-of-Machine-Learning"><a href="#Overview-of-Machine-Learning" class="headerlink" title="Overview of Machine Learning"></a>Overview of Machine Learning</h2><h3 id="Formal-Definition-of-Machine-Learning"><a href="#Formal-Definition-of-Machine-Learning" class="headerlink" title="Formal Definition of Machine Learning"></a>Formal Definition of Machine Learning</h3><blockquote>
<p>Field of study that gives computers the ability to learn without being explicitly programmed. – Arthur Samuel, 1959</p>
</blockquote>
<h3 id="Supervised-Learning"><a href="#Supervised-Learning" class="headerlink" title="Supervised Learning"></a>Supervised Learning</h3><ul>
<li><strong>Regression</strong>: Learning input, output, or x to y mapping in order to predict numbers out.</li>
</ul>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_2.png" class="" width="600">

<ul>
<li><strong>Classification</strong>: Making a prediction of a category all of a small and discrete set of possible outputs.</li>
</ul>
<blockquote>
<p>This is different from regression which tries to predict any numbers all of the infinitely many number of possible outputs. There are only two possible outputs is what makes this classification.</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_3.png" class="" width="600">

<p>Many more input values are required, in this case, such as the thickness of the tumor clump, uniformity of the cell size, uniformity of the cell shape and so on.</p>
<h3 id="Unsupervised-Learning"><a href="#Unsupervised-Learning" class="headerlink" title="Unsupervised Learning"></a>Unsupervised Learning</h3><blockquote>
<p>Data only comes with inputs x, but not output lables y. Algorithm has to find <strong>structure</strong> in the data.</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_1.png" class="" width="600">

<p>It places the unlabled data.</p>
<ul>
<li><strong>Clustering</strong>: Grouping similar examples together.</li>
</ul>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_4.png" class="" width="600">

<p>Each tiny column represents the genetic or DNA activity of one person, the role represent a gene that affects eye color or how tall someone is.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_5.png" class="" width="600">

<p>Group your customers into different market segments so that you can more efficiently serve your customers.</p>
<ul>
<li><strong>Anomaly detection</strong>: Find unusual data points.</li>
<li><strong>Dimensionality reduction</strong>: Compress data using fewer numbers.</li>
</ul>
<h3 id="Jupyter-Notebooks"><a href="#Jupyter-Notebooks" class="headerlink" title="Jupyter Notebooks"></a>Jupyter Notebooks</h3><blockquote>
<p>Jupyter Notebooks is the most widely used tool by machine learning and data science practitioners.</p>
</blockquote>
<h2 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h2><h3 id="Regression-Model-with-One-Feature"><a href="#Regression-Model-with-One-Feature" class="headerlink" title="Regression Model with One Feature"></a>Regression Model with One Feature</h3><blockquote>
<p>Regression model predicts numbers.</p>
</blockquote>
<p>A training set in supervised learning includes both the input <strong>features</strong> and the output <strong>targets</strong>.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_6.png" class="" width="600">

<p>In a linear regression with one feature (Univariate linear regression), the <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="1.244ex" height="2.059ex" role="img" focusable="false" viewBox="0 -705 550 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g></g></g></svg></mjx-container> represent:</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.65ex;" xmlns="http://www.w3.org/2000/svg" width="16.295ex" height="2.347ex" role="img" focusable="false" viewBox="0 -750 7202.2 1037.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1579.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1968.2,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2540.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3207,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(4262.8,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(4978.8,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(5773,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(6773.2,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container></p>
<p>In order to find <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>, we need to construct a <strong>cost function</strong>.</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> are the <strong>parameters</strong> of the model.</p>
<h3 id="Cost-function"><a href="#Cost-function" class="headerlink" title="Cost function"></a>Cost function</h3><p><strong>Squared error cost function</strong></p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.819ex;" xmlns="http://www.w3.org/2000/svg" width="29.263ex" height="6.354ex" role="img" focusable="false" viewBox="0 -1562.5 12934 2808.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3278.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(4334.2,0)"><g data-mml-node="mn" transform="translate(659,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><rect width="1578" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(6318.9,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(411.6,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="mo" transform="translate(7762.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(8151.9,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(300.6,16) translate(-250 0)"><path data-c="5E" d="M112 560L249 694L257 686Q387 562 387 560L361 531Q359 532 303 581L250 627L195 580Q182 569 169 557T148 538L140 532Q138 530 125 546L112 560Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(9741.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(10741.4,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="msup" transform="translate(12108.5,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mn" transform="translate(422,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container></p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.986ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 878 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container>: number of training examples</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="3.093ex" height="2.485ex" role="img" focusable="false" viewBox="0 -893.3 1367.1 1098.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(300.6,16) translate(-250 0)"><path data-c="5E" d="M112 560L249 694L257 686Q387 562 387 560L361 531Q359 532 303 581L250 627L195 580Q182 569 169 557T148 538L140 532Q138 530 125 546L112 560Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(523,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></g></g></svg></mjx-container>: prediction</li>
<li>error: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="8.952ex" height="2.485ex" role="img" focusable="false" viewBox="0 -893.3 3956.6 1098.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(300.6,16) translate(-250 0)"><path data-c="5E" d="M112 560L249 694L257 686Q387 562 387 560L361 531Q359 532 303 581L250 627L195 580Q182 569 169 557T148 538L140 532Q138 530 125 546L112 560Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(523,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1589.3,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(2589.5,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></g></g></svg></mjx-container></li>
<li>By convention, the cost function is divided by <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="3.118ex" height="1.532ex" role="img" focusable="false" viewBox="0 -666 1378 677"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container>, so that the derivative of the cost function is simpler.<br><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.819ex;" xmlns="http://www.w3.org/2000/svg" width="34.781ex" height="6.354ex" role="img" focusable="false" viewBox="0 -1562.5 15373.3 2808.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3278.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(4334.2,0)"><g data-mml-node="mn" transform="translate(659,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><rect width="1578" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(6318.9,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(411.6,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="mo" transform="translate(7762.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(8151.9,0)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(9731.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(10120.1,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" transform="translate(605,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(11569.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(12180.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(13180.6,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="msup" transform="translate(14547.7,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mn" transform="translate(422,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container></li>
</ul>
<p>Linear regression would try to find the values of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> that minimize the cost function.</p>
<p>Goal: Minimize <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.789ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_7.png" class="" width="600">
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_8.png" class="" width="600">

<h3 id="Gradient-Descent"><a href="#Gradient-Descent" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h3><p>For a function <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.789ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p>
<ol>
<li>Start with some initial <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>;</li>
<li>Keep changing <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> to reduce <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.789ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> until we hopefully end up at a minimum.</li>
<li>The direction to move <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> is given by the partial derivatives of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.789ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1022,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> with respect to <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>.</li>
</ol>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.602ex;" xmlns="http://www.w3.org/2000/svg" width="19.535ex" height="4.905ex" role="img" focusable="false" viewBox="0 -1460 8634.7 2168"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(993.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2049.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(2987.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(3988,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(4628,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(1199,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1588,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(2304,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2748.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3177.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mrow" transform="translate(1362.3,-686)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g><rect width="3766.7" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.448ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 640 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g></g></g></svg></mjx-container> is called the <strong>learning rate</strong>.</li>
</ul>
<p>For <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.448ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 640 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g></g></g></svg></mjx-container> is too small or too large, the gradient descent may not converge to the minimum.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_10.png" class="" width="600">

<p>The tow value of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.62ex" height="1.027ex" role="img" focusable="false" viewBox="0 -443 716 454"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container> and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> are updated simultaneously.</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.602ex;" xmlns="http://www.w3.org/2000/svg" width="63.986ex" height="4.905ex" role="img" focusable="false" viewBox="0 -1460 28281.7 2168"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(361,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="msub" transform="translate(1239,0)"><g data-mml-node="mi"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(536,-150) scale(0.707)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g><g data-mml-node="mo" transform="translate(2609.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(3664.8,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(4603.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(5603.3,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(6243.3,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(1199,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1588,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(2304,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2748.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3177.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mrow" transform="translate(1362.3,-686)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g><rect width="3766.7" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(10250,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(10611,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="msub" transform="translate(11489,0)"><g data-mml-node="mi"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(536,-150) scale(0.707)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g><g data-mml-node="mo" transform="translate(12656.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(13711.9,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(14363.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(15363.3,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(16003.3,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(1199,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1588,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(2304,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2748.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3177.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mrow" transform="translate(1505.8,-686)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g><rect width="3766.7" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(20010,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(21003.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(22059.5,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(22420.5,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="msub" transform="translate(23298.5,0)"><g data-mml-node="mi"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(536,-150) scale(0.707)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g><g data-mml-node="mi" transform="translate(24390.8,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(25097.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(26153.4,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(26514.4,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="msub" transform="translate(27392.4,0)"><g data-mml-node="mi"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(536,-150) scale(0.707)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></g></svg></mjx-container></p>
<blockquote>
<p>Convex function: A function that has only one minimum.(no local minimum)</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_9.png" class="" width="600">

<p>By using the gradient descent, we can find the minimum of the cost function.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_11.png" class="" width="600">

<p><strong>Batch gradient descent</strong>: Each step of gradient descent uses all the training examples.</p>
<h3 id="Multiple-Linear-Regression"><a href="#Multiple-Linear-Regression" class="headerlink" title="Multiple Linear Regression"></a>Multiple Linear Regression</h3><p>Notation:</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.666ex;" xmlns="http://www.w3.org/2000/svg" width="2.141ex" height="1.666ex" role="img" focusable="false" viewBox="0 -442 946.3 736.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.462ex;" xmlns="http://www.w3.org/2000/svg" width="2.619ex" height="2.393ex" role="img" focusable="false" viewBox="0 -853.7 1157.6 1057.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g><g data-mml-node="TeXAtom" transform="translate(445,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(361,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g></g></g></g></g></svg></mjx-container> input feature</li>
<li>n = number of features</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.991ex;" xmlns="http://www.w3.org/2000/svg" width="3.278ex" height="3.391ex" role="img" focusable="false" viewBox="0 -1060.7 1449.1 1498.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" transform="translate(605,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(605,-293.8) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></g></g></svg></mjx-container> = value of feature <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.462ex;" xmlns="http://www.w3.org/2000/svg" width="0.932ex" height="1.957ex" role="img" focusable="false" viewBox="0 -661 412 865"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></svg></mjx-container> in the <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.467ex" height="1.956ex" role="img" focusable="false" viewBox="0 -853.7 1090.6 864.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(378,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(361,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g></g></g></g></g></svg></mjx-container> training example</li>
</ul>
<p>For a multiple linear regression</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.864ex;" xmlns="http://www.w3.org/2000/svg" width="50.619ex" height="2.778ex" role="img" focusable="false" viewBox="0 -846 22373.7 1227.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-244.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1579.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1968.2,0)"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(2540.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3207,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(4262.8,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="msub" transform="translate(5415.3,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(6646.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(7646.3,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="msub" transform="translate(8798.9,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(10029.6,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(11029.9,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(12424.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(13424.3,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="msub" transform="translate(14647.6,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(15949.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(16949.3,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(17656.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(18711.8,0)"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(19650.1,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(20150.3,0)"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(20944.5,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(21944.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container></p>
<h3 id="Vectorization"><a href="#Vectorization" class="headerlink" title="Vectorization"></a>Vectorization</h3><p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="29.401ex" height="2.48ex" role="img" focusable="false" viewBox="0 -846 12995.1 1096"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(993.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(2049.6,0)"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mtable" transform="translate(278,0)"><g data-mml-node="mtr"><g data-mml-node="mtd"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mtext" transform="translate(1152.6,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(1402.6,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mtext" transform="translate(2555.1,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(2805.1,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></g><g data-mml-node="mo" transform="translate(4235.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g><g data-mml-node="mo" transform="translate(6563.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7007.9,0)"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(7857.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mrow" transform="translate(8913.4,0)"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mtable" transform="translate(278,0)"><g data-mml-node="mtr"><g data-mml-node="mtd"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mtext" transform="translate(1008.6,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(1258.6,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mtext" transform="translate(2267.1,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(2517.1,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></g><g data-mml-node="mo" transform="translate(3803.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></g></svg></mjx-container></p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line">w = np.array([<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>])</span><br><span class="line">b = <span class="number">4</span></span><br><span class="line">x = np.array([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>])</span><br></pre></td></tr></table></figure></div>

<p>Without vectorization:</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line">f = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, n):</span><br><span class="line">    f += w[j] * x[j]</span><br><span class="line">f += b</span><br></pre></td></tr></table></figure></div>

<p>Vectorization:</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line">f = np.dot(w, x) + b</span><br></pre></td></tr></table></figure></div>

<p>It’s much faster to use vectorization because the computational complexity is <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.618ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2041 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(1152,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(1652,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> instead of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.844ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2141 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1752,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>.</p>
<p>In Gradient descent with <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> features for multiple regression:</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -11.115ex;" xmlns="http://www.w3.org/2000/svg" width="38.901ex" height="23.361ex" role="img" focusable="false" viewBox="0 -5412.7 17194.1 10325.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,3850.1)"><g data-mml-node="mtd" transform="translate(141.4,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(1430.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(2486.1,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(3860.9,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4861.1,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(5501.1,0)"><g data-mml-node="mn" transform="translate(409,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mi" transform="translate(220,-686)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><rect width="1078" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(6985.8,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(411.6,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="mo" transform="translate(8429.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(8818.8,0)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-244.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(10398,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(10787,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(605,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(12236.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(12847.3,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(13847.5,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(15214.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="msubsup" transform="translate(15603.6,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" transform="translate(605,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mn" transform="translate(605,-297.3) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,1554.2)"><g data-mml-node="mtd" transform="translate(16022.1,0)"><g data-mml-node="mo"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,-558.3)"><g data-mml-node="mtd"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(1501,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(2556.8,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(4002.3,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(5002.5,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(5642.5,0)"><g data-mml-node="mn" transform="translate(409,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mi" transform="translate(220,-686)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><rect width="1078" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(7127.2,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(411.6,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="mo" transform="translate(8571.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(8960.2,0)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-244.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(10539.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(10928.4,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(605,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(12377.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(12988.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(13988.9,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(15356,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="msubsup" transform="translate(15745,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" transform="translate(605,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mi" transform="translate(605,-138.9) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-3666.8)"><g data-mml-node="mtd" transform="translate(3037.6,0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(706.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(1762.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2413.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(3414,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mfrac" transform="translate(4054,0)"><g data-mml-node="mn" transform="translate(409,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mi" transform="translate(220,-686)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><rect width="1078" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(5538.7,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(411.6,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="mo" transform="translate(6982.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(7371.7,0)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-244.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(994,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(8950.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(9339.9,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(313.8,31) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="TeXAtom" transform="translate(605,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(10789,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(11400.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(12400.4,0)"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(734,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mo" transform="translate(13767.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></g></g></g></svg></mjx-container></p>
<p>An alternative to gradient descent is the <strong>normal equation</strong>. And only for linear regression by solving for <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="3.597ex" height="2.009ex" role="img" focusable="false" viewBox="0 -694 1589.7 888"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1160.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> without iterations.</p>
<p>It also has two disadvantages:</p>
<ul>
<li>Doesn’t generalize to other learning algorithms.</li>
<li>Slow when number of features is large.</li>
</ul>
<h3 id="Feature-Scaling"><a href="#Feature-Scaling" class="headerlink" title="Feature Scaling"></a>Feature Scaling</h3><blockquote>
<p>Feature scaling will enable the gradient descent to converge much faster.</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_12.png" class="" width="600">

<p>Likewise, when the possible values of the feature are small, like the number of bedrooms, then a reasonable value for its parameters will be relatively large like 50.</p>
<p>A contour plot where the horizontal axis has a much narrower range than the vertical axis.</p>
<p>The key point is that the rescaling of the features can make the cost function look like a nice, symmetric bowl shape, which will make the gradient descent converge much faster.</p>
<p>To recap, when you have different features that take on very different ranges of values, it can cause gradient descent to run slowly but rescaling the different features so they all take on comparable range of values can speed up gradient descent significantly.</p>
<p>Normal method:</p>
<ul>
<li>Feature scaling</li>
<li>Mean normalization</li>
<li>Z-score normalization</li>
</ul>
<h3 id="Check-Gradient-Descent-for-Convergence"><a href="#Check-Gradient-Descent-for-Convergence" class="headerlink" title="Check Gradient Descent for Convergence"></a>Check Gradient Descent for Convergence</h3><p>Looking at this learning curve, we can try to spot whether or not gradient descent is converging.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_13.png" class="" width="600">

<p>With a small enough <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.448ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 640 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.789ex" height="2.48ex" role="img" focusable="false" viewBox="0 -846 3000.7 1096"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g><g data-mml-node="mo" transform="translate(633,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1022,0)"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(441.3,32) translate(-250 0)"><path data-c="20D7" d="M377 694Q377 702 382 708T397 714Q404 714 409 709Q414 705 419 690Q429 653 460 633Q471 626 471 615Q471 606 468 603T454 594Q411 572 379 531Q377 529 374 525T369 519T364 517T357 516Q350 516 344 521T337 536Q337 555 384 595H213L42 596Q29 605 29 615Q29 622 42 635H401Q377 673 377 694Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1738,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2182.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2611.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> should decrease on every iteration.</p>
<p>If <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.448ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 640 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g></g></g></svg></mjx-container> is too small, gradient descent takes a lot more iterations to converge.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_14.png" class="" width="600">

<h3 id="Feature-engineering"><a href="#Feature-engineering" class="headerlink" title="Feature engineering"></a>Feature engineering</h3><blockquote>
<p>Feature engineering: Using intuition to design new features, by transforming or combining original features.</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_16.png" class="" width="600">

<p>For instance, if we have measurements for the dimensions of a swimming pool(length, width, height), <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="23.85ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 10541.9 899"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(298,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(764,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1364,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(1841,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(2202,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(3000.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mi" transform="translate(4000.4,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(4716.4,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(5061.4,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(5581.4,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(5942.4,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(6740.7,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mi" transform="translate(7740.9,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(8316.9,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(8782.9,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9127.9,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(9604.9,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(10180.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></svg></mjx-container> would be a more useful engineered feature.</p>
<p>We can also use polynomial regression to fit the data better.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/11/08/Machine-Learning-Course-by-Andrew-Ng/fig_15.png" class="" width="600">


<h2 id="Logistic-Regression-for-Classification"><a href="#Logistic-Regression-for-Classification" class="headerlink" title="Logistic Regression for Classification"></a>Logistic Regression for Classification</h2><p>For instance:</p>
<ul>
<li>Is this email spam?</li>
<li>Is the transaction fradulent?</li>
<li>Is the tumor malignant?</li>
</ul>
<blockquote>
<p>In these <strong>binary classification</strong>, y can only be one of two values. Usually 1 for positive class and 0 for negative class.</p>
</blockquote>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a class="link" href="https://www.coursera.org/learn/machine-learning/lecture/TxO6F/unsupervised-learning-part-1">https://www.coursera.org/learn/machine-learning/lecture/TxO6F/unsupervised-learning-part-1<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title>Lean English With Movies and TV Series</title>
    <url>/2023/10/05/Lean-English-With-Movies-and-TV-Series/</url>
    <content><![CDATA[<blockquote>
<p>Translations mostly refers to gpt-4.</p>
</blockquote>
<blockquote>
<p>GPT prompts: I am watching movies now, can you explain the specific words or phrase which I don’t understand? You should also give other examples.</p>
</blockquote>
<h1 id="Minions"><a href="#Minions" class="headerlink" title="Minions"></a>Minions</h1>
  <div class="note p-4 mb-4 rounded-small black">
    <p>Making their master happy was the <strong>tribe’s</strong> very reason for existence.</p>

  </div>
<blockquote>
<p>a group of people of the same race, and with the same customs, language, religion, etc, living in a particular area and often led by a chief.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>With the <strong>emergence</strong> of the Stone Age came the rise of a new species.</p>

  </div>
<blockquote>
<p>start to exist, to appear or become known</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>But keeping a boss, <strong>therein lies the rub</strong>.</p>

  </div> 
<blockquote>
<p>Suggests that the real challenge or problem is in keeping a boss, <strong>therein lies the rub</strong> &#x3D; that is where the problem is &#x3D; there’s the rub.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_4.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>The Minions took an <strong>instant</strong> liking to man.</p>

  </div>
<blockquote>
<p>happening immediately</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    <p>Ancient Egypt <strong>held great promise</strong>. </p>

  </div>
<blockquote>
<p>Sth or sb showed a lot of potential or <strong>indicated</strong> (point out, show, be a sign of something) a high <strong>likelihood</strong> (the chance of sth happening; how likely sth is to happen) or future success</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_5.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>One particular employer <strong>took their failure very very badly</strong>.</p>

  </div>
<blockquote>
<p>Someone reacted strongly and negatively to their own failure or mistake, it implies a deep sense of disappointment, regret, or emotional pain in response to not succeeding or meeting one’s own expectations</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>And then, when all hope seemed lost, they found <strong>sanctuary</strong>.</p>

  </div>
<blockquote>
<p>A place of <strong>refuge</strong> (a condition or  place of safety, where one is protected from danger, <strong>distress</strong> (it conveys a sense of extreme sorrow, suffering, or discomfort), or trouble.) or safety, a sanctuary can be a place where people or animals are protected and cannot be harmed or captured.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_1.png"
                      class="" width="500"
                >



  <div class="note p-4 mb-4 rounded-small cyan">
    <p>Years passed as the Minions <strong>forged</strong> their own civilization.</p>

  </div>
<blockquote>
<p>Implies a sense of active creation or shaping, often through hard work and determination, Minions built, developed, or established their own unique society or culture over time.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>If this continued any longer, the Minions would <strong>perish</strong>.</p>

  </div>
<blockquote>
<p><strong>Perish</strong> is a formal or literary word that means to die, especially in a sudden or terrible way, suggests a serious, <strong>dire</strong> (describes a situation or event that is extrmely serious or urgent, often involving great risk or suffering.) consequence, emphasizing the severity of the situation. The statement conveys a sense of urgency or danger, implying that the continuation of a certain event or circumstance would lead to the <strong>demise</strong> (refers to a person’s death or the end of sth’s existence or operation.) or extinction of the Minions.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_2.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>Truth be told, Stuart had no idea what he was chosen for, but was <strong>thrilled</strong> it made people cheer for him.</p>

  </div>
<blockquote>
<p>Stuart was extremely excited, pleased or happy. It conveys a strong feeling of <strong>elation</strong> (a feeling of great joy) or joy.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_3.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small blue">
    <p>Attend guest lectures from <strong>esteemed</strong> villains, make contacts in the underworld community.</p>

  </div>
<blockquote>
<p><strong>Esteemed</strong> means highly respected or admired.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_7.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>These adorable little <strong>freaks</strong> are headed to Orlando, too!</p>

  </div>
<blockquote>
<p>Tranditionally, freak can refer to sth very unusual or unexpected, sometimes carry a negative or <strong>derogatory</strong>(showing a critical or disrespectful attitude) <strong>connotation</strong>(additional meaning carries beyond its literal definition).</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_6.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p>Dad! We <strong>got company</strong>! It’s because I tripped the alarm.</p>

  </div>
<blockquote>
<p><strong>Got company</strong> is an informal way to say that someone is approaching or has arrived, typically in an unexpected or unwelcome manner.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_8.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small cyan">
    <p>What a small world! Hope we’re not in <strong>rival gangs</strong>.</p>

  </div>
<blockquote>
<p>Potential conflicts or differences between the two people meeting.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    <p>Oh, Kevin, you don’t wanna work for him! He ate his last <strong>henchmen</strong>!</p>

  </div>
<blockquote>
<p><strong>Henchmen</strong> refers to loyal and subservient followers or helpers, expecially those who engage in criminal activities for a powerful leader or boss.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p><strong>Ten times the evil in half the package</strong>.</p>

  </div>
<blockquote>
<p>This phrase describe sb&#x2F;sth is extremely <strong>malevolent</strong>(having or showing a desire to harm other people) or harmful while being <strong>deceptively</strong>(likely to make you believe sth that is not true) small or unassuming in appearance.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    <p>You see this tiny little <strong>trinket</strong>?</p>

  </div>
<blockquote>
<p><strong>Trinket</strong> refers to a small <strong>ornament</strong>(an object that is used as decoration in a room, garden&#x2F;yard, etc. rather than for a particular purpose) or item of jewelry that is of little value.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_9.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small black">
    <p>Love the <strong>constume</strong>!</p>

  </div>
<blockquote>
<p>The clothes worn by actors in a play or movie, or worn by sb to make them look like sth else; The clothes worn by people from a particular place or during a particular historical period.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_10.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p><strong>Buckle up</strong>, boys!</p>

  </div>
<blockquote>
<p>Literally, it’s directive to fasten their seatbelts for safety. Figuratively, it’s playful way to say “Get ready for an adventure!”.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_11.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small grey">
    <p>But right now, it’s <strong>leaking radiation</strong> like you would not believe!</p>

  </div>
<blockquote>
<p>It means that radiation is being emitted or released from a particular source.<br><strong>Like you would not believe</strong>  is an idiomatic expression used to emphasize the extent or degree of sth.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_12.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small blue">
    <p>Herb, these are the new <strong>recruits</strong>.</p>

  </div>
<blockquote>
<p>It refers to individuals who have recently joined a group, organization, team, or cause.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_13.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>Right on! You guys are crazy little and way yellow, and I dig that!</p>

  </div>
<blockquote>
<p><strong>Right on</strong> is an expression of strong support, approval, or encouragement.<br><strong>Dig</strong> is another common slang term for like. For instance, I dug that movie.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>Oh, I love England. The music, the fashion. I’m seriously thinking about <strong>overthrowing</strong> it someday.</p>

  </div>
<blockquote>
<p><strong>Overthrowing</strong> refers to forcibly removing or displacing a system, government, ruler, or authority from power.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_14.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small cyan">
    <p>You can use it to <strong>hypnotize</strong> anyone. Anyone!</p>

  </div>
<blockquote>
<p><strong>Hypnotize</strong> refers to the ability to put someone into a <strong>trance</strong>-like(a state in which sb seems to be asleep but is aware of what is said to them) state, making them <strong>susceptible</strong>(very likely to be influenced, harmed or affected by sb&#x2F;sth) to suggestions or controlling their action, typically using a specific tool or method.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_15.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>I feel like a proud mama with three <strong>dashing</strong> evil sons.</p>

  </div>
<blockquote>
<p>Attractive, confident, fashionable and elegant.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>All the three little piggies had to do was just steal on little crown that the beautiful wolf had wanted ever since she was a <strong>penniless little street cub</strong>, unloved and abandoned.</p>

  </div>
<blockquote>
<p>Being <strong>penniless</strong> means she was without money, suggesting poverty or hardship. The term “<strong>street cub</strong>“ implies she was young and alone, roaming the streets, likely fending for herself.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_16.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>So the wolf <strong>huffed and puffed</strong>, and she blew them off the face of the earth!</p>

  </div>
<blockquote>
<p>The wolf’s actions are described in a much more intense manner, suggesting that she completely <strong>obliterated</strong>(eliminate) or got rid of the pigs in a significant way.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p>You’re not allowed in without an adult. <strong>Scram, hooligans</strong>!</p>

  </div>
<blockquote>
<p><strong>Scram</strong> is a <strong>colloquial</strong>(used in conversation but not in formal speech or writing) term that means “go away” or “leave immediately”.<br><strong>Hooligans</strong> refers to people, typically young, who are noisy, <strong>rowdy</strong>(making a lot of noise or likely to cause trouble), or disruptive.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_17.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>This is a <strong>restricted</strong> area!</p>

  </div>
<blockquote>
<p><strong>Restricted</strong> means access to this particular location or space is limited or controlled.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_18.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small grey">
    <p>You think it’s funny to <strong>mock</strong> the elderly, do you?</p>

  </div>
<blockquote>
<p>To mock sb means to <strong>ridicule</strong>(unkind comments that make fun of sb&#x2F;sth or make them look silly), <strong>mimic</strong>(to copy the way sb speaks, moves, behaves, etc., especially in order to make other people laugh), or make fun of them, often in a mean-spirited or <strong>belittling</strong>(to make sb or the things that sb does seem unimportant) manner.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>The Queen’s crown has been <strong>kidnapped</strong>, Sarge!</p>

  </div>
<blockquote>
<p>Be taken against their will.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>Bob, who appears to be a <strong>bald</strong>, <strong>jaundiced</strong> child, has pulled the famed sword right from its stone which legend <strong>dictates</strong>, makes him the new king.</p>

  </div>
<blockquote>
<p><strong>Bald</strong> means people without hair on the head.<br><strong>Jaundiced</strong> means Minions has yellow skin here.(Mostly a diease)<br><strong>Legend dictates</strong> refers to what a well-known story or myth prescribes or sets as a standard.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_19.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p>Tiny yellow <strong>traitor</strong>!</p>

  </div>
<blockquote>
<p>A persion who betrays sb or sth, such as a friend, cause, or principle.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_20.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small cyan">
    <p>I’d wear a dress so sparkly, it <strong>glowed</strong>!</p>

  </div>
<blockquote>
<p><strong>It glowed</strong> conveys a wish or a fantasy about wearing a dress that is exceptionally shiny or radiant.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    <p>And you pinheads <strong>screwed it up</strong>!</p>

  </div>
<blockquote>
<p><strong>Screw it up</strong> is a slang expression meaning to make a mistake or mishandle a situation, resulting in negative consequences.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>No, no, no, King Bob! You cannot just <strong>abdicate the throne</strong>!</p>

  </div>
<blockquote>
<p><strong>Abdicate the throne</strong> means to <strong>relinquish</strong>(to stop having sth, especially when this happens unwillingly) or give up one’s position as a monarch or ruler. </p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    <p>If I wasn’t so polite, I’d say this spells certain <strong>doom</strong> for the country.</p>

  </div>
<blockquote>
<p><strong>Doom</strong> refers to an <strong>impending</strong>(going to happen very soon) negative or disastrous outcome.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p>I’m a <strong>dungeon</strong> master. Prepare for <strong>torture</strong> which I do.</p>

  </div>
<blockquote>
<p><strong>Dungeon</strong> is a dark underground room used as a prison, especially in a castle.<br><strong>Torture</strong> means the act of causing sb severe pain in order to punish them or make them say or do sth.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_21.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>Oh, I’ve got a <strong>groovy</strong> idea!</p>

  </div>
<blockquote>
<p>Fashionable, attractive and interesting.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>Mrs. Overkill, the hair in that picture, it’s just two <strong>wavy</strong> lines!</p>

  </div>
<blockquote>
<p>Having curves, not straight.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>Oh, so, what, now you’re an art <strong>critic</strong>?</p>

  </div>
<blockquote>
<p>A person who expresses opinions about the good and bad qualities of books, music, etc.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>The <strong>high collar</strong> and <strong>cinched waist</strong> reflect a simpler, more violent time.</p>

  </div>
<blockquote>
<p><strong>High collar</strong> is a  fashion detail, prevalent in different periods of history, often stands for formality, modesty, or status.<br><strong>Cinched waist</strong> refers to a waist that has been made smaller or more slender by compression, often using corset or belts. Throughout history, a cinched or tighty-laced waist was beauty standard in various cultures, sybolizing femininity.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>The material is <strong>a blend of taffeta</strong> and high-density body armor.</p>

  </div>
<blockquote>
<p>This is a crisp, smooth, plain woven fabric made from silk or synthetic fibers. It’s known for its shiny surface and is often used in evening dresses.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>Must have <strong>tiny waist</strong>. </p>

  </div>
<blockquote>
<p>To have a slender or narrow waist.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_22.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>Thanks for doing this, <strong>padre</strong>.<br>Come here, let me squeeze you! Oh, you are so <strong>squishy</strong>!</p>

  </div>
<blockquote>
<p>A person who is qualified to perform religious duties and ceremonies.<br><strong>Squishy</strong> means soft and wet.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_23.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small white">
    <p>Villains, this is no longer a <strong>coronation</strong>! It is an <strong>execution</strong>!</p>

  </div>
<blockquote>
<p><strong>Coronation</strong> refers to a ceremony where a monarch is formally crowned and <strong>inaugurated</strong>(the act of formally introducing or initiating sth, particularly with a ceremony ).<br><strong>Execution</strong> refers to the act of killing sb, especially as a legal punishment.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    <p>And just for the record, my little <strong>deviled eggs</strong>, you can thank Kevin for what I’m about to do to you!</p>

  </div>
<blockquote>
<p><strong>Deviled eggs</strong> traditionally refers to a dish made from hard-boiled eggs.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p>You <strong>imbecile</strong>! Have fun exploding!</p>

  </div>
<blockquote>
<p>It’s an offensive word used to insult someone’s intelligence or decision-making, implying they are stupid or foolish.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    <p>The countty owes you a great debt of <strong>gratitude</strong>.</p>

  </div>
<blockquote>
<p><strong>Gratitude</strong> means a feeling of thankfulness or appreciation. Essentially, the statement is a formal way of saying “Thank you for what you’ve done for the country.”</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>Bob, you were a wise and <strong>noble</strong> king for all of eight hours.</p>

  </div>
<blockquote>
<p><strong>Noble</strong> describes sb with high moral principles, good character, and honor.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_24.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>Oh，<strong>spectacular</strong>!</p>

  </div>
<blockquote>
<p>Very impressive.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/min_25.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small blue">
    <p>For you, I have this beautiful, <strong>super-duper</strong>, incredible snow globe!</p>

  </div>
<blockquote>
<p>This is an informal term used to emphasize the greatness or impressiveness of sth. It’s a way of saying “really great” or “exceptional”.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>For your bravery and <strong>valor</strong>, I am knighting you.</p>

  </div>
<blockquote>
<p><strong>Valor</strong> refers to great courage in the face of danger, especially in battle.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>Things look <strong>bleak</strong>, baby, I’m not gonna lie!</p>

  </div>
<blockquote>
<p><strong>Bleak</strong> describes a situation that is not hopeful or encouraging, one that is <strong>gloomy</strong>(without much hope of success or happiness in the future), <strong>desolate</strong>(very lonely and unhappy), or <strong>dreary</strong>(makes you feel sad; dull and not interesting).</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    <p>Are you really going to allow that little penguin to <strong>make off</strong> with my crown?</p>

  </div>
<blockquote>
<p><strong>Make off</strong> means to leave quickly, especially to escape or to steal sth.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>He was <strong>cunning</strong>, he was evil, he was perfect.</p>

  </div>
<blockquote>
<p><strong>Cunning</strong> describes sb who is skilled in achieving their goals by <strong>deceit</strong>(dishonest behaviour that is intended to make sb believe sth that is not true) or <strong>evasion</strong>(the act of avoiding sb of avoiding sth that you are supposed to do). It suggests cleverness, especially in a <strong>sly</strong>(acting or done in a secret or dishonest way, often intending to trick people) or <strong>manipulative</strong>(Skilful at influencing sb or forcing sb to do what you want, often in an unfair way) way.</p>
</blockquote>
<h1 id="Angry-Bird"><a href="#Angry-Bird" class="headerlink" title="Angry Bird"></a>Angry Bird</h1>
  <div class="note p-4 mb-4 rounded-small blue">
    <p>I have no choice but to impose the maximum <strong>penalty</strong> allowed by the law.</p>

  </div>
<blockquote>
<p>Penalty refers to a punishment or consequence imposed for wrongdoing, violation, or offense. This punishment is typically given as a result of breaking rules or laws.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>And I’m just super <strong>psyched</strong> to be taking this journey with you! You’re gonna have a <strong>blast</strong>.</p>

  </div>
<blockquote>
<p><strong>Psyched</strong> is slang that means being very excited, enthusiastic, or eager about something.<br><strong>Blast</strong> is slang for a great and enjoyable time or experience.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_1.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small grey">
    <p>You have shared with us the wonders of your <strong>quaint</strong>, simple little island.</p>

  </div>
<blockquote>
<p>Quaint is adjective that describes sth as having an old-fashioned charm or being attractively unusual or <strong>peculiar</strong>(strange or unusual, especially in a way that is unpleasant or worrying) in design or appearance.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_12.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>Say hello to the <strong>slingshot</strong>!</p>

  </div>
<blockquote>
<p><strong>Slingshot</strong> refers a small handheld weapon that consists of a Y-shaped frame with an elastic band attached to the two top prongs.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_13.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small black">
    <p>The <strong>trampoline</strong>!</p>

  </div>
<blockquote>
<p>A piece of equipment that is used in gymnastics for doing jumps in the air.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_14.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>I am <strong>famished</strong>… -it’s chow time!</p>

  </div>
<blockquote>
<p><strong>Famished</strong> is an adjective that means extremely hungry.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_15.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>And now we’ve come to the <strong>prestigious Palms district</strong>.</p>

  </div>
<blockquote>
<p><strong>Prestigious</strong> is used to describe something that is admired or respected, often due to its high status, reputation, or importance.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_18.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small cyan">
    <p>My friend from the <strong>banquet</strong>.</p>

  </div>
<blockquote>
<p>A formal meal for a large number of people, usually for a special occasion.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>Water is the softest thing, yet it can <strong>penetrate</strong> mountains and earth.</p>

  </div>
<blockquote>
<p><strong>Penetrate</strong> means to pass into or through, often by overcoming resistance.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>What the caterpillar calls the end, the world calls a butterfly.</p>

  </div>
<blockquote>
<p>It suggests that what may seem like an ending or a loss can actually be the start of something beautiful and new when viewed from a different perspective.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>That’s very <strong>lifelike</strong>.</p>

  </div>
<blockquote>
<p><strong>Lifelike</strong> describes sth that closely resembles or imitates real life.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_16.png"
                      class="" width="500"
                >
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_17.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>How do we know you’re not <strong>fugitives</strong> of the law?</p>

  </div>
<blockquote>
<p><strong>Fugitives</strong> refers to persons who are fleeing or escaping from <strong>custody</strong> (being held by police or other authorities, especially while awaiting trial), typically to avoid arrest or imprisonment. A <strong>fugitive</strong> can be someone who has committed a crime, is suspected of a crime, or has benn convicted and is avoiding serving their sentence.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_2.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small white">
    <p>You might want to shield your eyes from the sparkle of those <strong>trophies</strong>.</p>

  </div>
<blockquote>
<p><strong>Trophies</strong> refers to prizes or awards given for a particular achievement.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_3.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>Looking through <strong>binoculars</strong>, spying on old ladies.</p>

  </div>
<blockquote>
<p><strong>Binoculars</strong> refers to an optical instrument with a lens for each eye, used for magnifying and viewing distant objects.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_4.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small black">
    <p>Thanks for your <strong>hospitality</strong>.</p>

  </div>
<blockquote>
<p><strong>Hospitality</strong> refers to the friendly and generous reception and entertainment of guests, visitors, or strangers.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_5.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>But how do we get from here to there? I am not <strong>aquatic</strong> in the least.</p>

  </div>
<blockquote>
<p>When referring to animals or plants, “aquatic” means living or growing in water. In this context, when a person uses the term “aquatic,” they are metaphorically suggesting a natural ability or comfort in water, typically in activities like swimming.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>Comeon, we’re birds. We’re <strong>descended</strong> from dinosaurs.</p>

  </div>
<blockquote>
<p><strong>Descended</strong> means to have originated from or be related to a particluar ancestor or past form.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>And I don’t need any clam, <strong>detached</strong>, happy birds.</p>

  </div>
<blockquote>
<p>Detached describes someone who is not emotionally involved or connected. A detached individual can seem indifferent, aloof, or distant.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_6.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p>I told you not to <strong>mess with</strong> me!</p>

  </div>
<blockquote>
<p>To comfront or challenge sb, oftern aggressively.(to tease or play a joke on sb in latter plot)</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_19.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>The <strong>treacherous</strong> birds have repaid our friendship with an <strong>unprovoked</strong> act of aggression.</p>

  </div>
<blockquote>
<p><strong>Treacherous</strong> is used to describe someone or sth that is guilty of betrayal or <strong>deception</strong>(the act of deceiving or misleading someone). It implies untrustworthiness or unreliability.<br><strong>Unprovoked</strong> describes an action that is done without any apparent reason or justification. It indicates that the act of aggression was initiated without any prior <strong>provocation</strong> (the act of doing or saying sth deliberately in order to make sb angry or upset) or reason from the other party.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_7.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p>You’re wrecking my house…You wrecked my houes…Well, now <strong>we’re even</strong>.</p>

  </div>
<blockquote>
<p><strong>Wreck</strong> means to destroy or cause significant damage to sth.<br><strong>We’re even</strong> is an idiomatic expression that means both parties are now equal in terms of debts or <strong>obligations</strong> (a duty or responsibility to undertake an action or a commitment), often after one person has retaliated or made up for a wrong done to them. </p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>I’m not <strong>blushing</strong>. I’m just red.</p>

  </div>
<blockquote>
<p>Blushing refers to the <strong>involuntary reddening</strong> (the automatic or unintentional change in skin color to a reddish hue) of the face, usually triggered by emotions such as embarrassment, shame, or shyness.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_8.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>You know, back when I was angry, that would have really <strong>ticked me off</strong>.</p>

  </div>
<blockquote>
<p><strong>Ticked me off</strong> is an idiomatic expression that means made me angry or annoyed me.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>How did you guys find the time to <strong>pull this off</strong>? This is why we went to go get <strong>pedicures</strong>, isn’t it?<br>Nope. We got <strong>pedicures</strong> because we’re worth it.</p>

  </div>
<blockquote>
<p><strong>Pull this off</strong> is an idiomatic expression that means to successfully achieve or complete something, especially when faced with difficulties or challenges.<br>A <strong>pedicure</strong> is a <strong>cosmetic</strong> (pertains to enhancing or improving appearance) treatment for the feet and toenails.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/agb_9.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>Well, this just got awkward.<br>That’ really <strong>insensitive</strong>.</p>

  </div>
<blockquote>
<p>Insensitive is used to describe sb or sth showing a lack of consideration for another’s feelings, needs, or particular situations. It indicates a lack of empathy or awareness.</p>
</blockquote>



  <div class="note p-4 mb-4 rounded-small black">
    <p>Want to go <strong>get a bite</strong>?<br>Forget it. Let’s just go home.</p>

  </div>
<blockquote>
<p><strong>Get a bite</strong> is an informal way of saying have something to eat or go out to eat.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    <p>Roommates! I can’t wait to make a <strong>chores list</strong>.</p>

  </div>
<blockquote>
<p>The term chores list refers to a list of household tasks or duties that need to be completed.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p>He’s <strong>hatching</strong> a new plan.</p>

  </div>
<blockquote>
<p>Originally, <strong>hatching</strong> refers to the process by which an animal breaks out of an egg. In this context, it means that he is devising, forming, or coming up with a new plan or idea metaphorically.</p>
</blockquote>

<h1 id="A-Million-Miles-Away"><a href="#A-Million-Miles-Away" class="headerlink" title="A Million Miles Away"></a>A Million Miles Away</h1>
  <div class="note p-4 mb-4 rounded-small blue">
    <p>A <strong>hostile</strong> rocket… mid-flight?</p>

  </div>
<blockquote>
<p>Hostile describe sth that is unfriendly or <strong>adversarial</strong> (involving people who are in opposition and who make attacks on each other) in nature.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_1.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>Having a clear mind during an emergency is <strong>imperative</strong>.</p>

  </div>
<blockquote>
<p>It means vital importance or crucial, the statement emphasizes that it’s essential to maintain a clear and focused mindset during emergency situations.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_2.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p>I’m <strong>busting my ass</strong>. My body hurts. I can’t sleep.</p>

  </div>
<blockquote>
<p>The phrase is an informal and <strong>coarse</strong> (rude and offensive) expression that means working very hard or putting in a lot of effort, often to the physical or mental exhaustion.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>It’s as though the whole place is <strong>sacred</strong>.</p>

  </div>
<blockquote>
<p><strong>Sacred</strong> describes sth that is regarded with great respect and <strong>reverence</strong> (a feeling of great respect or admiration for sb&#x2F;sth), expecially in a spiritual or religuous context.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_3.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>I, too, had to work so hard. <strong>Tenacity</strong> is a superpower.</p>

  </div>
<blockquote>
<p><strong>Tenacity</strong> refers to the quality of being very determined, persistent, or unyielding, even in the face of challenges or <strong>adversity</strong> (a difficult or unpleasant situation).</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>The safety divers, they’re only there as a <strong>precaution</strong>.</p>

  </div>
<blockquote>
<p><strong>Precaution</strong> refers to a measure taken in advance to prevent something dangerous or undesirable from happening.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_4.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>Any assistance from the divers will <strong>disqualify</strong> you.</p>

  </div>
<blockquote>
<p>Disqualify means to declare someone <strong>ineligible</strong> (not having the necessary qualifications to have or to do sth) or unfit to participate in a particular activity or to be considered for a particular honor due to a specific reason or action.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p>Flight director LeRoy Cain is now instructing controllers to get out their <strong>contingency</strong> procedures.</p>

  </div>
<blockquote>
<p><strong>Contingency</strong> refers to a future event or circumstance that is possible but cannot be predicted with certainty or one that could cause problems.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_5.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small yellow">
    <p>A piece of <strong>foam insulation</strong> broke off the external tank and struck the left wing of the orbiter.</p>

  </div>
<blockquote>
<p><strong>Foam insulation</strong> refers to a material used to insulate and protect various structures, particularly in aerospace contexts.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/amm_6.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small grey">
    <p><strong>Folks down</strong> at the Selection Office, would like to have a word.</p>

  </div>
<blockquote>
<p><strong>Folks down</strong> is an informal way to refer to the people or group of individuals at a particular location.</p>
</blockquote>
<h1 id="Zootopia"><a href="#Zootopia" class="headerlink" title="Zootopia"></a>Zootopia</h1>
  <div class="note p-4 mb-4 rounded-small blue">
    <p>Fear. <strong>Treachery</strong>. <strong>Bloodlust</strong>. Thousands of years ago… these were the forces that ruled our world. A world where <strong>prey</strong> were scared of <strong>predators</strong>.</p>

  </div>
<blockquote>
<p><strong>Treachery</strong> refers to betrayal or deceptive action. It evokes a sense of mistrust and the idea that alliances could be easily broken, leading to chaos and conflict.<br><strong>Bloodlust</strong> describes an intense an violent desire to kill or injure. It paints a picture of a world dominated by aggression and the desire for <strong>conquest</strong>.<br><strong>Prey</strong> These are animals that are hunted and killed by other animals for food.<br><strong>Predator</strong> These are animals that hunt, kill, and eat other animals. They are often at the top of the food chain and are seen as a threat to those lower down.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>And predators had an uncontrollable biological urge to <strong>maim</strong> and <strong>maul</strong>…</p>

  </div>
<blockquote>
<p><strong>Maim</strong> To injure severely, especially in such a way that part of the body is permanently damaged or disfigured.<br><strong>Maul</strong> To handle or treat roughly, often causing injury. In the context of animals, it means to attack or injure by biting, striking, or tearing at.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>Back them, the world was divided in two. <strong>Vicious</strong> predator or <strong>meek</strong> prey.</p>

  </div>
<blockquote>
<p><strong>Vicious</strong> denotes sb&#x2F;sth that is aggressive, cruel. or violent.<br><strong>Meek</strong> describes sb&#x2F;sth that is gentle, <strong>submissive</strong>, or lacking in force or <strong>assertiveness</strong>.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/zoo_1.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small blue">
    <p>And every young mammal has <strong>multitudinous</strong> opportunities.</p>

  </div>

<blockquote>
<p><strong>Multitudinous</strong> means very numerous or existing in great numbers.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small orange">
    <p>I don’t have to <strong>cower</strong> in a <strong>herd</strong> anymore.</p>

  </div>

<blockquote>
<p>To <strong>cower</strong> means to shrink away or crouch down, typically out of fear or submission.<br>A <strong>herd</strong> refers to a large group of animals, especially hoofed mammals, that live together or are kept together as livestock.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small pink">
    <p>I don’t have to be a lonely hunter anymore. Today, I can hunt for tax <strong>exemptions</strong>. I’m gonna be an <strong>actuary</strong>.</p>

  </div>

<blockquote>
<p>A tax <strong>exemption</strong> is a monetary exclusion that reduces the taxable income.<br>An <strong>actuary</strong> is a business professional who deals the financial impact of risk and uncertainty.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    <p>Carrot farming is a <strong>noble</strong> profession.</p>

  </div>

<blockquote>
<p><strong>Noble</strong> means having or showing fine personal qualities or high moral principles.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/zoo_2.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small green">
    <p>Hey! You heard her. <strong>Cut it out</strong>.</p>

  </div>

<blockquote>
<p>When sb says <strong>cut it out</strong>, they are telling someone else to stop what they are doing, especially if it is annoying, troublesome, or inappropriate.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    <p>Nice <strong>costume</strong>, loser.</p>

  </div>

<blockquote>
<p><strong>Costume</strong> refers to a set of clothes worn by an actor for a particular role or by sb attending a masquerade or a special event.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/zoo_3.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small red">
    <p>Listen up, <strong>cadets</strong>.</p>

  </div>

<blockquote>
<p><strong>Cadets</strong> are individuals who are in training to become members of military organization or who are undergoing some form of structured training program, often in preparation for a future role in the military or a related field. </p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    <p><strong>Filthy</strong> toilet! You’re dead, <strong>Fluff</strong> Butt.</p>

  </div>

<blockquote>
<p><strong>Filthy</strong> is used to describe a toilet that is very dirty, unsanitary, or unclean.<br><strong>Fluff</strong> refers soft animal fur or bird feathers, that is found especially on young animals or birds.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    <p>As mayor of Zootopia, I am proud to announce that my <strong>Mammal Inclusion Initiative</strong> has produced its first police academy graduate.</p>

  </div>

<blockquote>
<p>It suggests a program or policy that has been put in place to promote the inclusion of all mammals, regardless of their species, size, or other characteristics, in the society of Zootopia. The goal of this initiative is likely to ensure that mammals of all types are represented and have equal opportunities, particularly in professions like law enforcement, which is indicated by the mention of the police academy.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    <p><strong>Valedictorian</strong> of her class, ZPD’s very first rabbit officer, Judy Hopps!</p>

  </div>

<blockquote>
<p>The student who has the highest marks&#x2F;grades in a particular group of students and who gives the valedictory speech at a graduation ceremony.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small blue">
    <p>You play <strong>cribbage</strong> with a <strong>weasel</strong>.</p>

  </div>

<blockquote>
<p><strong>Cribbage</strong> is a card game that involves playing and grouping cards in combinations to gain poing.<br>A <strong>weasel</strong> is a small mammal known for its slender body and keen hunting skills.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/zoo_4.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small orange">
    <p>The <strong>deterrent</strong> and the <strong>repellent</strong>, that’s all she needs.</p>

  </div>

<blockquote>
<p>A <strong>deterrent</strong> is sth that discourages or is intended to discourage sb from doing sth. It’s often used in the context of preventing undesirable actions or behaviors by making them seem unappealing or risky.<br>A <strong>repellent</strong> is a substance that drives away certain things, often insects or animals.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/10/05/Lean-English-With-Movies-and-TV-Series/zoo_5.png"
                      class="" width="500"
                >


  <div class="note p-4 mb-4 rounded-small pink">
    <p><strong>Terrific</strong>! Everyone wins!</p>

  </div>

<blockquote>
<p><strong>Terrific</strong> used to describe sth as extremely good. It’s an expression of enthusiasm and approval.</p>
</blockquote>

  <div class="note p-4 mb-4 rounded-small cyan">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small green">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small white">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small red">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small black">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small yellow">
    
  </div>

<blockquote>
</blockquote>

  <div class="note p-4 mb-4 rounded-small grey">
    
  </div>

<blockquote>
</blockquote>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>LLM + Robotics</title>
    <url>/2024/09/12/LLM-Robotics/</url>
    <content><![CDATA[<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><blockquote>
<p>The way we program robots today is rigid! They can’t be flexibly re-programmed by everyday users.</p>
</blockquote>
<p>传统机器人执行pick and place任务的流程:</p>
<ol>
<li>利用cv算法检测出要抓取的目标物体;</li>
<li>计算机械臂该用什么姿势抓取物体;</li>
<li>移动机械臂到抓取姿势并抓取</li>
<li>根据要求移动机械臂到指定位置;</li>
<li>计算机械臂放下物体的姿势并放下;</li>
</ol>
<p>传统机器人控制中存在的弊端:</p>
<ul>
<li>对于每一个任务, 现实中有大量边缘情况, 需要设计更复杂的规则来应对;</li>
<li>对于每一个任务都需要人类专家设计规则, 但现实中复杂任务数不胜数, 且任务之间很难融洽;</li>
</ul>
<p>Two Fundamental Challenges:</p>
<ul>
<li>Ground natural language in robot state.</li>
</ul>
<p>如何把自然语言转换成能够被机器人识别, 处理的状态?</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/1.png"
                      class="" width="500"
                >

<p>例如抓取桌子最左边的红色方块, 需要机器人识别和定位到桌子, 桌子上的物体, 红色的方块, 以及相对位置关系.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/2.png"
                      class="" width="500"
                >

<ul>
<li>Planning actions to solve a task.</li>
</ul>
<p>如何规划合适的动作来完成任务?</p>
<p>例如”把货架的苹果放到桌子上”, 整个执行流程随着任务的复杂程度不断增加;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/3.png"
                      class="" width="500"
                >

<p>同样的, 多个物体的task planning.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/4.png"
                      class="" width="500"
                >


<p>Microsoft提出了Robotics with ChatGPT的设计原则:</p>
<ol>
<li>设计一个task-relevant的API Library, 这个库将high-level的自然语言指令转换为low-level的机器人动作.</li>
<li>给chatgpt设计prompt, 用来描述任务目标并且需要陈输出high-level的库, 这些prompt也会包含任务的约束;</li>
<li>用户通过实验结果不断优化prompt来优化chatgpt的输出;</li>
<li>如果用户对目前的chatgpt的输出感到满意, 则最后部署到实际的机器人上.</li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/5.png"
                      class="" width="1000"
                >

<h2 id="科研机器人设计思路"><a href="#科研机器人设计思路" class="headerlink" title="科研机器人设计思路"></a>科研机器人设计思路</h2><p>目标是设计出一个机器人, 能够泛化的执行一些科研任务, 例如做材料实验, 化学实验等;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/6.png"
                      class="" width="800"
                >


<p>LLM在观测后输出一整个计划的行动序列, 就需要LLM对环境的未来走向有很好的了解.</p>
<h3 id="Tricks-for-Improving-Plan"><a href="#Tricks-for-Improving-Plan" class="headerlink" title="Tricks for Improving Plan"></a>Tricks for Improving Plan</h3><ul>
<li>执行前Self-refine</li>
</ul>
<p>在LLM生成plan后, 使用另一个LLM (或者人类设定的启发式评估函数) 来评估其好坏, 并且给出指导性意见;</p>
<p>但在这种情况下, LLM常常无法正确定位出错误; 通常会出现自己误导自己的情况;</p>
<ul>
<li>Self-consistency</li>
</ul>
<p>LLM通过多次生成规划并且选择最优的生成结果.</p>
<ul>
<li>执行后Self-reflection</li>
</ul>
<p>让LLM从环境的反馈+自身反思中优化计划;</p>
<p>环境的反馈可能包括以下失败的原因:</p>
<ul>
<li>生成的动作不合规范, 没有正确调用action function;</li>
<li>没有满足动作的执行条件, 如手中没有物体时, 执行放下物体的动作;</li>
<li>LLM自己以为生成的plan已经完成了任务, 实际任务还没有完成;</li>
<li>生成的plan有很多冗余动作, 导致动作序列太长;</li>
</ul>
<p><strong>Replan机制: 结合ReAct与Planning</strong></p>
<p>生成plan之后, 先执行plan获得环境的反馈和新观测信息后, 从当前状态继续规划;<br>同时, Replan允许LLM分析解决问题, 如可以先执行探索plan, 再根据结果调整和生成后续plan.</p>
<p><strong>Tree search</strong></p>
<p>如果计划未通过self-evaluation或执行失败, 在计划中的各步思考有哪些可行解决方案;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/7.png"
                      class="" width="800"
                >

<p>使用DFS或BFS, 在叶节点进行self-evaluation, 最终选择一条最优计划;</p>
<p>Tree search的缺点是</p>
<ul>
<li>消耗的tokens数大大增加;</li>
<li>容易在错误的分支上花费很多搜索;</li>
</ul>
<p><strong>State tracking</strong></p>
<p>预测出操作一步之后, 环境会发生什么样的变化, 对下一步的状态进行估计;</p>
<p>原本LLM应该包含这一步, 但是由于大模型的幻觉, 可能对下一步的状态估计不准确;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/8.png"
                      class="" width="800"
                >

<p>可以使用另一个LLM作为world model来预测每一步动作后的观测;</p>
<p><strong>问题分析</strong></p>
<ul>
<li>不着急直接输出Plan, 先让LLM自己分析一下这个问题: 这个问题有什么特点, 有什么易错点, 可以借助什么知识;</li>
<li>Step back: 退一步看问题, 先针对问题中的核心概念提一个相关问题, 再回答原问题;</li>
<li>让LLM重新强调一下输入环境和规则的重点, 有助于提取关键信息和进一步思考;</li>
</ul>
<h3 id="Plan-with-Code"><a href="#Plan-with-Code" class="headerlink" title="Plan with Code"></a>Plan with Code</h3><p>当再LLM的API输入high-level action之后得到的low-level actions sequence, 还可以让LLM直接生成代码, 例如生成Python代码;</p>
<p>其优点有:</p>
<ul>
<li>利用代码的逻辑能力和可直接执行性;</li>
<li>有更高的自由性, 不只是调用已有的high-level action;</li>
<li>有更好的复用性, 可以利用他人的代码以及保存已有代码;</li>
</ul>
<p>甚至可以让LLM在code中自行定义有用的function;</p>
<h3 id="Replan机制"><a href="#Replan机制" class="headerlink" title="Replan机制"></a>Replan机制</h3><p>如果计划遇到问题, 可以重新来过然后优化计划, 但是现实中常常不能重新来, 要在犯错后继续规划来完成任务.</p>
<p>需要做的事情:</p>
<ul>
<li>环境返回执行错误的原因,以及当前最新状态和观测</li>
<li>让LLM解释犯错的原因</li>
</ul>
<p>可以使用LLM worker, 监视每一步的执行结果, 或者在Plan code里面设定一些checkpoint, 保证环境变量按照计划执行;</p>
<h2 id="A-Inspector-based-on-Markov-Chain-for-low-level-action-sequence-An-Innovative-Idea"><a href="#A-Inspector-based-on-Markov-Chain-for-low-level-action-sequence-An-Innovative-Idea" class="headerlink" title="A Inspector based on Markov Chain for low-level action sequence (An Innovative Idea)"></a>A Inspector based on Markov Chain for low-level action sequence (An Innovative Idea)</h2><p>马尔可夫链数学基础参考教程:</p>
<ul>
<li><a class="link"   href="https://math.libretexts.org/Bookshelves/Applied_Mathematics/Applied_Finite_Mathematics_(Sekhon_and_Bloom)/10%3A_Markov_Chains/10.01%3A_Introduction_to_Markov_Chains" >Introduction to Markov Chains<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/12/LLM-Robotics/9.png"
                      class="" width="600"
                >

<p>由于LLM以及大模型存在的幻觉, low-level action sequence本身的action或者sequence是有可能出错的;</p>
<p>对于像生物, 材料, 化学等实验任务, 必须保证实验的正确性和严谨性, 同时由于这些理科实验, 必须满足严格的逻辑, 因此借助马尔可夫链来检验low-level action sequence的正确性;</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://github.com/GT-RIPL/Awesome-LLM-Robotics" >Awesome-LLM-Robotics<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://zhuanlan.zhihu.com/p/668053911" >Robotics+LLM系列通过大语言模型控制机器人<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://www.microsoft.com/en-us/research/articles/chatgpt-for-robotics/" >ChatGPT for Robotics: Design Principles and Model Abilities<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://www.bilibili.com/video/BV1JgsxebEf5/?spm_id_from=333.788&vd_source=3c842e78ba17ee7afd3375b35f554ca1" >LLM for Robotics前沿- 系统性讲解大语言模型如何助力通用机器人<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Robotics</category>
      </categories>
  </entry>
  <entry>
    <title>ManimCE</title>
    <url>/2023/05/21/ManimCE/</url>
    <content><![CDATA[<blockquote>
<p>ManimCE 库（manim community edition）的前身是 manim 库，用于做数学可视化图像与动画，由 Grand Sanderson 创建，也就是 3Blue1Brown<br>的作者。它是一个开源的 python 库。</p>
</blockquote>
<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><p><a class="link"   href="https://docs.manim.community/en/stable/" >Manim Community Edition<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="新建工程文件夹"><a href="#新建工程文件夹" class="headerlink" title="新建工程文件夹"></a>新建工程文件夹</h3><p>在vscode中新建一个文件夹，然后新建一个<code>.py</code>为后缀的文件，即可开始code。</p>
<h3 id="生成动画"><a href="#生成动画" class="headerlink" title="生成动画"></a>生成动画</h3><div class="code-container" data-rel="Powershell"><figure class="iseeu highlight powershell"><table><tr><td class="code"><pre><span class="line">manim <span class="literal">-pql</span> xxxx.py xxxxx</span><br></pre></td></tr></table></figure></div>
<p>例如：<code>gallery.py</code></p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> manim <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GraphAreaPlot</span>(<span class="title class_ inherited__">Scene</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">construct</span>(<span class="params">self</span>):</span><br><span class="line">        ax = Axes(</span><br><span class="line">            x_range=[<span class="number">0</span>, <span class="number">5</span>],</span><br><span class="line">            y_range=[<span class="number">0</span>, <span class="number">6</span>],</span><br><span class="line">            x_axis_config=&#123;<span class="string">&quot;numbers_to_include&quot;</span>: [<span class="number">2</span>, <span class="number">3</span>]&#125;,</span><br><span class="line">            tips=<span class="literal">False</span>,</span><br><span class="line">        )</span><br></pre></td></tr></table></figure></div>
<p>生成动画</p>
<div class="code-container" data-rel="Powershell"><figure class="iseeu highlight powershell"><table><tr><td class="code"><pre><span class="line">manim <span class="literal">-pql</span> gallery.py GraphAreaPlot</span><br></pre></td></tr></table></figure></div>
<p>四种画质：low, medium, high, 4k，分别对应<code>-ql -qm -qh -qk</code></p>
<h2 id="绘制函数图像"><a href="#绘制函数图像" class="headerlink" title="绘制函数图像"></a>绘制函数图像</h2><div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> manim <span class="keyword">import</span>*</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span>*</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inverse_sinh</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> np.log(x + np.sqrt(x ** <span class="number">2</span> + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inverse_cosh</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> np.log(x - np.sqrt(x ** <span class="number">2</span> - <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HyperbolicFunction</span>(<span class="title class_ inherited__">Scene</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">construct</span>(<span class="params">self</span>):</span><br><span class="line">        self.camera.background_color = WHITE</span><br><span class="line">        ax = Axes(</span><br><span class="line">            x_range=[-<span class="number">10</span>, <span class="number">10</span>],</span><br><span class="line">            y_range=[-<span class="number">10</span>, <span class="number">10</span>],</span><br><span class="line">            axis_config=&#123;<span class="string">&quot;color&quot;</span>: GREEN&#125;,</span><br><span class="line">            tips = <span class="literal">False</span>,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        labels = ax.get_axis_labels()</span><br><span class="line"></span><br><span class="line">        curve_1 = ax.plot(<span class="keyword">lambda</span> x: np.sinh(x), color=BLUE, x_range = [-<span class="number">10</span>,<span class="number">10</span>])</span><br><span class="line">        curve_2 = ax.plot(<span class="keyword">lambda</span> x: np.cosh(x), color=RED, x_range = [<span class="number">10</span>,<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line">        sinh_label = ax.get_graph_label(curve_1, label=<span class="string">&quot;\\sinh(x) = \\frac&#123;e^x - e^&#123;-x&#125;&#125;&#123;2&#125;&quot;</span>, x_val= <span class="number">8</span>, direction=UP / <span class="number">2</span>)</span><br><span class="line">        cosh_label = ax.get_graph_label(curve_2, label=<span class="string">&quot;\\cosh(x) = \\frac&#123;e^x + e^&#123;-x&#125;&#125;&#123;2&#125;&quot;</span>, x_val= -<span class="number">8</span>, direction=UP / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        self.add(ax, labels, sinh_label, cosh_label, curve_1, curve_2)</span><br></pre></td></tr></table></figure></div>


]]></content>
      <categories>
        <category>Mathematics</category>
      </categories>
  </entry>
  <entry>
    <title>Presentation Improvement</title>
    <url>/2023/05/21/Presentation-Improvement/</url>
    <content><![CDATA[<blockquote>
<p>Using chatgpt to improve my English presentation.</p>
</blockquote>
<p><strong>Prompts:</strong></p>
<p>I want you act as an English teacher to improve my presentation. You can give a topic to me. And I will give a paragraph by myself. After that, you must proofread and give advance and more correct expression to my essay. And rewrite it.</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>💡Activate <code>Code Spell Checker</code> plugins in VSCode</p>

  </div>

<blockquote>
<p>半年左右更新一次。</p>
</blockquote>
<h2 id="Robotics-in-Agriculture"><a href="#Robotics-in-Agriculture" class="headerlink" title="Robotics in Agriculture"></a>Robotics in Agriculture</h2><p>I believe that robots can play an significant role in agriculture. For example, scientists can develop drones equipped with cameras to grow and monitor crops more effectively. These drones can inspect crops in a timely manner, detecting any issues such as pests or diseases. Additionally, they can precisely apply fertilizers or pesticides, thus reducing waste and minimizing environmental damage. Overall the use of robots in agriculture has the potential to increase productivity, reduce costs, and improve sustainability.</p>
<h2 id="Regular-Exercise"><a href="#Regular-Exercise" class="headerlink" title="Regular Exercise"></a>Regular Exercise</h2><p>Ladies and gentlemen, today I’d like to discuss the myriad benefits of regular exercise. It is widely recognized that engaging in physical activity can do wonders for our bodies, both in terms of improving our physical fitness and bolstering our mental health.</p>
<p>One of the most well-known advantages of regular exercise is weight loss. Studies have shown that individuals who engage in regular physical activity are more likely to maintain a healthy weight and reduce their risk of obesity. Moreover, exercise has been linked to a decrease in the risk of a number of chronic illnesses, such as heart disease and type 2 diabetes.</p>
<p>But the benefits of exercise go beyond the physical realm. Regular exercise has been shown to promote better sleep, increase energy levels, and even enhance cognitive function, Furthermore, engaging in physical activity has been linked to decreased levels of anxiety and depression, and an overall improvement in mental health.</p>
<p>In my personal experience, I have found that playing basketball and boxing have had a profound impact on my overall well-being. These activities not only strengthen my body, but also invigorate my spirit and improve my concentration and productivity at work.</p>
<p>In conclusion, regular exercise is a powerful tool for improving our physical and mental health. By incorporating physical activity into our daily routines, we can reap the many rewards of a healthy and active lifestyle. Thank you for your attention.</p>
<h2 id="The-Impact-of-Artificial-Intelligence-on-Health-care"><a href="#The-Impact-of-Artificial-Intelligence-on-Health-care" class="headerlink" title="The Impact of Artificial Intelligence on Health care"></a>The Impact of Artificial Intelligence on Health care</h2><p>Artificial Intelligence is making a significant impact on various aspects of our daily lives, including health care. AI can provide prompt and straightforward preliminary diagnostics when we feel unwell, helping us understand our symptoms and identify potential health issues without having to visit a hospital for minor concerns.</p>
<p>AI also plays a crucial role in monitoring our overall health, offering personalized recommendations for nutrition and reminding us to engage in regular physical activity. In addition to these wellness applications, AI can provide valuable support during times of ailment.</p>
<p>For instance, AI-powered patient care can assist in administering medication and managing treatment plans, as well as offering companionship to alleviate feelings of solitary or isolation. These are just a few examples of how Artificial Intelligence is revolutionizing the health care landscape, improving the quality of care and empowering individuals to take control of their well-being.</p>
<h2 id="The-Impact-of-Technology-on-Society"><a href="#The-Impact-of-Technology-on-Society" class="headerlink" title="The Impact of Technology on Society"></a>The Impact of Technology on Society</h2><p>Technology has always played a significant role in society, shaping it though changes in the means of production. Looking back through history, we can see how technology has had a profound impact. As we embrace a more convenient lifestyle, technology continues to evolve, constantly influencing and improving our lives.</p>
<p>One recent example of technological advancement is ChatGPT, an artificial intelligence model released by OpenAI a few months ago. Its introduction immediately captured worldwide attention. Futhermore, the rise of AI poses the possibility of certain jobs being substituted in the coming years. This trend is also observed in factories, where robots are gradually replacing human workers. While these developments inspire optimism about increased productivity and efficiency, they also raise concerns and uncertainties.</p>
<p>Looking ahead, it is evident that technology will present greater challenges in the future. However, I remain hopeful that technology, when harnessed responsibly, can contribute to building a happier society that benefits all.</p>
<h2 id="Why-Students-should-be-Encouraged-to-Develop-the-Ability-to-Meet-Challenges"><a href="#Why-Students-should-be-Encouraged-to-Develop-the-Ability-to-Meet-Challenges" class="headerlink" title="Why Students should be Encouraged to Develop the Ability to Meet Challenges"></a>Why Students should be Encouraged to Develop the Ability to Meet Challenges</h2><p><strong>Develop Students’ Ability to Meet Challenges</strong></p>
<p>In today’s rapidly evolving world, students must be encouraged to develop the ability to meet challenges. This essay explores several compelling reasons why students should cultivate this vital skill set. By acquiring the ability to confront and overcome challenges, students will not only survive but thrive in a dynamic and competitive environment.</p>
<p>First and foremost, developing the ability to meet challenges equips students with the necessary skills to adapt to a changing job market. As technological advancements like artificial intelligence reshape industries, traditional jobs are disappearing, and new professions are emerging. By fostering resilience and adaptability, students will be better prepared to navigate these transitions and seize new opportunities.</p>
<p>Furthermore, in today’s interconnected world, interdisciplinary knowledge is crucial. It is no longer sufficient to excel in a single domain; students must also possess a broad range of skills. The ability to meet challenges encourages students to explore diverse subjects, enabling them to approach problems from multiple perspectives. This interdisciplinary mindset enhance their creativity and problem-solving abilities, giving them a competitive edge in their future careers.</p>
<p>In addition to personal benefits, developing the ability to fave challenges contributes to society as a whole. Individuals who are adept at tackling obstacles are more likely to become proactive and productive members of their communities. They possess the determination and drive to overcome hurdles, effect positive change, and make significant contributions to society’s progress.</p>
<p>In conclusion, it is crucial to encourage students to develop the ability to meet challenges. By doing so, they will not only thrive in a rapidly changing world but also contribute to the betterment of society. Equipping students with resilience, adaptability, and interdisciplinary skills prepares them for the future, enabling them to overcome obstacles and seize opportunities with confidence.</p>
]]></content>
      <categories>
        <category>English Learning</category>
      </categories>
  </entry>
  <entry>
    <title>Latex入门</title>
    <url>/2023/07/28/Latex%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="为什么用latex"><a href="#为什么用latex" class="headerlink" title="为什么用latex"></a>为什么用latex</h2><p>提高技术文档的工作效率，无论是官方的文档还是挑战杯、大创等等都需要大量的技术材料，这种专业的技术材料的写作通常都会使用latex进行排版，在战队编写文档的过程中，使用word容易出现格式不统一，整理和排版混乱的情况，在22赛季末的赛季总结排版工作中尤为严重，需要花费大量大量的时间和精力去做，因此使用latex进行替代，可以提前对文档进行排版，最终整合大家内容只需要进行一些简单的搬运工作即可完成最终的整合，同时能够形成风格统一，格式严整的文档，另外还可以使用git进行版本管理。</p>
<p>在做presentation中，通常还需要用到PPT，这里提供一个latex_beamer的解决方案，能够在短时间内，做出一份学术性强，比较academic的幻灯片，适合用于组会汇报，技术学术分享演讲等等。</p>
<h2 id="Latex写作环境配置"><a href="#Latex写作环境配置" class="headerlink" title="Latex写作环境配置"></a>Latex写作环境配置</h2><ol>
<li>给vscode安装插件（安装vscode记得选择添加到path）：</li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_1.png"
                      class="" width="300"
                >

<ol start="2">
<li>安装Texlive</li>
</ol>
<p><a class="link"   href="https://tug.org/texlive/" >Texlive官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>选择<code>install on Windows</code>-&gt;<code>install-tl-windows.exe</code></p>
<p>下载好之后右键<code>以管理员身份运行</code>开始安装：（自行选择安装位置）</p>
<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_2.png"
                      class="" width="500"
                >
    </div>
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_3.png"
                      class="" width="420"
                >
    </div>
</div>

<p>由于默认的编辑器并不好用，可以把<code>安装TeXworks前端</code>去掉；</p>
<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_4.png"
                      class="" width="300"
                >
    </div>
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_5.png"
                      class="" width="400"
                >
    </div>
</div>

<ol start="3">
<li>配置vscode</li>
</ol>
<p>安装好texlive重启vscode，<code>Ctrl+,</code>打开设置，右上角打开<code>setting.json</code></p>
<p>添加以下内容，用花括号包起来：</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.autoBuild.run&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.showContextMenu&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.intellisense.package.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.message.error.show&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.message.warning.show&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-outdir=%OUTDIR%&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.recipes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XeLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PDFLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BibTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LaTeXmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;latexmk&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex -&gt; bibtex -&gt; xelatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex -&gt; bibtex -&gt; pdflatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.clean.fileTypes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;*.aux&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.bbl&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.blg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.idx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.ind&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.lof&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.lot&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.out&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.toc&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.acn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.acr&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.alg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.glg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.glo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.gls&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.ist&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.fls&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.log&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.fdb_latexmk&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.autoClean.run&quot;</span><span class="punctuation">:</span> <span class="string">&quot;onFailed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.recipe.default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lastUsed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.view.pdf.internal.synctex.keybinding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double-click&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>安装SumatraPdf</li>
</ol>
<p>SumatraPdf是vscode+latex的好帮手，同时也是一个好用的pdf阅读器；</p>
<p><a class="link"   href="https://www.sumatrapdfreader.org/download-free-pdf-viewer" >官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>在<code>setting.json</code>中添加内容: (注意修改路径!)</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;latex-workshop.view.pdf.external.synctex.command&quot;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="string">&quot;D:/Code/SumatraPDF/SumatraPDF.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.view.pdf.external.synctex.args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;-forward-search&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;%TEX%&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;%LINE%&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;%PDF%&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></div>

<ol start="5">
<li>设置SumatraPdf</li>
</ol>
<p>选择<code>设置</code>，选择<code>高级选项</code>，然后打开一个<code>.txt</code>文件</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_6.png"
                      class="" width="400"
                >

<p>在最后一行加入以下内容：（注意修改vscode的安装路径, 可以在应用的属性中找到, 这里的斜杠不用改, 且需要更改两处）</p>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="code"><pre><span class="line">InverseSearchCmdLine = &quot;C:\Users\hwx_pc\AppData\Local\Programs\Microsoft VS Code\Code.exe&quot; &quot;C:\Users\hwx_pc\AppData\Local\Programs\Microsoft VS Code\resources\app\out\cli.js&quot;  --ms-enable-electron-run-as-node -r -g &quot;%f:%l&quot;</span><br><span class="line">EnableTeXEnhancements = true</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_7.png"
                      class="" width="400"
                >

<p>这样，就基本完成所有的配置了；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_8.png"
                      class="" width="400"
                >


  <div class="note p-4 mb-4 rounded-small info">
    <p>正向搜索：右键vscode界面，选择<code>SyncTex form cursor</code>，即可跳转到源代码对应pdf的内容。</p>

  </div>

<ol start="6">
<li>测试</li>
</ol>
<p>新建一个工程文件夹, 用vscode打开, 新建一个<code>.tex</code>文件;</p>
<p>输入:</p>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexart&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"></span><br><span class="line">你好！！！</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure></div>
<p>编写完内容后点击绿色的编译按钮，左下角显示编译成功后，在点击打开pdf，即可查看pdf和导出。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_9.png"
                      class="" width="500"
                >

<h2 id="Latex基础语法"><a href="#Latex基础语法" class="headerlink" title="Latex基础语法"></a>Latex基础语法</h2><h3 id="开头"><a href="#开头" class="headerlink" title="开头"></a>开头</h3><p>当我们需要一个中英文混排的文档的时候，需要对文档类型进行定义，一般使用命令<code>\documentclass[UTF8]&#123;ctexart&#125;</code>，UTF8是默认使用的编码类型，需要在命令中定义，否则可能会出现乱码。</p>
<p>所有位于<code>\begin&#123;document&#125;</code>之前的内容都被称作是导言区（preamble），写作开始前要在前言中做以下事情：</p>
<ul>
<li>设置文档的格式；</li>
<li>设定页面的尺寸；</li>
<li>在指定的文档中导入需要的宏包；<br>介于<code>\begin&#123;document&#125;</code>和<code>\end&#123;document&#125;</code>之间的内容称为文档的正文区。</li>
</ul>

  <div class="note p-4 mb-4 rounded-small tip">
    <p>💡在修改导言区的设置中，一般需要编译两次才能成功修改文档的结果，而在正文区写作只需要编译一次即可。</p>

  </div>

<h3 id="封面"><a href="#封面" class="headerlink" title="封面"></a>封面</h3><p>在导言区加入三行命令，分别是题目、作者和日期，同时在正文区加一行\maketitle，便可以实现一个简单的封面。</p>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexart&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\title</span>&#123;RoboMaster步兵发射机构研究&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;智宝&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line">你好！！！</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_10.png"
                      class="" width="600"
                >


<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\clearpage</span></span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br></pre></td></tr></table></figure></div>
<p>生成目录的命令需要编译两次！</p>
<h3 id="格式化命令"><a href="#格式化命令" class="headerlink" title="格式化命令"></a>格式化命令</h3><p>在正文区的写作中，在格式化命令的情况下，只需要将文字放入花括号即可。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_11.png"
                      class="" width="800"
                >

<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\textbf</span>&#123;在比赛中，由于常用的电机只用寥寥几种，若采用直驱的方式，则会有很多场景无法使用，例如英雄的Pitch控制，单独用一个RM6020电机会导致动力不足，</span><br><span class="line">采用两个6020则会显得过于笨重。&#125;</span><br><span class="line"><span class="keyword">\textit</span>&#123;若采用同步带，齿轮，连杆等传动结构，则能够实现控制的同时保证机构的灵活性，&#125;</span><br><span class="line"><span class="keyword">\underline</span>&#123;同时也能起到节省成本的作用。&#125;</span><br><span class="line"></span><br><span class="line">通过修改3508的减速箱的减速比，使得云台控制可以更换为重量更轻的3508电机使得整个机器人更加灵活。</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_13.png"
                      class="" width="600"
                >


<h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\section</span>*&#123;第一章&#125;</span><br><span class="line">这是第一章的内容</span><br><span class="line"></span><br><span class="line"><span class="keyword">\subsection</span>*&#123;第一章的子章节&#125;</span><br><span class="line">这是子章节的内容</span><br><span class="line"></span><br><span class="line"><span class="keyword">\section</span>*&#123;第二章&#125;</span><br><span class="line">这是第二章的内容</span><br><span class="line"></span><br><span class="line"><span class="keyword">\section</span>&#123;第三章&#125;</span><br><span class="line">这是第三章的内容</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_12.png"
                      class="" width="500"
                >

<h3 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h3><p>需要在导言区中添加<code>\usepackage&#123;graphicx&#125;</code>宏包。</p>
<p>然后在正文中添加<code>\includegraphics&#123;&#125;</code>，花括号中的内容是图片的文件名，图片文件需要放入tex的文件夹中，一般不需要写文件后缀名，或者也可以利用vscode直接选择对应的文件。</p>
<p>通常图片的尺寸会很不合适，因此需要将图片的尺寸与文本进行匹配。这里的<code>\textwidth</code>表示文本的宽度，这里的图片等于文本的0.5倍宽度。</p>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\includegraphics</span>[width=0.5<span class="keyword">\textwidth</span>]&#123;figure<span class="built_in">_</span>1&#125;</span><br></pre></td></tr></table></figure></div>
<p>正常情况下还需要将图片居中，给图片出一个标题，因此需要图片嵌套在一个figure的环境中，利用<code>\caption</code>指定图片的标题。利用<code>\centering</code>命令将图片居中。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_14.png"
                      class="" width="500"
                >

<p>有时候图片会产生错位, 需要进行以下修改:</p>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;float&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">\begin</span>&#123;figure&#125;[H]</span><br><span class="line">    <span class="keyword">\centering</span></span><br><span class="line">    <span class="keyword">\includegraphics</span>[width=0.5<span class="keyword">\textwidth</span>]&#123;figure<span class="built_in">_</span>1&#125;</span><br><span class="line">    <span class="keyword">\caption</span>&#123;图片&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;figure&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="列表的创建"><a href="#列表的创建" class="headerlink" title="列表的创建"></a>列表的创建</h3><div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;itemize&#125;</span><br><span class="line">    <span class="keyword">\item</span> 步兵</span><br><span class="line">    <span class="keyword">\item</span> 英雄</span><br><span class="line">    <span class="keyword">\item</span> 工程</span><br><span class="line"><span class="keyword">\end</span>&#123;itemize&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;enumerate&#125;</span><br><span class="line">    <span class="keyword">\item</span> 哨兵</span><br><span class="line">    <span class="keyword">\item</span> 飞镖</span><br><span class="line">    <span class="keyword">\item</span> 雷达</span><br><span class="line"><span class="keyword">\end</span>&#123;enumerate&#125;</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_15.png"
                      class="" width="500"
                >

<h3 id="数学公式"><a href="#数学公式" class="headerlink" title="数学公式"></a>数学公式</h3><ul>
<li>行内公式通过<code>$...$</code>进行填写；</li>
<li>行外公式利用<code>\begin&#123;equation&#125;...\end&#123;equation&#125;</code>环境进行填写。<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line">爱因斯坦在1905年发现的质能守衡方程为: <span class="built_in">$</span>E = mc<span class="built_in">^</span>2<span class="built_in">$</span></span><br><span class="line"></span><br><span class="line">拉普拉斯变换</span><br><span class="line"><span class="keyword">\begin</span>&#123;equation&#125;</span><br><span class="line">    F(p) = <span class="keyword">\int</span><span class="built_in">_</span>0<span class="built_in">^</span><span class="keyword">\infty</span> f(t)e<span class="built_in">^</span>&#123;-pt&#125;d t</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;</span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_16.png"
                      class="" width="500"
                ></li>
</ul>
<blockquote>
<p>补充：数学公式在tex中成一个体系语言，需要用到时上网查阅即可。另外也可以通过各种公式编辑器进行数学公式的输入。</p>
</blockquote>
<p><a class="link"   href="https://www.latexlive.com/" >在线LaTeX公式编辑器-编辑器<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="表格的用法"><a href="#表格的用法" class="headerlink" title="表格的用法"></a>表格的用法</h3><p>Latex的表格绘制比较麻烦，可以用表格生成器代替：</p>
<p><a class="link"   href="https://www.tablesgenerator.com/" >Table Generator<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>将代码直接复制到tex文件即可.</p>
<h3 id="Latex中文手册"><a href="#Latex中文手册" class="headerlink" title="Latex中文手册"></a>Latex中文手册</h3>

	<div class="row">
    <embed src="./lshort-zh-cn.pdf" width="100%" height="550" type="application/pdf">
	</div>




<h2 id="Latex制作幻灯片"><a href="#Latex制作幻灯片" class="headerlink" title="Latex制作幻灯片"></a>Latex制作幻灯片</h2><p>用latex做幻灯片的优点:</p>
<ul>
<li>学术性非常强;</li>
<li>兼容latex的各种命令, 方便移植;</li>
<li>编辑需要较强的逻辑性;</li>
<li>输出为pdf, 方便跨设备分享;</li>
</ul>
<p>利用<code>beamer</code>文档类型作为幻灯片格式，然后进行创作。</p>
<p>幻灯片的每一页都是一帧 frame, beamer的帧分为三类</p>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 标题帧</span></span><br><span class="line"><span class="keyword">\frame</span>&#123;<span class="keyword">\titlepage</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 普通帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[&lt;对齐方式&gt;]<span class="keyword">\frametitle</span>&#123;帧标题&#125;    <span class="comment">% 对齐方式可以选择 c 和 t，分别是居中和从上往下</span></span><br><span class="line">内容</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 空白帧（空白帧没有标题）</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[plain]</span><br><span class="line">内容</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br></pre></td></tr></table></figure></div>

<p>通过<code>\usetheme&#123;&#125;</code>命令可以选择主题;&#96;</p>
<p><a class="link"   href="https://latex-beamer.com/tutorials/beamer-themes/" >Beamer Themes — Full List<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="示例报告"><a href="#示例报告" class="headerlink" title="示例报告"></a>示例报告</h3><div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[11pt]&#123;beamer&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\usepackage</span>[space,hyperref,UTF8]&#123;ctex&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;graphicx&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% chktex-file 44</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\setbeamertemplate</span>&#123;caption&#125;[numbered]       <span class="comment">% 给表格和图片加上数字</span></span><br><span class="line"><span class="keyword">\setbeamertemplate</span>&#123;navigation&#125;&#123;&#125;    <span class="comment">% 删除导航栏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\usefonttheme</span>[onlymath]&#123;serif&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 使用背景</span></span><br><span class="line"><span class="keyword">\usetheme</span>&#123;warsaw&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\title</span>&#123;飞镖系统工作汇报&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;洪汶熙、朱子骐、赵启豪、彭洛延&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"><span class="keyword">\institute</span>&#123;飞镖组&#125;</span><br><span class="line"><span class="keyword">\titlegraphic</span>&#123;<span class="keyword">\includegraphics</span>[width = 0.35<span class="keyword">\textwidth</span>]&#123;dart&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 开始写幻灯片</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第一帧</span></span><br><span class="line"><span class="keyword">\frame</span>&#123;<span class="keyword">\titlepage</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第二帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[c]<span class="keyword">\frametitle</span>&#123;frame title&#125;</span><br><span class="line">    The context goes here。飞镖系统</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第三帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[t]<span class="keyword">\frametitle</span>&#123;机械部分&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;description&#125;</span><br><span class="line">    <span class="keyword">\item</span>[First Item] Description of first item</span><br><span class="line">    <span class="keyword">\item</span>[Second Item] Description of second item</span><br><span class="line">    <span class="keyword">\item</span>[Third Item] Description of third item</span><br><span class="line">    <span class="keyword">\item</span>[Forth Item] Description of forth  </span><br><span class="line"><span class="keyword">\end</span>&#123;description&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第四帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line"><span class="keyword">\emph</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textbf</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textit</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textsl</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\alert</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textrm</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textsf</span>&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\textcolor</span>&#123;green&#125;&#123;Sample Text&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\structure</span>&#123;Sample Text&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第五帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;equation&#125;</span><br><span class="line">    a<span class="built_in">^</span>2 + b<span class="built_in">^</span>2 = c<span class="built_in">^</span>2</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第六帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;columns&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;column&#125;&#123;0.5<span class="keyword">\textwidth</span>&#125;</span><br><span class="line">        <span class="keyword">\begin</span>&#123;itemize&#125; </span><br><span class="line">            <span class="keyword">\item</span> The first item</span><br><span class="line">            <span class="keyword">\item</span> The second tiem</span><br><span class="line">            <span class="keyword">\item</span> The third item</span><br><span class="line">            <span class="keyword">\item</span> The fourth item</span><br><span class="line">        <span class="keyword">\end</span>&#123;itemize&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;column&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;column&#125;&#123;0.5<span class="keyword">\textwidth</span>&#125;</span><br><span class="line">        <span class="keyword">\begin</span>&#123;enumerate&#125;</span><br><span class="line">            <span class="keyword">\item</span> The first item</span><br><span class="line">            <span class="keyword">\item</span> The second item</span><br><span class="line">            <span class="keyword">\item</span> The third item</span><br><span class="line">        <span class="keyword">\end</span>&#123;enumerate&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;column&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;columns&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第七帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;theorem&#125;[雷诺数方程]</span><br><span class="line">        <span class="keyword">\begin</span>&#123;equation&#125;</span><br><span class="line">            Re = <span class="keyword">\frac</span>&#123;<span class="keyword">\rho</span> uL&#125;&#123;<span class="keyword">\mu</span>&#125;</span><br><span class="line">        <span class="keyword">\end</span>&#123;equation&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;theorem&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;example&#125;</span><br><span class="line">        This is a example block environment.hahahaha</span><br><span class="line">    <span class="keyword">\end</span>&#123;example&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第八帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[c]</span><br><span class="line">    <span class="keyword">\frametitle</span>&#123;table&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;table&#125;</span><br><span class="line">    <span class="keyword">\centering</span></span><br><span class="line">    <span class="keyword">\caption</span>&#123;飞镖系统部分bom表&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|c|&#125;</span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   皮筋触发    <span class="built_in">&amp;</span>   1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   底板    <span class="built_in">&amp;</span> 1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   滑轨    <span class="built_in">&amp;</span> 1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   小滑块连接片    <span class="built_in">&amp;</span> 1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   连接铜柱    <span class="built_in">&amp;</span>   4   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   飞镖对接口  <span class="built_in">&amp;</span>    1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">        发射云台    <span class="built_in">&amp;</span>   发射轨道    <span class="built_in">&amp;</span>   4   <span class="built_in">&amp;</span>   小滑块 <span class="built_in">&amp;</span>   1   <span class="keyword">\\</span></span><br><span class="line">        <span class="keyword">\hline</span></span><br><span class="line">    <span class="keyword">\end</span>&#123;tabular&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;table&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 第九帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line">    <span class="keyword">\frametitle</span>&#123;picture&#125;</span><br><span class="line">    <span class="keyword">\centering</span></span><br><span class="line">    <span class="keyword">\includegraphics</span>[width = 0.5<span class="keyword">\textwidth</span>]&#123;matlab.png&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 空白帧</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;[plain]</span><br><span class="line"></span><br><span class="line">    啥都没有</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure></div>


	<div class="row">
    <embed src="./report.pdf" width="100%" height="550" type="application/pdf">
	</div>





<h2 id="查看宏包说明"><a href="#查看宏包说明" class="headerlink" title="查看宏包说明"></a>查看宏包说明</h2><p>在安装TexLive的情况下，在vscode中，利用快捷键<code>Ctrl+Shift+</code>新建一个终端，输入<code>texdoc &lt;package&gt;</code>即可查看该宏包的官方说明文档；举例：输入texdoc background即可查看 background 宏包.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_17.png"
                      class="" width="400"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/28/Latex%E5%85%A5%E9%97%A8/fig_18.png"
                      class="" width="300"
                >


<p>在电脑安装Everything的情况下（快速检索文件的一个软件），搜索<code>&lt;package&gt;.sty</code>即可得到该宏包的源码文件，通常无法更改，将该文件的属性中的权限改为可编辑即可修改。</p>
<p>例如<code>background</code>宏包通常有一个<code>bug</code>，搜索<code>background.sty</code>并更改编辑权限即可修改宏包的设置。</p>
<h2 id="Latex模板"><a href="#Latex模板" class="headerlink" title="Latex模板"></a>Latex模板</h2><h3 id="课程论文模板"><a href="#课程论文模板" class="headerlink" title="课程论文模板"></a>课程论文模板</h3><div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexart&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">%题目</span></span><br><span class="line"><span class="keyword">\title</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\author</span>&#123;xxx,xxx&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\usepackage</span>&#123;graphicx&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;float&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks = true]&#123;hyperref&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%正文开始</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%摘要部分</span></span><br><span class="line"><span class="comment">%\begin&#123;abstract&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%\end&#123;abstract&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%\clearpage</span></span><br><span class="line"><span class="comment">%\tableofcontents</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%标题</span></span><br><span class="line"><span class="keyword">\section</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\section</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">%文献引用</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;thebibliography&#125;&#123;99&#125;</span><br><span class="line"><span class="keyword">\bibitem</span>&#123;key1&#125; Author1, Title1, Journal1, Year1</span><br><span class="line"><span class="keyword">\bibitem</span>&#123;key2&#125; Author2, Title2, Journal2, Year2</span><br><span class="line"><span class="keyword">\end</span>&#123;thebibliography&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Tex"><figure class="iseeu highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="comment">%插入图片格式</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;figure&#125;[H]</span><br><span class="line">    <span class="keyword">\centering</span></span><br><span class="line">    <span class="keyword">\includegraphics</span>[width=0.6<span class="keyword">\textwidth</span>]&#123;figure<span class="built_in">_</span>3&#125;</span><br><span class="line">    <span class="keyword">\caption</span>&#123;&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;figure&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="RBCC报告"><a href="#RBCC报告" class="headerlink" title="RBCC报告"></a>RBCC报告</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://www.bilibili.com/video/BV1Y34y1r7jH/?spm_id_from=333.337.search-card.all.click" >https://www.bilibili.com/video/BV1Y34y1r7jH/?spm_id_from=333.337.search-card.all.click<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://ljguo1020.github.io/2022/02/25/LaTeX-vscode/" >https://ljguo1020.github.io/2022/02/25/LaTeX-vscode/<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Basic Computer Programming</category>
      </categories>
  </entry>
  <entry>
    <title>PCB设计与电路基础</title>
    <url>/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>PCB的结构如下：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/fig_1.png"
                      class="" width="500"
                >

<p>上下两层为同层，中间叫做FR-4，是一层不导电的物质，通常是环氧玻璃纤维；</p>
<p>多层板通常是2的倍数，用半预制片压合在一起，这种材料也是绝缘的；</p>
<p>对于设计而言，画四层板是最容易的。</p>
<p>PCB表面有一层油漆，叫做阻焊层，用于保护铜线，让其不受空气的氧化；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/fig_2.png"
                      class="" width="300"
                >

<p>阻焊层上面还有一层，叫做丝印层，用于标记元件的位置，元件的编号等；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/fig_3.png"
                      class="" width="400"
                >

<p>基础工艺指标：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/fig_4.png"
                      class="" width="500"
                >

<p>走线线距和走线宽度一般是相同的；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/fig_5.png"
                      class="" width="500"
                >

<p>在设计PCB的布局布线中，核心的要点就是要按照信号的流向来进行布局；</p>
<p>在布线过程中，如果走的是信号频率较高的线，需要控制等长；</p>
<h3 id="电路基础知识"><a href="#电路基础知识" class="headerlink" title="电路基础知识"></a>电路基础知识</h3><ul>
<li><strong>芯片附近放0.1uF电容</strong></li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/1.png"
                      class="" width="200"
                >

<p>作用有:</p>
<ul>
<li><strong>去耦</strong> 芯片在运行时, 频繁切换状态会产生电压波动, 电容的作用就是保持芯片电压稳定, 防止芯片工作时对外干扰;</li>
<li><strong>旁路</strong> 电源线常有高频噪声, 噪音传到芯片, 会严重干扰运行, 0.1uF电容可以提供低阻抗路径, 将高频噪声旁路掉;</li>
</ul>
<p>由于噪声一般频率较高, 应该选取更低容值的电容将噪声信号短路到GND, 0.1uF电容值是一个经验值.</p>
<ul>
<li><strong>盘中孔工艺</strong></li>
</ul>
<p>当PCB板上接线孔较多时, 可以通过盘中孔工艺来解决, 可以节省PCB板的布线, 还能增强热传导和导电性能;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/09/26/PCB%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/2.png"
                      class="" width="500"
                >

<ul>
<li><strong>走线问题</strong></li>
</ul>
<p>对于功率信号, 普通信号线, PCB走线过长会导致以下原因:</p>
<ul>
<li>信号衰减和失真, 噪声增加和数据传输错误;</li>
<li>信号延迟, 过长的走线会增加信号传播的延迟, 如高速通信和时序敏感电路, 信号延迟可能会导致系统性能下降;</li>
<li>串扰干扰, 走线过长也会导致信号之间的电磁相互作用, 从而会引入错误的干扰;</li>
<li>增加综合的寄生电容.</li>
</ul>
<h2 id="元件库导入"><a href="#元件库导入" class="headerlink" title="元件库导入"></a>元件库导入</h2><h2 id="原理图绘制"><a href="#原理图绘制" class="headerlink" title="原理图绘制"></a>原理图绘制</h2><blockquote>
<p>第一次设计以一个stm32最小系统板为设计项目</p>
</blockquote>
<p>元件库可以到嘉立创的官网下载；（SMT打样–&gt;可贴器件列表）</p>
<p>一些操作技巧：</p>
<ul>
<li>双击库中的元件进行选中，左键确定，右键取消，空格旋转；</li>
<li>第一次移动元件按<code>Tab</code>键，可以编辑元件参数；</li>
<li>按住<code>Ctrl</code>再点击某个功能，可以为这个功能设置快捷键；</li>
<li>布线的时候需要点一次右键才能重新画，点两次取消；</li>
</ul>
<p>设置快捷键去练习</p>
<h3 id="原理图快捷键"><a href="#原理图快捷键" class="headerlink" title="原理图快捷键"></a>原理图快捷键</h3><ul>
<li>右键取消</li>
<li>初次拖动元件<code>Tab</code>修改参数</li>
<li><code>Space</code>旋转元件</li>
<li><code>Ctrl+W</code>布线</li>
<li><code>P+N</code>网络标签</li>
<li><code>P+P</code>放置元件菜单</li>
</ul>
<h3 id="PCB快捷键"><a href="#PCB快捷键" class="headerlink" title="PCB快捷键"></a>PCB快捷键</h3><ul>
<li><code>q</code>可以将mil单位更换为mm单位</li>
<li>在原理图选择元件之后，点击<code>T+S</code>然后在PCB图中选择<code>T+O+L</code></li>
<li><code>L</code>可切换元件放置顶层或者底层</li>
<li><code>Ctrl+M</code>测量长度</li>
</ul>
<p>放置元件遵从的原则：先大后小<br>先放置大的元件，然后放置小的元件</p>
<p>如何将元件的标号缩小到封装中，</p>
<ol>
<li>先对字符查找相似对象；</li>
<li>在<code>Text Height</code>中将<code>Any</code>改为<code>Same</code>，然后点击<code>应用</code>，再点击<code>确定</code>；</li>
<li>然后在右边栏中的<code>Properties</code>将<code>Text Height</code>改为<code>35mil</code>，再点回车；</li>
<li><code>Ctrl+A</code>选中所有元器件，然后右键上方的<code>排列</code>，选择<code>定位元件字符</code>；</li>
<li>选择居中即可；</li>
</ol>
<h2 id="四层stm32案例设计"><a href="#四层stm32案例设计" class="headerlink" title="四层stm32案例设计"></a>四层stm32案例设计</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://www.bilibili.com/video/BV1GU4y1N7Z6/?spm_id_from=333.788.top_right_bar_window_custom_collection.content.click&vd_source=5c8e073b8f94f9e61f07ae791a132eaf" >学习PCB设计前的知识扫盲，新手向，越新手越好！<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://www.bilibili.com/video/BV1Rf4y1q7cL/?spm_id_from=333.788.top_right_bar_window_custom_collection.content.click&vd_source=5c8e073b8f94f9e61f07ae791a132eaf" >PCB设计快速入门<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://space.bilibili.com/1020770905/upload/video" >嘉立创<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://www.bilibili.com/video/BV1Fr421w7Tb?spm_id_from=333.788.recommend_more_video.1&vd_source=5c8e073b8f94f9e61f07ae791a132eaf" >Altium Designer | 4层STM32开发板基础入门实战课程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Electronics and Embedded System</category>
      </categories>
  </entry>
  <entry>
    <title>ROS2入门</title>
    <url>/2023/08/30/ROS2%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="安装ROS2"><a href="#安装ROS2" class="headerlink" title="安装ROS2"></a>安装ROS2</h2><blockquote>
<p>使用wsl2学习ros2, 安装版本为ros2 humble.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_3.png"
                      class="" width="600"
                >

<p>在安装过程中, 需要科学上网才能添加gpg公钥, 但是有时候就算翻墙也无法下载, 很有可能是github的一些域名的 DNS 解析被污染, 导致 DNS 解析过程中无法通过域名取得正确的ip地址.</p>
<p>如果忽略这一步继续安装, <code>sudo apt update</code>就会显示如下:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_1.png"
                      class="" width="600"
                >

<p>确认能够科学上网之后, 仍然出现<code>Connection refused</code>, 则需要重新添加DNS.</p>
<ol>
<li><p>打开<a class="link"   href="https://www.ipaddress.com/" >ip地址查询网站<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
</li>
<li><p>输入需要查询的网站名称: raw.githubusercontent.com</p>
</li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_4.png"
                      class="" width="800"
                >

<ol start="3">
<li><p>记下这里的DNS;</p>
</li>
<li><p>打开系统hosts文件</p>
</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_5.png"
                      class="" width="500"
                >

<p>再重新执行一遍添加gpg公钥就可以了.</p>
<p>安装完后进行测试(每次开启之前都要<code>source</code>):</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> /opt/ros/iron/setup.bash</span><br><span class="line">ros2 run demo_nodes_cpp talker</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_2.png"
                      class="" width="600"
                >

<h2 id="ROS2基础入门"><a href="#ROS2基础入门" class="headerlink" title="ROS2基础入门"></a>ROS2基础入门</h2><p>结合项目与Tutorials来学习ROS2会没有那么枯燥, 但开始之前一定要把Tutorials: Beginner的内容做一遍.</p>
<p>设置一下bash就不用每次都要source了</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /opt/ros/iron/setup.bash&quot;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure></div>
<h3 id="ROS2的基本概念"><a href="#ROS2的基本概念" class="headerlink" title="ROS2的基本概念"></a>ROS2的基本概念</h3><p>没有接触ros2或者长时间遗忘之后, 需要通过tutorials复习一下简单的概念:</p>
<ul>
<li><p><strong>Workspaces</strong><br>workspaces是ros的一个基本概念, 通俗来说就是一个工作台, 需要打开这个工作台才能进行ros的开发工作, 最底层的工作空间是<code>underlay</code>, 开发的时候可能会不断嵌套工作空间, 叫做<code>overlays</code>.</p>
</li>
<li><p><strong>ROS_DOMAIN_ID</strong><br>ros中的domain id用于区分同一环境下运行的不同的ROS2系统, </p>
</li>
<li><p><strong>rqt</strong><br>rqt是ros2的一个GUI图形化界面, 可以用来进行ROS服务调用和查看它们的响应, 以及查看topics, 绘制数据等.</p>
</li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/fig_6.png"
                      class="" width="700"
                >

<p>在<code>Serivice</code>一栏上, 可以调用不同的服务, 最终得到不同的响应结果.</p>
<ul>
<li><strong>Nodes</strong><br>Nodes是ros中最基本的单元, 每个node都可以通过topics, services, actions or parameters发送和接收数据.</li>
</ul>
<center><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="gif_1.gif"
                      width = "800"
                ></center>

<p>启动ros2 packages中的节点</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run &lt;package_name&gt; &lt;node_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>查看当前启动的所有node</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 node list</span><br></pre></td></tr></table></figure></div>

<p>查看单个node信息</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 node info &lt;node_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>通过<code>--remap</code>来修改参数, 如修改node的名称</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run turtlesim turtlesim_node --ros-args --remap __node:=my_turtle</span><br></pre></td></tr></table></figure></div>
<p>此时<code>turtlesim_node</code>改名为<code>my_turtle</code>.</p>
<ul>
<li><strong>Topics</strong></li>
</ul>
<p>通常一个node会通过发布多个topics来发送数据, 同时也会订阅多个topics来接收数据.</p>
<center><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="gif_2.gif"
                      width = "800"
                ></center>


<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">rqt_graph</span><br></pre></td></tr></table></figure></div>
<p>通过rqt_graph可以查看当前的topic, node, service等信息.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/1.png"
                      class="" width="500"
                >

<p>从图中我们可以看到<code>/robot_state_publisher</code>这个node, 发布了<code>/robot_description</code>这个topic, 同时订阅了<code>/joint_states</code>这个topic.</p>
<p>查看当前topic, <code>-t</code>显示topic的类型</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic list</span><br><span class="line">ros2 topic list -t</span><br></pre></td></tr></table></figure></div>

<p>查看当前topic的类型和发布者, 订阅者</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic info &lt;topic_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>查看当前topic的通信信息</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic <span class="built_in">echo</span> &lt;topic_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>查看当前topic类型的结构</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 interface show &lt;topic_type&gt;</span><br></pre></td></tr></table></figure></div>
<p>例如通过<code>ros2 topic list -t</code>知道了<code>/joint_states</code>的类型是<code>sensor_msgs/msg/JointState</code>.</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 interface show sensor_msgs/msg/JointState</span><br></pre></td></tr></table></figure></div>

<p>可以通过手动发布数据到topic中</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic pub &lt;topic_name&gt; &lt;topic_type&gt; &lt;data&gt;</span><br></pre></td></tr></table></figure></div>
<p>例如<code>/turtle1/cmd_vel</code>的数据结构如下:</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">linear:</span><br><span class="line">  x: 2.0</span><br><span class="line">  y: 0.0</span><br><span class="line">  z: 0.0</span><br><span class="line">angular:</span><br><span class="line">  x: 0.0</span><br><span class="line">  y: 0.0</span><br><span class="line">  z: 0.0</span><br><span class="line">  ---</span><br></pre></td></tr></table></figure></div>
<p>则可以:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist <span class="string">&quot;&#123;linear: &#123;x: 2.0, y: 0.0, z: 0.0&#125;, angular: &#123;x: 0.0, y: 0.0, z: 1.8&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure></div>

<p>通过<code>--rate 1</code>来设置发布速率为1Hz</p>
<p>查看数据传输速度</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic hz &lt;topic_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>查找当前类型的topic</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic find &lt;topic_type&gt;</span><br></pre></td></tr></table></figure></div>
<p>例如</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 topic find sensor_msgs/msg/JointState</span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>Services</strong></li>
</ul>
<p>Services则是节点之间另一种通信方式, 通过请求和响应的方式进行通信.(call-and-response model) Services只会在node发送请求之后, 才会发送数据.</p>
<center><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="gif_3.gif"
                      width = "800"
                ></center>

<p>查看当前的service, <code>-t</code>显示service的类型</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 service list</span><br><span class="line">ros2 service list -t</span><br></pre></td></tr></table></figure></div>
<p>service的第一个参数是该service server所在的node, 第二个参数是service的名称.</p>
<p>例如<code>/controller_manager/list_controllers</code>这个service, 其service server所在的node是<code>/controller_manager</code>, service的名称是<code>list_controllers</code>.</p>
<p>查看当前service的类型</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 service <span class="built_in">type</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure></div>

<p>查找该类型的service</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 service find &lt;service_type&gt;</span><br></pre></td></tr></table></figure></div>

<p>查看该service类型的数据结构</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 interface show &lt;service_type&gt;</span><br></pre></td></tr></table></figure></div>

<p>请求一个service发送数据</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 service call &lt;service_name&gt; &lt;service_type&gt; &lt;data&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>Parameters</strong></li>
</ul>
<p>Parameters即为一个Node的参数, 都可以通过设置parameters来设置一个Node, 在ROS2中, 每个node都有自己的parameters.</p>
<p>查看所有node的parameters</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param list</span><br></pre></td></tr></table></figure></div>
<p>查看当前parameters的类型和值</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param get &lt;node_name&gt; &lt;parameter_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>设置parameters</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param <span class="built_in">set</span> &lt;node_name&gt; &lt;parameter_name&gt; &lt;value&gt;</span><br></pre></td></tr></table></figure></div>
<p>查看该Node的parameters</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param dump &lt;node_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>可以将该node所有parameters保存到一个文件中</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param dump &lt;node_name&gt; &gt; &lt;file_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>例如</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param dump /turtlesim &gt; turtlesim.yaml</span><br></pre></td></tr></table></figure></div>
<p>将文件的参数加载到node中</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param load &lt;node_name&gt; &lt;file_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>在打开节点的同时加载文件中的参数</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run &lt;package_name&gt; &lt;node_name&gt; --ros-args --params-file &lt;file_name&gt;</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run turtlesim turtlesim_node --ros-args --params-file turtlesim.yaml</span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>Actions</strong></li>
</ul>
<p>Actions是一种更复杂的通信方式, 用于长时间运行的任务, 主要包含三个部分: goal, feedback, result.</p>
<p>Actions的通信与Services类似, 它能够持续的发送和接收数据; 其使用client-server model.</p>
<p><code>action client</code>发送goal, <code>action server</code>接收goal并返回feedback和result.</p>
<center><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="gif_4.gif"
                      width = "800"
                ></center>

<p>查看一个Node的所有actions</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 node info &lt;node_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>查看当前所有的action, 通过<code>-t</code>显示action的类型</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 action list</span><br><span class="line">ros2 action list -t</span><br></pre></td></tr></table></figure></div>
<p>查看action的客户端和服务器</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 action info &lt;action_name&gt;</span><br></pre></td></tr></table></figure></div>
<p>查看该action的类型的数据结构</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 interface show &lt;action_type&gt;</span><br></pre></td></tr></table></figure></div>
<p>给action发送goal, –feedback传回result</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 action send_goal &lt;action_name&gt; &lt;action_type&gt; &lt;values&gt;</span><br><span class="line">ros2 action send_goal &lt;action_name&gt; &lt;action_type&gt; &lt;values&gt; --feedback</span><br></pre></td></tr></table></figure></div>
<p>例如:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 action send_goal /turtle1/rotate_absolute turtlesim/action/RotateAbsolute <span class="string">&quot;&#123;theta: -1.57&#125;&quot;</span> --feedback</span><br></pre></td></tr></table></figure></div>

<h3 id="调试信息"><a href="#调试信息" class="headerlink" title="调试信息"></a>调试信息</h3><p>通过<code>rqt_console</code>的可视化界面来查看调试信息</p>
<p>启动</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run rqt_console rqt_console</span><br></pre></td></tr></table></figure></div>

<h3 id="Node启动"><a href="#Node启动" class="headerlink" title="Node启动"></a>Node启动</h3><p>在ROS2中, 单个node的启动是通过<code>ros2 run</code>来实现的, 但是在实际开发中, 会有多个node需要启动, 此时可通过<code>ros2 launch</code>来启动多个node.</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">ros2 launch &lt;package_name&gt; &lt;launch_file&gt;</span><br></pre></td></tr></table></figure></div>
<p>例如</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 launch turtlesim multisim.launch.py</span><br></pre></td></tr></table></figure></div>

<h3 id="记录和回放数据"><a href="#记录和回放数据" class="headerlink" title="记录和回放数据"></a>记录和回放数据</h3><p>ros2 bag是一个用于记录和回放数据的工具, 通过ros2 bag可以记录topic的数据, 并在之后回放这些数据.</p>
<p>在新建的目录下, 记录当前topic的数据</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 bag record &lt;topic_name&gt;</span><br></pre></td></tr></table></figure></div>
<p><code>Ctrl+C</code>停止记录</p>
<p>其中当前目录下包含一个<code>metadata.yaml</code>文件和一个<code>&lt;timestamp&gt;.db3</code>文件.</p>
<p>同时记录多个topic的数据, 同时设置保存的文件名</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 bag record -o subset /turtle1/cmd_vel /turtle1/pose</span><br></pre></td></tr></table></figure></div>
<p><code>subset</code>为保存的文件名</p>
<p>查看ros2 bag的信息</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 bag info &lt;bag_file&gt;</span><br></pre></td></tr></table></figure></div>

<p>回放数据</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 bag play &lt;bag_file&gt;</span><br></pre></td></tr></table></figure></div>



<h2 id="ROS2工作空间构建"><a href="#ROS2工作空间构建" class="headerlink" title="ROS2工作空间构建"></a>ROS2工作空间构建</h2><h3 id="构建工作空间"><a href="#构建工作空间" class="headerlink" title="构建工作空间"></a>构建工作空间</h3><p>ros2使用colcon来构建packages, 需要先安装colcon的依赖</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install python3-colcon-common-extensions</span><br></pre></td></tr></table></figure></div>

<p>在初始的工作目录下, 通常需要创建一个src目录, 用于存放所有的packages. <code>colcon build</code>会编译src目录下的所有packages, 形成一下目录结构:</p>
<ul>
<li>src</li>
<li>build</li>
<li>install</li>
<li>log</li>
</ul>
<p>在完成src之后, 构建之前需要先安装依赖, 在工作空间根目录下运行</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">rosdep install -i --from-path src --rosdistro humble -y</span><br></pre></td></tr></table></figure></div>
<p><code>-i</code>表示安装所有的依赖, <code>--from-path src</code>表示从src目录下的所有packages中安装依赖, <code>-y</code>表示自动安装.</p>
<p>在工作空间的根目录下, 运行</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">colcon build --symlink-install</span><br></pre></td></tr></table></figure></div>
<p><code>--symlink-install</code>是为了在安装时使用链接, 使得install目录下的文件与src目录下的文件保持一致, 便于调试.</p>
<p>测试构建的packages</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">colcon <span class="built_in">test</span></span><br></pre></td></tr></table></figure></div>
<p>source一下来添加路径</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> install/setup.bash</span><br></pre></td></tr></table></figure></div>

<p><code>colcon_cd</code>可以快速切换到某个package的目录下<br>给colcon_cd添加路径</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /usr/share/colcon_cd/function/colcon_cd.sh&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export _colcon_cd_root=/opt/ros/humble/&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></div>
<p>使用colcon_cd</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">colcon_cd &lt;package_name&gt;</span><br></pre></td></tr></table></figure></div>

<h3 id="构建packages"><a href="#构建packages" class="headerlink" title="构建packages"></a>构建packages</h3><p>可以用两种方式构建packages, 用cmake则需要用C++编写, 另一种则用python编写.</p>
<ul>
<li>CMake<ul>
<li>CMakeLists.txt</li>
<li>include&#x2F;<package_name></li>
<li>src</li>
<li>package.xml</li>
</ul>
</li>
<li>Python<ul>
<li>package.xml</li>
<li>resource&#x2F;<package_name></li>
<li>setup.cfg</li>
<li>setup.py</li>
<li><package_name> 包含__init__.py</li>
</ul>
</li>
</ul>
<p>packages位于src目录下, 不能嵌套.</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">workspace_folder/</span><br><span class="line">    src/</span><br><span class="line">      cpp_package_1/</span><br><span class="line">          CMakeLists.txt</span><br><span class="line">          include/cpp_package_1/</span><br><span class="line">          package.xml</span><br><span class="line">          src/</span><br><span class="line"></span><br><span class="line">      py_package_1/</span><br><span class="line">          package.xml</span><br><span class="line">          resource/py_package_1</span><br><span class="line">          setup.cfg</span><br><span class="line">          setup.py</span><br><span class="line">          py_package_1/</span><br><span class="line">      ...</span><br><span class="line">      cpp_package_n/</span><br><span class="line">          CMakeLists.txt</span><br><span class="line">          include/cpp_package_n/</span><br><span class="line">          package.xml</span><br><span class="line">          src/</span><br></pre></td></tr></table></figure></div>

<p>在src目录下, 创建package</p>
<p>当一个工作空间中的package数量较多时, <code>colcon build</code>会花费大量的时间, 此时可以通过<code>--packages-select</code>来选择需要构建的package</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">colcon build --packages-select &lt;package_name&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>CMake<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 pkg create --build-type ament_cmake --license Apache-2.0 &lt;package_name&gt;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<p>打开package.xml, 增加和修改其中的信息, 例如:</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">format</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>my_package<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">description</span>&gt;</span>TODO: Package description<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">&quot;user@todo.todo&quot;</span>&gt;</span>user<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">license</span>&gt;</span>TODO: License declaration<span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>ament_cmake<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_lint_auto<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_lint_common<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build_type</span>&gt;</span>ament_cmake<span class="tag">&lt;/<span class="name">build_type</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>Python<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 pkg create --build-type ament_python --license Apache-2.0 &lt;package_name&gt;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<p>同样需要修改package.xml, 与上述方法相同;</p>
<p>在<code>setup.py</code>中, 需要添加一些信息,</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup</span><br><span class="line"></span><br><span class="line">package_name = <span class="string">&#x27;my_py_pkg&#x27;</span></span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line"> name=package_name,</span><br><span class="line"> version=<span class="string">&#x27;0.0.0&#x27;</span>,</span><br><span class="line"> packages=[package_name],</span><br><span class="line"> data_files=[</span><br><span class="line">     (<span class="string">&#x27;share/ament_index/resource_index/packages&#x27;</span>,</span><br><span class="line">             [<span class="string">&#x27;resource/&#x27;</span> + package_name]),</span><br><span class="line">     (<span class="string">&#x27;share/&#x27;</span> + package_name, [<span class="string">&#x27;package.xml&#x27;</span>]),</span><br><span class="line">   ],</span><br><span class="line"> install_requires=[<span class="string">&#x27;setuptools&#x27;</span>],</span><br><span class="line"> zip_safe=<span class="literal">True</span>,</span><br><span class="line"> maintainer=<span class="string">&#x27;TODO&#x27;</span>,</span><br><span class="line"> maintainer_email=<span class="string">&#x27;TODO&#x27;</span>,</span><br><span class="line"> description=<span class="string">&#x27;TODO: Package description&#x27;</span>,</span><br><span class="line"> license=<span class="string">&#x27;TODO: License declaration&#x27;</span>,</span><br><span class="line"> tests_require=[<span class="string">&#x27;pytest&#x27;</span>],</span><br><span class="line"> entry_points=&#123;</span><br><span class="line">     <span class="string">&#x27;console_scripts&#x27;</span>: [</span><br><span class="line">             <span class="string">&#x27;my_node = my_py_pkg.my_node:main&#x27;</span></span><br><span class="line">     ],</span><br><span class="line">   &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>
<p>将<code>maintainer</code>, <code>maintainer_email</code>, <code>description</code>, <code>license</code>等信息修改并与package.xml中的信息一致.</p>
<h3 id="C-Publisher-and-Subscriber"><a href="#C-Publisher-and-Subscriber" class="headerlink" title="C++ Publisher and Subscriber"></a>C++ Publisher and Subscriber</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 pkg create --build-type ament_cmake --license Apache-2.0 cpp_pubsub</span><br></pre></td></tr></table></figure></div>

<p>在创建好的package中的src, 新建一个cpp文件, 用于发布topic</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rclcpp/rclcpp.hpp&quot;</span> <span class="comment">// ROS2的C++库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/msg/string.hpp&quot;</span> <span class="comment">// ROS2的消息类型</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This example creates a subclass of Node and uses std::bind() to register a</span></span><br><span class="line"><span class="comment"> * member function as a callback from the timer. */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinimalPublisher</span> : <span class="keyword">public</span> rclcpp::Node</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">MinimalPublisher</span>()</span><br><span class="line">  : <span class="built_in">Node</span>(<span class="string">&quot;minimal_publisher&quot;</span>), <span class="built_in">count_</span>(<span class="number">0</span>) <span class="comment">// Node命名为minimal_publisher</span></span><br><span class="line">  &#123;</span><br><span class="line">    publisher_ = <span class="keyword">this</span>-&gt;<span class="built_in">create_publisher</span>&lt;std_msgs::msg::String&gt;(<span class="string">&quot;topic&quot;</span>, <span class="number">10</span>); <span class="comment">// topic名称为topic, 队列长度为10</span></span><br><span class="line">    timer_ = <span class="keyword">this</span>-&gt;<span class="built_in">create_wall_timer</span>(</span><br><span class="line">      <span class="number">500</span>ms, std::<span class="built_in">bind</span>(&amp;MinimalPublisher::timer_callback, <span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">timer_callback</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> message = std_msgs::msg::<span class="built_in">String</span>();</span><br><span class="line">    message.data = <span class="string">&quot;Hello, world! &quot;</span> + std::<span class="built_in">to_string</span>(count_++);</span><br><span class="line">    <span class="built_in">RCLCPP_INFO</span>(<span class="keyword">this</span>-&gt;<span class="built_in">get_logger</span>(), <span class="string">&quot;Publishing: &#x27;%s&#x27;&quot;</span>, message.data.<span class="built_in">c_str</span>());</span><br><span class="line">    publisher_-&gt;<span class="built_in">publish</span>(message);</span><br><span class="line">  &#125;</span><br><span class="line">  rclcpp::TimerBase::SharedPtr timer_;</span><br><span class="line">  rclcpp::Publisher&lt;std_msgs::msg::String&gt;::SharedPtr publisher_;</span><br><span class="line">  <span class="type">size_t</span> count_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> * argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv);</span><br><span class="line">  rclcpp::<span class="built_in">spin</span>(std::<span class="built_in">make_shared</span>&lt;MinimalPublisher&gt;());</span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>添加依赖</strong></p>
<p>在package.xml中添加依赖, 主要是rclcpp和std_msgs</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>ament_cmake<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">depend</span>&gt;</span>rclcpp<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>

<p>在package中的src下, 创建一个subscriber的cpp文件</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rclcpp/rclcpp.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/msg/string.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::placeholders::_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinimalSubscriber</span> : <span class="keyword">public</span> rclcpp::Node</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">MinimalSubscriber</span>()</span><br><span class="line">  : <span class="built_in">Node</span>(<span class="string">&quot;minimal_subscriber&quot;</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    subscription_ = <span class="keyword">this</span>-&gt;<span class="built_in">create_subscription</span>&lt;std_msgs::msg::String&gt;(</span><br><span class="line">      <span class="string">&quot;topic&quot;</span>, <span class="number">10</span>, std::<span class="built_in">bind</span>(&amp;MinimalSubscriber::topic_callback, <span class="keyword">this</span>, _1));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">topic_callback</span><span class="params">(<span class="type">const</span> std_msgs::msg::String &amp; msg)</span> <span class="type">const</span> <span class="comment">// 接收来自topic的数据, 然后输出到终端</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">RCLCPP_INFO</span>(<span class="keyword">this</span>-&gt;<span class="built_in">get_logger</span>(), <span class="string">&quot;I heard: &#x27;%s&#x27;&quot;</span>, msg.data.<span class="built_in">c_str</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  rclcpp::Subscription&lt;std_msgs::msg::String&gt;::SharedPtr subscription_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> * argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv);</span><br><span class="line">  rclcpp::<span class="built_in">spin</span>(std::<span class="built_in">make_shared</span>&lt;MinimalSubscriber&gt;());</span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>打开CMakeLists.txt, 添加依赖和执行文件</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(ament_cmake REQUIRED) <span class="comment"># 原有的依赖</span></span><br><span class="line"><span class="keyword">find_package</span>(rclcpp REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(std_msgs REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(talker src/publisher_member_function.cpp)</span><br><span class="line"><span class="keyword">add_executable</span>(listener src/subscriber_member_function.cpp)</span><br><span class="line">ament_target_dependencies(talker rclcpp std_msgs)</span><br><span class="line">ament_target_dependencies(listener rclcpp std_msgs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>(TARGETS</span><br><span class="line">  talker</span><br><span class="line">  listener</span><br><span class="line">  DESTINATION lib/<span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br></pre></td></tr></table></figure></div>


<h3 id="C-Service-and-Client"><a href="#C-Service-and-Client" class="headerlink" title="C++ Service and Client"></a>C++ Service and Client</h3><p>Service通信中的request和response结构, 都是由<code>.srv</code>文件定义的.</p>
<p>创建package</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 pkg create --build-type ament_cmake --license Apache-2.0 cpp_srvcli --dependencies rclcpp example_interfaces</span><br></pre></td></tr></table></figure></div>

<p><code>example_interfaces</code>包含.srv文件, 用于定义request和response的结构.</p>
<p>创建server.cpp文件</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rclcpp/rclcpp.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;example_interfaces/srv/add_two_ints.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">const</span> std::shared_ptr&lt;example_interfaces::srv::AddTwoInts::Request&gt; request,</span></span></span><br><span class="line"><span class="params"><span class="function">          std::shared_ptr&lt;example_interfaces::srv::AddTwoInts::Response&gt;      response)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  response-&gt;sum = request-&gt;a + request-&gt;b;</span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Incoming request\na: %ld&quot;</span> <span class="string">&quot; b: %ld&quot;</span>,</span><br><span class="line">                request-&gt;a, request-&gt;b);</span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;sending back response: [%ld]&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)response-&gt;sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv); <span class="comment">// 初始化ROS2</span></span><br><span class="line"></span><br><span class="line">  std::shared_ptr&lt;rclcpp::Node&gt; node = rclcpp::Node::<span class="built_in">make_shared</span>(<span class="string">&quot;add_two_ints_server&quot;</span>); <span class="comment">// 创建一个Node</span></span><br><span class="line"></span><br><span class="line">  rclcpp::Service&lt;example_interfaces::srv::AddTwoInts&gt;::SharedPtr service =</span><br><span class="line">    node-&gt;<span class="built_in">create_service</span>&lt;example_interfaces::srv::AddTwoInts&gt;(<span class="string">&quot;add_two_ints&quot;</span>, &amp;add); <span class="comment">// 创建一个service, 调用add函数</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Ready to add two ints.&quot;</span>);</span><br><span class="line"></span><br><span class="line">  rclcpp::<span class="built_in">spin</span>(node); <span class="comment">// 运行Node, 激活service</span></span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>打开CMakeLists.txt, 讲server node添加为<code>server</code>的可执行文件, 同时添加依赖</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(server src/add_two_ints_server.cpp)</span><br><span class="line">ament_target_dependencies(server rclcpp example_interfaces)</span><br></pre></td></tr></table></figure></div>

<p>同理, 再创建一个client.cpp文件, 并且添加到CMakeLists.txt中</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rclcpp/rclcpp.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;example_interfaces/srv/add_two_ints.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;usage: add_two_ints_client X Y&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  std::shared_ptr&lt;rclcpp::Node&gt; node = rclcpp::Node::<span class="built_in">make_shared</span>(<span class="string">&quot;add_two_ints_client&quot;</span>); <span class="comment">// 创建一个Node</span></span><br><span class="line">  rclcpp::Client&lt;example_interfaces::srv::AddTwoInts&gt;::SharedPtr client =</span><br><span class="line">    node-&gt;<span class="built_in">create_client</span>&lt;example_interfaces::srv::AddTwoInts&gt;(<span class="string">&quot;add_two_ints&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> request = std::<span class="built_in">make_shared</span>&lt;example_interfaces::srv::AddTwoInts::Request&gt;(); <span class="comment">// 创建一个request</span></span><br><span class="line">  request-&gt;a = <span class="built_in">atoll</span>(argv[<span class="number">1</span>]);</span><br><span class="line">  request-&gt;b = <span class="built_in">atoll</span>(argv[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 寻找service, 如果service不可用, 则等待</span></span><br><span class="line">  <span class="keyword">while</span> (!client-&gt;<span class="built_in">wait_for_service</span>(<span class="number">1</span>s)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!rclcpp::<span class="built_in">ok</span>()) &#123;</span><br><span class="line">      <span class="built_in">RCLCPP_ERROR</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Interrupted while waiting for the service. Exiting.&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;service not available, waiting again...&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> result = client-&gt;<span class="built_in">async_send_request</span>(request);</span><br><span class="line">  <span class="comment">// Wait for the result.</span></span><br><span class="line">  <span class="keyword">if</span> (rclcpp::<span class="built_in">spin_until_future_complete</span>(node, result) ==</span><br><span class="line">    rclcpp::FutureReturnCode::SUCCESS)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Sum: %ld&quot;</span>, result.<span class="built_in">get</span>()-&gt;sum);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">RCLCPP_ERROR</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Failed to call service add_two_ints&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(client src/add_two_ints_client.cpp)</span><br><span class="line">ament_target_dependencies(client rclcpp example_interfaces)</span><br><span class="line"></span><br><span class="line">install(TARGETS</span><br><span class="line">  server</span><br><span class="line">  client</span><br><span class="line">  DESTINATION lib/$&#123;PROJECT_NAME&#125;)</span><br></pre></td></tr></table></figure></div>

<p>启动Node</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run cpp_srvcli server</span><br><span class="line">ros2 run cpp_srvcli client 1 2</span><br></pre></td></tr></table></figure></div>



<h3 id="自定义msg和srv"><a href="#自定义msg和srv" class="headerlink" title="自定义msg和srv"></a>自定义msg和srv</h3><p>这个package只能使用CMake来构建, 不能使用python.</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 pkg create --build-type ament_cmake --license Apache-2.0 tutorial_interfaces</span><br></pre></td></tr></table></figure></div>

<p>在&#x2F;tutorial_interfaces下创建msg和srv文件夹</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd tutorial_interfaces</span><br><span class="line">mkdir msg srv</span><br></pre></td></tr></table></figure></div>

<p>在<code>tutorial_interfaces/msg下</code>创建一个<code>Num.msg</code>文件</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">int64 num</span><br></pre></td></tr></table></figure></div>
<p>在同一个目录下创建<code>Sphere.msg</code>文件</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">geometry_msgs/Point center</span><br><span class="line">float64 radius</span><br></pre></td></tr></table></figure></div>
<p>这是用了<code>geometry_msgs</code>这个package中的Point类型</p>
<p>在<code>tutorial_interfaces/srv</code>下创建一个<code>AddThreeInts.srv</code>文件</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">int64 a</span><br><span class="line">int64 b</span><br><span class="line">int64 c</span><br><span class="line">---</span><br><span class="line">int64 sum</span><br></pre></td></tr></table></figure></div>

<p>在CMakeLists.txt中添加依赖</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(geometry_msgs REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(rosidl_default_generators REQUIRED)</span><br><span class="line"></span><br><span class="line">rosidl_generate_interfaces(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  <span class="string">&quot;msg/Num.msg&quot;</span></span><br><span class="line">  <span class="string">&quot;msg/Sphere.msg&quot;</span></span><br><span class="line">  <span class="string">&quot;srv/AddThreeInts.srv&quot;</span></span><br><span class="line">  DEPENDENCIES geometry_msgs <span class="comment"># Add packages that above messages depend on, in this case geometry_msgs for Sphere.msg</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p>在<code>package.xml</code>中添加依赖</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">depend</span>&gt;</span>geometry_msgs<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>rosidl_default_generators<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>rosidl_default_runtime<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">member_of_group</span>&gt;</span>rosidl_interface_packages<span class="tag">&lt;/<span class="name">member_of_group</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>最后在publisher和subscriber中使用自定义的msg.</p>
<p>举例, 在publisher中使用自定义的msg</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;tutorial_interfaces/msg/num.hpp&quot;</span> </span></span><br><span class="line"></span><br><span class="line">publisher_ = <span class="keyword">this</span>-&gt;<span class="built_in">create_publisher</span>&lt;tutorial_interfaces::msg::Num&gt;(<span class="string">&quot;topic&quot;</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> message = tutorial_interfaces::msg::<span class="built_in">Num</span>(); </span><br><span class="line">message.num = <span class="keyword">this</span>-&gt;count_++; </span><br><span class="line"><span class="built_in">RCLCPP_INFO_STREAM</span>(<span class="keyword">this</span>-&gt;<span class="built_in">get_logger</span>(), <span class="string">&quot;Publishing: &#x27;&quot;</span> &lt;&lt; message.num &lt;&lt; <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line"></span><br><span class="line">rclcpp::Publisher&lt;tutorial_interfaces::msg::Num&gt;::SharedPtr publisher_;</span><br></pre></td></tr></table></figure></div>
<p>subscriber也是类似;</p>
<p>在<code>CMakeLists.txt</code>和<code>package.xml</code>中添加对应依赖即可;</p>
<p>在service中使用自定义的srv</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;tutorial_interfaces/srv/add_three_ints.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">const</span> std::shared_ptr&lt;tutorial_interfaces::srv::AddThreeInts::Request&gt; request,    </span></span></span><br><span class="line"><span class="params"><span class="function">          std::shared_ptr&lt;tutorial_interfaces::srv::AddThreeInts::Response&gt;       response)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  response-&gt;sum = request-&gt;a + request-&gt;b + request-&gt;c;                                    </span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Incoming request\na: %ld&quot;</span> <span class="string">&quot; b: %ld&quot;</span> <span class="string">&quot; c: %ld&quot;</span>, </span><br><span class="line">                request-&gt;a, request-&gt;b, request-&gt;c);                                        </span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;sending back response: [%ld]&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)response-&gt;sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv);</span><br><span class="line"></span><br><span class="line">  std::shared_ptr&lt;rclcpp::Node&gt; node = rclcpp::Node::<span class="built_in">make_shared</span>(<span class="string">&quot;add_three_ints_server&quot;</span>);   </span><br><span class="line"></span><br><span class="line">  rclcpp::Service&lt;tutorial_interfaces::srv::AddThreeInts&gt;::SharedPtr service =               </span><br><span class="line">    node-&gt;<span class="built_in">create_service</span>&lt;tutorial_interfaces::srv::AddThreeInts&gt;(<span class="string">&quot;add_three_ints&quot;</span>,  &amp;add);   </span><br><span class="line"></span><br><span class="line">  <span class="built_in">RCLCPP_INFO</span>(rclcpp::<span class="built_in">get_logger</span>(<span class="string">&quot;rclcpp&quot;</span>), <span class="string">&quot;Ready to add three ints.&quot;</span>);                     </span><br><span class="line"></span><br><span class="line">  rclcpp::<span class="built_in">spin</span>(node);</span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="C-调试Parameters"><a href="#C-调试Parameters" class="headerlink" title="C++调试Parameters"></a>C++调试Parameters</h2><p>在cmake构建的package中创建一个C++ Node</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;rclcpp/rclcpp.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinimalParam</span> : <span class="keyword">public</span> rclcpp::Node</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">MinimalParam</span>()</span><br><span class="line">  : <span class="built_in">Node</span>(<span class="string">&quot;minimal_param_node&quot;</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">declare_parameter</span>(<span class="string">&quot;my_parameter&quot;</span>, <span class="string">&quot;world&quot;</span>); <span class="comment">// 创建一个parameter, 名称为my_parameter, 默认值为world</span></span><br><span class="line"></span><br><span class="line">    timer_ = <span class="keyword">this</span>-&gt;<span class="built_in">create_wall_timer</span>(</span><br><span class="line">      <span class="number">1000</span>ms, std::<span class="built_in">bind</span>(&amp;MinimalParam::timer_callback, <span class="keyword">this</span>)); <span class="comment">// time_callback函数每隔1s被调用</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">timer_callback</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    std::string my_param = <span class="keyword">this</span>-&gt;<span class="built_in">get_parameter</span>(<span class="string">&quot;my_parameter&quot;</span>).<span class="built_in">as_string</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RCLCPP_INFO</span>(<span class="keyword">this</span>-&gt;<span class="built_in">get_logger</span>(), <span class="string">&quot;Hello %s!&quot;</span>, my_param.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line">    std::vector&lt;rclcpp::Parameter&gt; all_new_parameters&#123;rclcpp::<span class="built_in">Parameter</span>(<span class="string">&quot;my_parameter&quot;</span>, <span class="string">&quot;world&quot;</span>)&#125;;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">set_parameters</span>(all_new_parameters); <span class="comment">// 设置回默认值</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  rclcpp::TimerBase::SharedPtr timer_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> ** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  rclcpp::<span class="built_in">init</span>(argc, argv);</span><br><span class="line">  rclcpp::<span class="built_in">spin</span>(std::<span class="built_in">make_shared</span>&lt;MinimalParam&gt;());</span><br><span class="line">  rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<p>在CMakeLists.txt中添加依赖</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(minimal_param_node src/cpp_parameters_node.cpp)</span><br><span class="line">ament_target_dependencies(minimal_param_node rclcpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>(TARGETS</span><br><span class="line">    minimal_param_node</span><br><span class="line">  DESTINATION lib/<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p>在终端修改parameters</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param <span class="built_in">set</span> &lt;node_name&gt; &lt;parameter_name&gt; value</span><br></pre></td></tr></table></figure></div>
<p>例如</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 param <span class="built_in">set</span> /minimal_param_node my_parameter earth</span><br></pre></td></tr></table></figure></div>


<p>还可以通过python launch文件修改parameter</p>
<p>在package下添加launch目录, 然后添加一个launch.py</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> launch <span class="keyword">import</span> LaunchDescription</span><br><span class="line"><span class="keyword">from</span> launch_ros.actions <span class="keyword">import</span> Node</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_launch_description</span>():</span><br><span class="line">    <span class="keyword">return</span> LaunchDescription([</span><br><span class="line">        Node(</span><br><span class="line">            package=<span class="string">&quot;cpp_parameters&quot;</span>,</span><br><span class="line">            executable=<span class="string">&quot;minimal_param_node&quot;</span>,</span><br><span class="line">            name=<span class="string">&quot;custom_minimal_param_node&quot;</span>,</span><br><span class="line">            output=<span class="string">&quot;screen&quot;</span>,</span><br><span class="line">            emulate_tty=<span class="literal">True</span>,</span><br><span class="line">            parameters=[</span><br><span class="line">                &#123;<span class="string">&quot;my_parameter&quot;</span>: <span class="string">&quot;earth&quot;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">    ])</span><br></pre></td></tr></table></figure></div>

<p>修改CMakeLists.txt</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">install</span>(</span><br><span class="line">  DIRECTORY launch</span><br><span class="line">  DESTINATION share/<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<h2 id="使用rosdep管理依赖"><a href="#使用rosdep管理依赖" class="headerlink" title="使用rosdep管理依赖"></a>使用rosdep管理依赖</h2><h2 id="Launch"><a href="#Launch" class="headerlink" title="Launch"></a>Launch</h2><p>通过ros2 launch 启动文件可以同时启动多个nodes;</p>
<h3 id="创建launch文件"><a href="#创建launch文件" class="headerlink" title="创建launch文件"></a>创建launch文件</h3><p>在package中的src下创建一个launch文件夹, 在其中创建一个launch文件, 例如<code>my_launch.py</code></p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> launch <span class="keyword">import</span> LaunchDescription</span><br><span class="line"><span class="keyword">from</span> launch_ros.actions <span class="keyword">import</span> Node</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_launch_description</span>():</span><br><span class="line">    <span class="keyword">return</span> LaunchDescription([</span><br><span class="line">        Node(</span><br><span class="line">            package=<span class="string">&#x27;turtlesim&#x27;</span>,</span><br><span class="line">            namespace=<span class="string">&#x27;turtlesim1&#x27;</span>,</span><br><span class="line">            executable=<span class="string">&#x27;turtlesim_node&#x27;</span>,</span><br><span class="line">            name=<span class="string">&#x27;sim&#x27;</span></span><br><span class="line">        ),</span><br><span class="line">        Node(</span><br><span class="line">            package=<span class="string">&#x27;turtlesim&#x27;</span>,</span><br><span class="line">            namespace=<span class="string">&#x27;turtlesim2&#x27;</span>,</span><br><span class="line">            executable=<span class="string">&#x27;turtlesim_node&#x27;</span>,</span><br><span class="line">            name=<span class="string">&#x27;sim&#x27;</span></span><br><span class="line">        ),</span><br><span class="line">        Node(</span><br><span class="line">            package=<span class="string">&#x27;turtlesim&#x27;</span>,</span><br><span class="line">            executable=<span class="string">&#x27;mimic&#x27;</span>,</span><br><span class="line">            name=<span class="string">&#x27;mimic&#x27;</span>,</span><br><span class="line">            remappings=[</span><br><span class="line">                (<span class="string">&#x27;/input/pose&#x27;</span>, <span class="string">&#x27;/turtlesim1/turtle1/pose&#x27;</span>),</span><br><span class="line">                (<span class="string">&#x27;/output/cmd_vel&#x27;</span>, <span class="string">&#x27;/turtlesim2/turtle1/cmd_vel&#x27;</span>),</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">    ])</span><br></pre></td></tr></table></figure></div>
<p>这里启动了一个package三个Nodes.</p>
<p>启动</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> launch</span><br><span class="line">ros2 launch my_launch.py</span><br></pre></td></tr></table></figure></div>

<h3 id="集成到package中"><a href="#集成到package中" class="headerlink" title="集成到package中"></a>集成到package中</h3><ul>
<li>C++ package</li>
</ul>
<p>修改CMakeLists.txt, 在<code>ament_package()</code>前添加</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Install launch files.</span></span><br><span class="line"><span class="keyword">install</span>(DIRECTORY</span><br><span class="line">  launch</span><br><span class="line">  DESTINATION share/<span class="variable">$&#123;PROJECT_NAME&#125;</span>/</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p>简单写一个python launch文件</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> launch</span><br><span class="line"><span class="keyword">import</span> launch_ros.actions</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_launch_description</span>():</span><br><span class="line">    <span class="keyword">return</span> launch.LaunchDescription([</span><br><span class="line">        launch_ros.actions.Node(</span><br><span class="line">            package=<span class="string">&#x27;demo_nodes_cpp&#x27;</span>,</span><br><span class="line">            executable=<span class="string">&#x27;talker&#x27;</span>,</span><br><span class="line">            name=<span class="string">&#x27;talker&#x27;</span>),</span><br><span class="line">  ])</span><br></pre></td></tr></table></figure></div>


<p>启动</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 launch &lt;package_name&gt; &lt;launch_file&gt;</span><br></pre></td></tr></table></figure></div>






<h2 id="Gazebo入门"><a href="#Gazebo入门" class="headerlink" title="Gazebo入门"></a>Gazebo入门</h2><p>由于我使用ros2 humble版本, 这里的gazebo版本为Fortress.</p>
<h3 id="SDF文件的设计"><a href="#SDF文件的设计" class="headerlink" title="SDF文件的设计"></a>SDF文件的设计</h3><p>SDF文件(Simulation Description Format)是Gazebo中用于描述仿真的基本物体与环境.</p>
<p>在sdf文件的根目录下, 启动gazebo</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ign gazebo &lt;sdf_file&gt;</span><br></pre></td></tr></table></figure></div>

<p>在sdf中添加自己的机器人, 例如下方添加一个简单的差速轮式机器人</p>
<p>一个机器人主要用<model>这个标签来描述, 一个model中可以包含多个<link>即为机器人的各个组件, 通过<joint>来连接这些组件.</p>
<p>每个link主要通过<pose>, <inertial>, <visual>, <collision>来描述其参数.</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">model</span> <span class="attr">name</span>=<span class="string">&quot;vehicle_blue&quot;</span> <span class="attr">canonical_link</span>=<span class="string">&#x27;chassis&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;world&#x27;</span>&gt;</span>0 0 0 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">frame</span> <span class="attr">name</span>=<span class="string">&#x27;caster_frame&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span>&gt;</span>0.8 0 -0.2 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&#x27;chassis&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;__model__&#x27;</span>&gt;</span>0 0 0 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span> <span class="comment">&lt;!--inertial properties of the link mass, inertia matix--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span>&gt;</span>1.14395<span class="tag">&lt;/<span class="name">mass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixx</span>&gt;</span>0.095329<span class="tag">&lt;/<span class="name">ixx</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixy</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyy</span>&gt;</span>0.381317<span class="tag">&lt;/<span class="name">iyy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">iyz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">izz</span>&gt;</span>0.476646<span class="tag">&lt;/<span class="name">izz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">inertia</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&#x27;visual&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">size</span>&gt;</span>2.0 1.0 0.5<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--let&#x27;s add color to our link--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ambient</span>&gt;</span>0.0 0.0 1.0 1<span class="tag">&lt;/<span class="name">ambient</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">diffuse</span>&gt;</span>0.0 0.0 1.0 1<span class="tag">&lt;/<span class="name">diffuse</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">specular</span>&gt;</span>0.0 0.0 1.0 1<span class="tag">&lt;/<span class="name">specular</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&#x27;collision&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">size</span>&gt;</span>2.0 1.0 0.5<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&#x27;left_wheel&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;chassis&#x27;</span>&gt;</span>-0.5 0.6 0 -1.5707 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixx</span>&gt;</span>0.043333<span class="tag">&lt;/<span class="name">ixx</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixy</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyy</span>&gt;</span>0.04333<span class="tag">&lt;/<span class="name">iyy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">iyz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">izz</span>&gt;</span>0.08<span class="tag">&lt;/<span class="name">izz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">inertia</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&#x27;visual&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ambient</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">ambient</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">diffuse</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">diffuse</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">specular</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">specular</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&#x27;collision&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&#x27;right_wheel&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;chassis&#x27;</span>&gt;</span>-0.5 -0.6 0 -1.5707 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixx</span>&gt;</span>0.043333<span class="tag">&lt;/<span class="name">ixx</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixy</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyy</span>&gt;</span>0.04333<span class="tag">&lt;/<span class="name">iyy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">iyz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">izz</span>&gt;</span>0.08<span class="tag">&lt;/<span class="name">izz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">inertia</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&#x27;visual&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ambient</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">ambient</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">diffuse</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">diffuse</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">specular</span>&gt;</span>1.0 0.0 0.0 1<span class="tag">&lt;/<span class="name">specular</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&#x27;collision&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--caster wheel--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&#x27;caster&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;caster_frame&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixx</span>&gt;</span>0.016<span class="tag">&lt;/<span class="name">ixx</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixy</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ixz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">ixz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyy</span>&gt;</span>0.016<span class="tag">&lt;/<span class="name">iyy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">iyz</span>&gt;</span>0<span class="tag">&lt;/<span class="name">iyz</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">izz</span>&gt;</span>0.016<span class="tag">&lt;/<span class="name">izz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">inertia</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&#x27;visual&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sphere</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ambient</span>&gt;</span>0.0 1 0.0 1<span class="tag">&lt;/<span class="name">ambient</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">diffuse</span>&gt;</span>0.0 1 0.0 1<span class="tag">&lt;/<span class="name">diffuse</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">specular</span>&gt;</span>0.0 1 0.0 1<span class="tag">&lt;/<span class="name">specular</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&#x27;collision&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sphere</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Left wheel joint--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&#x27;left_wheel_joint&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;revolute&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;left_wheel&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span>&gt;</span>chassis<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span>&gt;</span>left_wheel<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xyz</span> <span class="attr">expressed_in</span>=<span class="string">&#x27;__model__&#x27;</span>&gt;</span>0 1 0<span class="tag">&lt;/<span class="name">xyz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">limit</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">lower</span>&gt;</span>-1.79769e+308<span class="tag">&lt;/<span class="name">lower</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">upper</span>&gt;</span>1.79769e+308<span class="tag">&lt;/<span class="name">upper</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">limit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">axis</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Right wheel joint--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&#x27;right_wheel_joint&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;revolute&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pose</span> <span class="attr">relative_to</span>=<span class="string">&#x27;right_wheel&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span>&gt;</span>chassis<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span>&gt;</span>right_wheel<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xyz</span> <span class="attr">expressed_in</span>=<span class="string">&#x27;__model__&#x27;</span>&gt;</span>0 1 0<span class="tag">&lt;/<span class="name">xyz</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">limit</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">lower</span>&gt;</span>-1.79769e+308<span class="tag">&lt;/<span class="name">lower</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">upper</span>&gt;</span>1.79769e+308<span class="tag">&lt;/<span class="name">upper</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">limit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">axis</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Caster wheel joint--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&#x27;caster_joint&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;ball&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span>&gt;</span>chassis<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span>&gt;</span>caster<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/30/ROS2%E5%85%A5%E9%97%A8/2.png"
                      class="" width="500"
                >

<h3 id="通过Plugin控制机器人"><a href="#通过Plugin控制机器人" class="headerlink" title="通过Plugin控制机器人"></a>通过Plugin控制机器人</h3><p>通过<code>diff_drive</code>这个plugin来控制上述建立的差速轮式机器人.</p>
<p>在sdf文件中的<model>添加<plugin>标签</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span></span></span><br><span class="line"><span class="tag">    <span class="attr">filename</span>=<span class="string">&quot;libignition-gazebo-diff-drive-system.so&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;ignition::gazebo::systems::DiffDrive&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">left_joint</span>&gt;</span>left_wheel_joint<span class="tag">&lt;/<span class="name">left_joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">right_joint</span>&gt;</span>right_wheel_joint<span class="tag">&lt;/<span class="name">right_joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">wheel_separation</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">wheel_separation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">wheel_radius</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">wheel_radius</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">odom_publish_frequency</span>&gt;</span>1<span class="tag">&lt;/<span class="name">odom_publish_frequency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">topic</span>&gt;</span>cmd_vel<span class="tag">&lt;/<span class="name">topic</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>在命令行中, 给<code>cmd_vel</code>这个topic发送数据</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ign topic -t <span class="string">&quot;/cmd_vel&quot;</span> -m ignition.msgs.Twist -p <span class="string">&quot;linear: &#123;x: 0.5&#125;, angular: &#123;z: 0.05&#125;&quot;</span></span><br></pre></td></tr></table></figure></div>
<p>此时小车就会开始运动.</p>
<h3 id="ROS2-Gazebo联合仿真"><a href="#ROS2-Gazebo联合仿真" class="headerlink" title="ROS2+Gazebo联合仿真"></a>ROS2+Gazebo联合仿真</h3><p>通过ros_gz_bridge来实现ros2和gazebo的通信;</p>
<p>格式:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run ros_gazebo_bridge parameter_bridge /Topic@ROS_MSG_TYPE@GAZEBO_MSG_TYPE</span><br></pre></td></tr></table></figure></div>

<p>例如</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">ros2 run ros_gz_bridge parameter_bridge /keyboard/keypress@std_msgs/msg/Int32@ignition.msgs.Int32</span><br></pre></td></tr></table></figure></div>

<ul>
<li>&#x2F;keyboard&#x2F;keypress: ROS2的topic</li>
<li>std_msgs&#x2F;msg&#x2F;Int32: ROS2的消息类型</li>
<li>ignition.msgs.Int32: Gazebo的消息类型</li>
</ul>
<h2 id="ROS2-Control"><a href="#ROS2-Control" class="headerlink" title="ROS2 Control"></a>ROS2 Control</h2>]]></content>
      <categories>
        <category>Robotics</category>
        <category>Software</category>
      </categories>
  </entry>
  <entry>
    <title>RobotStudio控制ABB机械臂</title>
    <url>/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/</url>
    <content><![CDATA[<h2 id="更新插件"><a href="#更新插件" class="headerlink" title="更新插件"></a>更新插件</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/3.png"
                      class="" width="400"
                >

<p>在<code>Add-Ins</code>中找到RobotWare的插件, 然后在右边选择添加, 右下角会有下载的进度条.</p>
<h2 id="插入ABB机械臂模型"><a href="#插入ABB机械臂模型" class="headerlink" title="插入ABB机械臂模型"></a>插入ABB机械臂模型</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/1.png"
                      class="" width="400"
                >

<p>在开始页面设置好参数，然后创建机器人；</p>
<p>选择<code>控制器</code>-<code>添加控制器</code></p>
<h2 id="基本控制"><a href="#基本控制" class="headerlink" title="基本控制"></a>基本控制</h2><p>等待机器人加载出来, 通过以下键位进行操作;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/4.png"
                      class="" width="400"
                >

<ul>
<li><code>Ctrl+Shift+左键</code>可以对页面进行旋转;</li>
<li><code>Ctrl+左键</code>对页面进行平移;</li>
<li><code>鼠标滚轮</code>缩放大小;</li>
</ul>
<p>选择<code>基本</code>-<code>手动关节</code>可以对机器人进行拖动；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/2.png"
                      class="" width="400"
                >

<p>点击正上方的<code>示教目标点</code>, 生成数个目标点，然后点击添加路径</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/19/RobotStudio%E6%8E%A7%E5%88%B6ABB%E6%9C%BA%E6%A2%B0%E8%87%82/5.png"
                      class="" width="300"
                >

<p>通过左侧的设计树来进行查看目标点和路径, 点击第一个点, 按住<code>Shift</code>, 点击最后一个点, 右键, 选择<code>添加新路径</code>, 生成路径<code>Path_10</code></p>
<p>右键<code>Path_10</code>，选择<code>沿着路径运动</code>, 即可看到路径规划.</p>
<p>如果需要设置目标点的六维坐标, 右键目标点, 选择<code>修改目标</code>-<code>设定位置</code></p>
<h2 id="夹爪控制"><a href="#夹爪控制" class="headerlink" title="夹爪控制"></a>夹爪控制</h2><p>详情见手册;</p>
]]></content>
      <categories>
        <category>Robotics</category>
      </categories>
  </entry>
  <entry>
    <title>Mathematical Modeling in Science and Engineering</title>
    <url>/2024/08/16/Mathematical-Modeling-in-Science-and-Engineering/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Mathematics</category>
      </categories>
  </entry>
  <entry>
    <title>Research Investigation</title>
    <url>/2024/07/18/Research-Investigation/</url>
    <content><![CDATA[<h2 id="RA-L"><a href="#RA-L" class="headerlink" title="RA-L"></a>RA-L</h2><h3 id="Dynamic-Viewpoint-Based-Obstacle-Avoidance-of-Robotic-Arms-in-Complex-Environments"><a href="#Dynamic-Viewpoint-Based-Obstacle-Avoidance-of-Robotic-Arms-in-Complex-Environments" class="headerlink" title="Dynamic Viewpoint-Based Obstacle Avoidance of Robotic Arms in Complex Environments"></a>Dynamic Viewpoint-Based Obstacle Avoidance of Robotic Arms in Complex Environments</h3><p>北京化工大学<br>2023<br>RA-L ISRIMT</p>
<p>这篇文章主要是研究一个移动机器人上的机械臂面对动态变化环境的路径规划，提出了一种局部环境构建策略来改进复杂环境中移动探测机器人机械臂的路径规划效率，通过构建局部环境进行路径规划，从而减少不必要的模型构建，提高避障效率。方法是 the axis-aligned boundary box (AABB) based on octree partitioning for collision detection analysis，通过仿真实验验证了这种方法的有效性。</p>
<h2 id="Nature-Machine-Intelligence"><a href="#Nature-Machine-Intelligence" class="headerlink" title="Nature Machine Intelligence"></a>Nature Machine Intelligence</h2><h2 id="IEEE"><a href="#IEEE" class="headerlink" title="IEEE"></a>IEEE</h2><h3 id="Manipulator-Reinforcement-Learning-with-Mask-Processing-Based-on-Residual-Network"><a href="#Manipulator-Reinforcement-Learning-with-Mask-Processing-Based-on-Residual-Network" class="headerlink" title="Manipulator Reinforcement Learning with Mask Processing Based on Residual Network"></a>Manipulator Reinforcement Learning with Mask Processing Based on Residual Network</h3><p>西安电子科技大学<br>2023.5</p>
<p>该文章采用视觉支持的方法，使得UR机械臂能够在随机环境中学习抓取物体的技能，深度强化学习算法可以有效地学习视觉支持映射，以指导机械臂的抓取动作。为了验证设计的算法，本文在CoppeliaSim仿真平台上构建了一个机械臂抓取系统和测试场景。仿真结果表明，深度强化学习算法结合残差网络（ResNet）可以使机械臂获得较高的目标块抓取成功率。实验结果显示，该方法显著提高了机械臂的抓取效率。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_3.png"
                      class="" width="600"
                >

<h3 id="Path-Planning-for-Robotic-Manipulator-in-Complex-Multi-Obstacle-Environment-Based-on-Improved-RRT"><a href="#Path-Planning-for-Robotic-Manipulator-in-Complex-Multi-Obstacle-Environment-Based-on-Improved-RRT" class="headerlink" title="Path Planning for Robotic Manipulator in Complex Multi-Obstacle Environment Based on Improved_RRT"></a>Path Planning for Robotic Manipulator in Complex Multi-Obstacle Environment Based on Improved_RRT</h3><p>2022.4<br>IEEE TMECH</p>
<p>本文提出了一种改进的快速随机树（Improved_RRT）方法，用于在复杂障碍环境中为机械臂规划成功且实际可执行的路径。</p>
<p>Improved_RRT方法通过混合约束采样、RRT_Connect与人工势场法结合、自适应引力场、动态步长和新节点约束策略的使用，有效提高了复杂障碍环境中机械臂路径规划的成功率和效率。仿真和实验结果表明，该方法在安全性、路径优化和综合性能方面具有显著优势。</p>
<ol>
<li>Introduction</li>
</ol>
<p>介绍了一些传统的路径规划方法：</p>
<ul>
<li>The particle swarm optimization.</li>
<li>genetic algorithm</li>
<li>APF method</li>
<li>A* algorithm</li>
</ul>
<p>这些传统方法在高维路径中存在一些问题；</p>
<blockquote>
<p>However, when applied to high-dimensional path planning problems, they are time-consuming and fall easily into the problem of local minimum.</p>
</blockquote>
<p>然后是RRT算法，RRT算法因为大大降低了工作空间中障碍物建模不准确而导致的规划时间成本，因此广泛用于机械臂路径规划中；</p>
<p>但是RRT算法也具有收敛慢，容易陷入局部最优等问题；</p>
<p>后人改良的算法有：</p>
<ul>
<li>RRT-Connect</li>
<li>RRT*</li>
<li>HD-RRT*</li>
<li>PGS_RRT*</li>
</ul>
<p>改进后的Improved_RRT算法有三个创新点：</p>
<ul>
<li><p>采用混合约束采样代替原来的随机采样，得到的节点分布更接近障碍物之间的可通过区域，改进了RRT_Connect方法；</p>
<blockquote>
<p>Using hybrid constrained sampling instead of the original random sampling, the node distribution obtained by sampling is close to the passable area between obstacle;</p>
</blockquote>
</li>
<li><p>采用双竞争树和动态目标点，同时提出新的自适应步长和新的节点约束策略，减少了过度的探索和碰撞区域扩展；</p>
<blockquote>
<p>The method of double-competition tree and dynamic target points is used in the expansion. At the same time, an adaptive step size and new node constraint strategy are proposed.</p>
</blockquote>
</li>
<li><p>动态运动规划适用于不同的场景，并且优化了算法适用于各种实际场景；</p>
</li>
</ul>
<ol start="2">
<li>Collision Detection</li>
</ol>
<p>采用 Flexible collision library (FCL) 进行碰撞检测，FCL是一种高效的碰撞检测库，可以检测机械臂的碰撞。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_4.png"
                      class="" width="400"
                >

<p>这个碰撞检测的实现是通过线，点和曲面的碰撞检测；</p>
<ol start="3">
<li>Hybrid Constrained Sampling</li>
</ol>
<p>在n维空间中采用高斯混合模型进行约束采样，得到的节点分布更接近障碍物之间的可通过区域，该文章在此基础上再进行了优化，得到了 hybrid constrained sampling.</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_5.png"
                      class="" width="400"
                >


<ol start="4">
<li>Adjacent Node Expansion</li>
</ol>
<p>Standard RRT_Connect 算法的节点扩展速度非常慢</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_6.png"
                      class="" width="400"
                >

<ol start="5">
<li>Optimization &amp; Experimental Verification</li>
</ol>
<p>这一步的优化中解决了三个问题：</p>
<ul>
<li>路径规划中的局部极小值<ul>
<li>通过基于虚拟目标点的方法，使得机械臂逃脱局部极小值约束；</li>
</ul>
</li>
<li>在动态环境下的路径规划，常会遇到动态障碍物和路径中的奇异点，会对路径的稳定性和规划效率产生影响；<ul>
<li>改进动态路径规划算法，主要是局部重新规划和双树搜索策略，避免局部极小值点</li>
</ul>
</li>
<li>路径规划过程中可能会生成一些不必要的中间路径点，导致路径振荡，尤其是在起点和终点附近的障碍物区域。<ul>
<li>路径规划过程中可能会生成一些不必要的中间路径点，导致路径振荡，尤其是在起点和终点附近的障碍物区域。</li>
</ul>
</li>
</ul>
<p>改进之后的算法效果</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_8.png"
                      class="" width="900"
                >

<p>实际实验结果</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_7.png"
                      class="" width="300"
                >


<h3 id="Optimizing-7-DOF-Robot-Manipulator-Path-Using-Deep-Reinforcement-Learning-Techniques"><a href="#Optimizing-7-DOF-Robot-Manipulator-Path-Using-Deep-Reinforcement-Learning-Techniques" class="headerlink" title="Optimizing 7-DOF Robot Manipulator Path Using Deep Reinforcement Learning Techniques"></a>Optimizing 7-DOF Robot Manipulator Path Using Deep Reinforcement Learning Techniques</h3><p>IEEE International Symposium on Robotic and Sensors Environments (ROSE)</p>
<p>Machine Learning Department, MBZUAI, UAE</p>
<p>2024.7</p>
<p>探讨了三种不同的深度强化学习（DRL）方法：Deep Q-Network (DQN), Actor-Critic (AC), and Proximal Policy Optimization (PPO)，以优化7自由度（7-DOF）机器人机械臂（特别是Kinova Jaco辅助机器人）的路径规划。</p>
<p>通过仿真验证了这三种方法在静态环境中的路径规划能力。</p>
<p>结果显示，PPO在复杂环境中表现最为优越，能够更稳定地找到平滑的无障碍路径，而DQN和AC的表现稍逊一筹。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/07/18/Research-Investigation/fig_10.png"
                      class="" width="600"
                >]]></content>
      <categories>
        <category>Scientific Research</category>
      </categories>
  </entry>
  <entry>
    <title>State Drop Compensator with Zero Speed Droop</title>
    <url>/2025/01/16/State-Drop-Compensator-with-Zero-Speed-Droop/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Vscode开发环境搭建</title>
    <url>/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="Vscode-CMake-开发cpp"><a href="#Vscode-CMake-开发cpp" class="headerlink" title="Vscode + CMake 开发cpp"></a>Vscode + CMake 开发cpp</h2><h3 id="基本组件安装"><a href="#基本组件安装" class="headerlink" title="基本组件安装"></a>基本组件安装</h3><p>Vscode, Cmake均在官网进行安装;</p>
<p><a class="link"   href="https://cmake.org/download/" >CMake<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>注意要安装Windows的x64版本,选择.msi的文件进行下载和安装;</p>
<p>需要将CMake添加到Path(默认选项);</p>
<p>在vscode中安装<code>CMake</code>, <code>CMake Tools</code>, <code>C++</code>等相关插件;</p>
<h3 id="安装编译器并且配置环境"><a href="#安装编译器并且配置环境" class="headerlink" title="安装编译器并且配置环境"></a>安装编译器并且配置环境</h3><p>参考教程:</p>
<p><a class="link"   href="https://code.visualstudio.com/docs/cpp/config-mingw" >Using GCC with MinGW<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>安装MSYS2</p>
<p><a class="link"   href="https://github.com/msys2/msys2-installer/releases/download/2024-01-13/msys2-x86_64-20240113.exe" >MSYS32<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>点击完成之后会生成终端, 输入:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S --needed base-devel mingw-w64-ucrt-x86_64-toolchain</span><br></pre></td></tr></table></figure></div>
<p>中间按<code>Enter</code>默认安装;</p>
<p>然后将<code>C:\msys64\mingw64\bin</code>添加到系统环境变量中;</p>
<p>测试:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">gcc --version</span><br><span class="line">g++ --version</span><br><span class="line">gdb --version</span><br></pre></td></tr></table></figure></div>

<p>如果需要对编译器进行更新, 同样先启动MSYS2终端, 然后输入:</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -Suy</span><br></pre></td></tr></table></figure></div>

<p>vscode需要重启才能刷新环境变量, 因此安装完组件和添加路径之后一定要重新启动vscode(在vscode的终端中检查cmake, gcc等组件是否能够正常使用);</p>
<h3 id="Hello-World测试"><a href="#Hello-World测试" class="headerlink" title="Hello World测试"></a>Hello World测试</h3><p>通过<code>Ctrl+Shift+P</code>打开命令面板, 输入<code>CMake: Quick Start</code>, 输入工程名<code>hello_world</code>, 然后选择:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/2.png"
                      class="" width="500"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/3.png"
                      class="" width="500"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/4.png"
                      class="" width="500"
                >

<p>一定要选择对应的编译器, 不然CMake Tools会报错:配置失败;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5.png"
                      class="" width="500"
                >

<p>该步骤会生成<code>CMakePresets.json</code>文件, 里面包含编译器的路径, 最后点击<code>Enter</code>确认;</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurePresets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GCC 13.1.0 x86_64-w64-mingw32 (ucrt64)&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GCC 13.1.0 x86_64-w64-mingw32 (ucrt64)&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;使用编译器: C = D:\\msys64\\ucrt64\\bin\\gcc.exe, CXX = D:\\msys64\\ucrt64\\bin\\g++.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;generator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MinGW Makefiles&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;binaryDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/out/build/$&#123;presetName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cacheVariables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_INSTALL_PREFIX&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/out/install/$&#123;presetName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_C_COMPILER&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/msys64/ucrt64/bin/gcc.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_CXX_COMPILER&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/msys64/ucrt64/bin/g++.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p>在底部有调试和运行按钮, 分别点击这两个按钮, 然后进入hello_world.exe的终端, 即<code>build</code>目录, 输入:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/7.png"
                      class="" width="500"
                >

<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">./hello_world.exe</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6.png"
                      class="" width="500"
                >


<h2 id="Vscode-ssh-X11-可视化开发"><a href="#Vscode-ssh-X11-可视化开发" class="headerlink" title="Vscode + ssh + X11 可视化开发"></a>Vscode + ssh + X11 可视化开发</h2><h3 id="下载安装X11-server"><a href="#下载安装X11-server" class="headerlink" title="下载安装X11 server"></a>下载安装X11 server</h3><p><a class="link"   href="https://sourceforge.net/projects/vcxsrv/" >VcXsrv Windows X Server<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a><br><a class="link"   href="https://sourceforge.net/projects/xming/" >Xming X Server for Windows<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>安装完成之后打开<code>XLaunch</code>，选择<code>Multiple windows</code>，<code>Start no client</code>，Extra settings选择前两个选项，完成后保存配置文件。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/fig_1.png"
                      class="" width="400"
                >


<h3 id="设置系统变量"><a href="#设置系统变量" class="headerlink" title="设置系统变量"></a>设置系统变量</h3><ul>
<li><p>Windows客户端</p>
<ul>
<li>打开<code>powershell</code>, 输入<code>setx DISPLAY &quot;127.0.0.1:0.0&quot;</code>, 然后重启终端;</li>
<li>在终端输入<code>echo $env:DISPLAY</code>来验证, 输出为<code>127.0.0.1:0.0</code>即为成功.;</li>
</ul>
</li>
<li><p>Linux服务器</p>
<ul>
<li>在<code>~/.bashrc</code>中添加<code>export DISPLAY=&quot;localhost:10.0&quot;</code>, 然后<code>source ~/.bashrc</code>;</li>
<li>在终端输入<code>echo $DISPLAY</code>来验证, 输出为<code>localhost:10.0</code>即为成功.;</li>
</ul>
</li>
</ul>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>在vscode中修改ssh配置文件</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host 10.30.47.11</span><br><span class="line">  HostName 10.30.47.11</span><br><span class="line">  User amdt</span><br><span class="line">  ForwardAgent yes</span><br><span class="line">  ForwardX11 yes</span><br><span class="line">  ForwardX11Trusted yes</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/09/14/Vscode%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/fig_2.png"
                      class="" width="800"
                >

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>连接后在终端输入</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">xclock</span><br><span class="line">xeyes</span><br><span class="line">xcalc</span><br></pre></td></tr></table></figure></div>
<p>即可打开GUI界面.</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://code.visualstudio.com/docs/cpp/config-mingw" >Using GCC with MinGW<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://blog.csdn.net/qq_37103755/article/details/128453185" >04-vscode搭建cmake的编译环境<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://zhuanlan.zhihu.com/p/677592053" >QT开发 2024最新版本优雅的使用vscode开发QT<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://blog.csdn.net/Stone_hello/article/details/120041495" >vscode远程连接服务器+X11插件图形化界面<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://blog.dengqi.org/posts/%E4%BD%BF%E7%94%A8-windows-%E8%87%AA%E5%B8%A6ssh%E7%9A%84x11%E8%BD%AC%E5%8F%91%E5%8A%9F%E8%83%BD%E5%B9%B6%E9%85%8D%E7%BD%AEssh%E5%92%8Cvscode/#:~:text=%E4%BD%BF%E7%94%A8" >使用 Windows 自带 ssh 的 X11转发功能并配置 ssh 和 VSCode<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Basic Computer Programming</category>
      </categories>
  </entry>
  <entry>
    <title>Work Summary (2024.12-2025.6)</title>
    <url>/2024/12/23/Work-Summart-2024-12-2025-6/</url>
    <content><![CDATA[
<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="b0e89f3b324261bf374fc36b94e0cfb3c4ca7add7eb53ce46f2c3828230ccdf0">2f6169c944c4a66dcc0bf1536b4d3a5921dbdaa74ae65de6fa8e4e72e87b72add76224cce918ac7aa70d8d44734510a617ec2d1f2cb8ac062a035e816acdac8c3ad68f6489214429f0f12b96bd756a26e6456c12bfe601441cc330c97a78a73881d9921d2c8cae4f2ce4b28b2809c891d557a4e7c6f3d48ef6edac6aa205339b21266803fddbec6b14f4add425f93948091b85c56f992df5f10b371532aabdad7da8a778ce6783aea7b787a79e5e6cce4645cc04e3a2456151170b6165f8199a8a205a5772fe9ff169c9c65fbed88393553989c6ed6f010eba2b3f4e9ea4e9d6eb4a8909540ff200feda4364f8df06937222beaf52969530f73cf3df199d8a5a75847b4cc0458d6b5c20bc231b31c9512de82ffc33434a3544a58d8f34c1c64d1cce402d8215909082f58e3472316db56450215c8146c5b56c6e8885b8fe8e8bc6bee4c1febb371342157f2fe4378ae825672b9f1cdde2a9dc90e83d5b3977f75b7986e1df4da9b9ec36735991d1a5ab189e166daf4c484324119a389f1c2de4dd5c3596f2e3f09325bda56b724570220e93b362b2b0c620059fea0954a433965775bcf7440c0c18dbbeaf108ff4dd5b4147522696495af3026cab2f45cf47bd3e12be6fd41b18a1ab0314f67ed16a9e876917963355f528c528b782e979af2ef329fb48d475cdf6b6720a932117f27455ea2fdd22efc2ca0fa47a9b40ed91e3d5ab56f8d6220eebeec132298644c08110b426f3d1ffc774b791799901993485c5df2f031b4e4aafac91cbd978c1cc18a09ba4950ec9d5ba6520cc800cebe82825eb859b55cfb8aa57db2ce22afcab579e8ed985e5b01f00fa5190ddbdcfd423c14020f0ff1bca7504102d3c80116f38914de30309e8d8981e1062d51296e6dd19b76e823c73386681156c2c30f0b667ca64f95cbcddee7214ecd01e2f42a79cf80b5623c4dd9afc31d49fddd9d21c4a994b50283846bb5bd883c4968b55f32cab63eb8f6cb206c48b4e250cde980f1fd270649f48e8600fc0d3edbd1fa5443c9d356002fd7b74ebf64907cf3953abb6127ecacf44768e6c68955f78eaac03069f8d9ef9e687ad082ecd1b2536a02a17e39cee7b50984ab22adde3b0668ab915f2cf825c3cbe29c42f8386d7149450e19bff50ce02fca44178945f9d667701a264d8def3af3631a0b7281f82decffc90df3fd63a1cf8f95e79e0a318b8190ec4b6844deeee83f91d9414ef161d1856c291441ae8a5483ab582aba92037ef3da4cda724f9581085f103dd1229849fef2634a271dab461a46dad3fb0db3a35fd0ea5a4b856b0541e9e7cfbde2a67893b5417f1bef27fece0487228dcebe247a0a570a980178632980a2ac38ce9c17adebdfdf4058be13b888ca4f95f72b168d7f0f2576ab852eeba5b9fed0bc17ffc54f7e7ff442b1cd59268d6b797bf821bfc184191ec28ab893edc7d20f560a835f8bffff39f35635f1f796ff1b201976adc9201440b10fb09d94fc1398830567030e8931c33f43e1daaa76bba8fd157ff3102833edf157004a13d51dca91e7e0e405948316bb1078e0193ea273634d47cebc11fcc0a50266ecb975f1684a1772820955820f37a84930223dfe6b165f807d8253d0755183bf7cfa3ce7613609f1842c84533b66378e235fc67ad266e1af6f302982d4f5819ebd0815026cf11ee42126722bde590fbfdf3862dfdd4e55582246f893f4dea58cddf969c26efb3aa4138192c355b8579b2d4b5163c717b8ddc8b202802e993804dd261f9e269b9bb6a29c439f46626140892d3090f55a5c51ff68e83d9b147cfb54f199d2d9b141728b195c0c86b380066b73d0da87de37b30e1b25197c364f3837857ca18e944c440ac063b3f04cbe0c145104bd1d7415f4cca5ba79a1826fb3e4d2eb8aaa6a1343ec408c768b50f2ffed9a50e778977940c7f671a800378dbb7e37ceda9f983eb6859bad6bda14e33206a0fc074294571b923277fefd09c7e0c5657aa4cdd7c4e8e42f811cb12961cca261ac4a2e354bab10e56d37454c7e46bbcadd0b9e8b22c1aba1af0399ea615befc970380f12a3531c8225f5a1780235e90e0b3ed53ea8219dfa2513caeabdf7c1afe5b360f4b6c5113cf01f341da7888a91893bcd31175518c4e4b3257e59d06d6f87befe29fb7c9d1ba660ca1e6cb7bf8c50a419b3b972f0af1181b284c70fb25518e3648e786f43aa24c70712273f549f2ad7b7074f7d070e1e4ac71e89de4cc61573a81773f9e072ec465726df6e8975168a59e1304f8b2426b80605e4136c262255535ce1b115e2d83660c1ab02e6fe474d04dd5215b76decf0b5019b68bc880abaed9d3955e54dda31bc0d736d7c360f52b62549d7ac7f0c2840763de7173840c1328fb7ff994068cacacc28af2bc73c20737d94b145d8fd20cb7ca7f7a919105b91fb7d373c2739a0edf4e9a89d6761ff86dc72091af43775531d1fa9939f973cbfb533695ee4fde985e385facb0ada39abb77d2c61ff604a4bef9940cdca61e7e8d940e091f3c7657fd52ec2ddcfdb12755133592a7b7baa96152385a4738fb3fdafd4f5dbe28328a814821464fa1d3e72a2ba9a996518b82b71520fab4b6c7c5dcd9c730dae8f86c1425880fa616dffe9397ced93a4996cf5b1cb4f44945b7608d7633180a8f1c78d45dd2925b27afa244f5ede6e414f145e631a225b51827898be9195e42e9e51f26955e6b7b2e620e969ce051e5ffeb692fb2ee878135d3bd1aac6e191715beb3e66e4375c3e826401aa6674f539e7ca78756fc76a7ee5716ec8f936429191fb6a1c7fcef118ed38109557a78796fa22f37c24214e7eb10ba32dce745ed8905d5cdad61e3de58bee7e57fd1bc7b27d68b683ff6352da4f25d9a2e7fb44738a43de308e5190ae201787062c71640ac41588610eb018906c0dc5aa770257f4f2a5dd02a39429a8277d52cbfd9f2ae725918366d3c0e64767ac9a0cb63ca241f57be1b448822c25134a71f68f5ce4ab0c1a40c6e8d7495425f087b9534c47003</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<link href="/css/hbe.style.css" rel="stylesheet" type="text/css"><script data-swup-reload-script type="module" src="/js/plugins/hbe.js"></script>
<script data-swup-reload-script type="module">
import {initHBE} from "/js/plugins/hbe.js";
  console.log("hexo-blog-encrypt: loaded.");
    initHBE();
</script>
]]></content>
      <categories>
        <category>Scientific Research</category>
      </categories>
  </entry>
  <entry>
    <title>STM32入门</title>
    <url>/2023/05/29/stm32%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="开发环境搭建-点亮LED"><a href="#开发环境搭建-点亮LED" class="headerlink" title="开发环境搭建(点亮LED)"></a>开发环境搭建(点亮LED)</h2><p>采用cortex-debug进行调试。</p>
<h3 id="下载GCC-ARM工具链"><a href="#下载GCC-ARM工具链" class="headerlink" title="下载GCC ARM工具链"></a>下载GCC ARM工具链</h3><p><a class="link" href="https://developer.arm.com/downloads/-/gnu-rm">GNU Arm Embedded Toolchain Downloads<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>选择最新的版本，后缀为<code>win32.exe</code>的文件。</p>
<p>安装完成后将其添加到系统变量，勾选第三项;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_1.png" class="" width="400">

<p>在命令行中输入<code>arm-none-eabi-gcc --version</code>来验证是否安装成功并且添加到路径；</p>
<h3 id="下载OpenOCD"><a href="#下载OpenOCD" class="headerlink" title="下载OpenOCD"></a>下载OpenOCD</h3><p><a class="link" href="https://github.com/openocd-org/openocd/releases">Open On-Chip Debugger<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>解压完成之后需要手动将根目录下的<code>bin</code>文件夹添加到系统变量。</p>
<p>最后在命令行中输入 <code>openocd --version</code> 来检查 OpenOCD 是否安装成功并且添加到路径；</p>
<h3 id="添加cortex-debug插件"><a href="#添加cortex-debug插件" class="headerlink" title="添加cortex-debug插件"></a>添加cortex-debug插件</h3><p>在vscode中搜索这个插件，安装；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_2.png" class="" width="600">

<h3 id="下载GNU-make"><a href="#下载GNU-make" class="headerlink" title="下载GNU make"></a>下载GNU make</h3><p><a class="link" href="https://www.mingw-w64.org/downloads/">MinGW Download<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<blockquote>
<p>MinGW（Minimalist GNU for Windows）是一个可以在Windows环境下运行的GNU编译器套装，包括GCC（GNU Compiler Collection，GNU编译器套件）和其他一些开源工具。</p>
</blockquote>
<p>通过下载MinGW来获取GNU make，下载对应的windows版本即可，记得添加路径。</p>
<p>在命令行中输入 make -v 来检查是否安装成功。</p>
<h3 id="下载CubeMX"><a href="#下载CubeMX" class="headerlink" title="下载CubeMX"></a>下载CubeMX</h3><p>CubeMX用于生成stm32调试的基本代码，通过图形化的方式对stm32进行一个基础的硬件设置。</p>
<p><a class="link" href="https://www.st.com/en/development-tools/stm32cubemx.html#get-software">STM32CubeMX<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="利用CubeMX生成工程文件夹"><a href="#利用CubeMX生成工程文件夹" class="headerlink" title="利用CubeMX生成工程文件夹"></a>利用CubeMX生成工程文件夹</h3><p>选择<code>File</code>然后选择<code>New Project ...</code>或者Ctrl+N来新建工程；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_4.png" class="" width="600">

<p>左上角写入stm32的型号，然后在中间下面的众多型号中进行选择，上方可下载对应的芯片手册，右上方点击 <code>Start Project</code>;</p>
<p>先设置<code>Pinout &amp; Configuration</code></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_6.png" class="" width="400">
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_7.png" class="" width="400">

<p>为了点亮一个LED灯，这里将PB0设置为<code>GPIO_Output</code></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_12.png" class="" width="400">

<p><code>Clock Configuration</code>的配置如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_5.png" class="" width="600">

<p>在<code>Project Manager</code>中输入工程名字和配置工程路径;</p>
<p>在<code>Toolchain/IDE</code>中选择<code>Makefile</code>，</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_3.png" class="" width="800">

<p>在左边第二栏中进行如图勾选；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_8.png" class="" width="400">

<p>最后点击<code>GENERATE CODE</code>（右上）；</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>初次下载CubeMX需要安装对应stm32系类的软件包，如这里的stm32F103C8T6则需要安装stm32F1的软件包。</p>

  </div>

<p>在STM32CubeMX界面下，点击Alt+U打开软件包管理界面，在这里下载即可。</p>
<h3 id="launch-json配置"><a href="#launch-json配置" class="headerlink" title="launch.json配置"></a>launch.json配置</h3><p>创建好工程文件夹后，用vscode打开根目录，根目录的文件如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_13.png" class="" width="400">

<p>在左边菜单栏中选择<code>运行和调试</code>，然后选择<code>创建 launch.json 文件</code>，然后选择<code>cortex-debug</code>;</p>
<p>vscode会自己创建一个<code>.vscode</code>文件夹，里面包含<code>launch.json</code>文件</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="comment">// 使用 IntelliSense 了解相关属性。 </span></span><br><span class="line">    <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">    <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">"version"</span><span class="punctuation">:</span> <span class="string">"0.2.0"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"configurations"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"name"</span><span class="punctuation">:</span> <span class="string">"Cortex Debug"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"cwd"</span><span class="punctuation">:</span> <span class="string">"${workspaceFolder}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"executable"</span><span class="punctuation">:</span> <span class="string">"./bin/executable.elf"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"request"</span><span class="punctuation">:</span> <span class="string">"launch"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"cortex-debug"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"runToEntryPoint"</span><span class="punctuation">:</span> <span class="string">"main"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"servertype"</span><span class="punctuation">:</span> <span class="string">"openocd"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"configFiles"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">"interface/cmsis-dap.cfg"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"target/stm32f1x.cfg"</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></table></figure></div>
<p>需要对其进行修改，这里使用的是STM32F103和Daplink，所以需要修改<code>executable</code>和<code>configFiles</code>两个参数；</p>
<p>由于CubeMX的Makefile文件默认将<code>.elf</code>文件放在<code>build</code>文件夹下，所以需要修改<code>executable</code>为<code>./build/$executable$.elf</code>；</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="comment">// 使用 IntelliSense 了解相关属性。 </span></span><br><span class="line">    <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">    <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">"version"</span><span class="punctuation">:</span> <span class="string">"0.2.0"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"configurations"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"name"</span><span class="punctuation">:</span> <span class="string">"Cortex Debug"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"cwd"</span><span class="punctuation">:</span> <span class="string">"${workspaceFolder}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"executable"</span><span class="punctuation">:</span> <span class="string">"./build/hello_world.elf"</span><span class="punctuation">,</span> <span class="comment">// 修改这里</span></span><br><span class="line">            <span class="attr">"request"</span><span class="punctuation">:</span> <span class="string">"launch"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"cortex-debug"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"runToEntryPoint"</span><span class="punctuation">:</span> <span class="string">"main"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"servertype"</span><span class="punctuation">:</span> <span class="string">"openocd"</span><span class="punctuation">,</span> <span class="comment">// 修改这里</span></span><br><span class="line">            <span class="attr">"configFiles"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">"interface/cmsis-dap.cfg"</span><span class="punctuation">,</span>  <span class="comment">// 新增这两行</span></span><br><span class="line">                <span class="string">"target/stm32f1x.cfg"</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></table></figure></div>
<h3 id="tasks-json配置"><a href="#tasks-json配置" class="headerlink" title="tasks.json配置"></a>tasks.json配置</h3><p>在<code>.vscode</code>目录下新建<code>tasks.json</code>文件，将以下内容复制：</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"version"</span><span class="punctuation">:</span> <span class="string">"2.0.0"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"tasks"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"shell"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"label"</span><span class="punctuation">:</span> <span class="string">"Build STM32 Firmware"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"command"</span><span class="punctuation">:</span> <span class="string">"make"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"args"</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"problemMatcher"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">"$gcc"</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"group"</span><span class="punctuation">:</span> <span class="string">"build"</span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"shell"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"label"</span><span class="punctuation">:</span> <span class="string">"Build and Download"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"command"</span><span class="punctuation">:</span> <span class="string">"openocd"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"args"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">"-f"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"interface/cmsis-dap.cfg"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"-f"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"target/stm32f1x.cfg"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"-c"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">"program build/hello_world.elf verify reset exit"</span> <span class="comment">//这里改为自己的项目执行文件</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"problemMatcher"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">"$gcc"</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"group"</span><span class="punctuation">:</span> <span class="string">"build"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"dependsOn"</span><span class="punctuation">:</span> <span class="string">"Build STM32 Firmware"</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></table></figure></div>

<h3 id="C-x2F-C-配置"><a href="#C-x2F-C-配置" class="headerlink" title="C/C++ 配置"></a>C/C++ 配置</h3><p><code>Ctrl+Shift+P</code>打开<code>C/C++配置UI</code></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_14.png" class="" width="400">

<p>编译器路径修改为本地gcc安装的位置：(可以通过Everything搜索arm-none-eabi-gcc.exe来找到路径)</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:/Program Files (x86)/GNU Arm Embedded Toolchain/10 2021.10/bin/arm-none-eabi-gcc.exe</span><br></pre></td></tr></table></figure></div>

<p>IntelliSense模式修改为：gcc-arm(legacy)</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_10.png" class="" width="600">

<p>将以下内容覆盖到<code>包含路径</code></p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">${workspaceFolder}/**</span><br><span class="line">${workspaceFolder}/Core/Inc</span><br><span class="line">${workspaceFolder}/Drivers/STM32F1xx_HAL_Driver/Inc</span><br><span class="line">${workspaceFolder}/Drivers/STM32F1xx_HAL_Driver/Inc/Legacy</span><br><span class="line">${workspaceFolder}/Drivers/CMSIS/Device/ST/STM32F1xx/Include</span><br><span class="line">${workspaceFolder}/Drivers/CMSIS/Include</span><br></pre></td></tr></table></figure></div>

<p>以下内容覆盖到<code>定义</code></p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">_DEBUG</span><br><span class="line">UNICODE</span><br><span class="line">_UNICODE</span><br><span class="line">USE_HAL_DRIVER</span><br><span class="line">STM32F103xB</span><br></pre></td></tr></table></figure></div>

<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_11.png" class="" width="600">

<p>修改成功后，在.vscode目录下自动生成配置文件<code>c_cpp_properties.json</code>, 表示配置成功。</p>
<p>烧录器连接：（Daplink）</p>
<table>
<thead>
<tr>
<th>stm32</th>
<th>Daplink</th>
</tr>
</thead>
<tbody><tr>
<td>3v3</td>
<td>3v3</td>
</tr>
<tr>
<td>SWIO</td>
<td>SDO</td>
</tr>
<tr>
<td>SWCLK</td>
<td>SCK</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
</tbody></table>
<p>在main.c下写代码</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, GPIO_PIN_SET);</span><br><span class="line">  <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, GPIO_PIN_SET); <span class="comment">// 设置PB0为高电平</span></span><br></pre></td></tr></table></figure></div>

<p><code>Ctrl+Shift+B</code>来对代码进行编译和下载</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_15.png" class="" width="600">

<p>选择<code>Build STM32 Firmware</code>对代码进行编译，选择<code>Build and Download</code>则进行编译和下载。</p>
<p>连接stm32的B0到led上，检查能否点亮led.</p>
<h3 id="代码结构"><a href="#代码结构" class="headerlink" title="代码结构"></a>代码结构</h3><p><code>main.c</code>中的大部分代码由CubeMX自动生成, 这里重新梳理一下stm32f103的代码结构.</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"main.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"gpio.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>; <span class="comment">// 该函数用于配置系统时钟</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> <span class="comment">// 主函数</span></span><br><span class="line">{</span><br><span class="line">    HAL_Init(); <span class="comment">// 初始化HAL库</span></span><br><span class="line"></span><br><span class="line">    SystemClock_Config(); <span class="comment">// 配置系统时钟</span></span><br><span class="line"></span><br><span class="line">    MX_GPIO_Init(); <span class="comment">// 初始化GPIO</span></span><br><span class="line"></span><br><span class="line">    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, GPIO_PIN_SET); <span class="comment">// 设置PB0为高电平</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, GPIO_PIN_SET); <span class="comment">// 设置PB0为高电平</span></span><br><span class="line"></span><br><span class="line">    {}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span> <span class="comment">// 配置系统时钟</span></span><br><span class="line">{</span><br><span class="line">    RCC_OscInitTypeDef RCC_OscInitStruct = {<span class="number">0</span>};</span><br><span class="line">    RCC_ClkInitTypeDef RCC_ClkInitStruct = {<span class="number">0</span>};</span><br><span class="line"></span><br><span class="line">    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;</span><br><span class="line">    RCC_OscInitStruct.HSEState = RCC_HSE_ON;</span><br><span class="line">    RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;</span><br><span class="line">    RCC_OscInitStruct.HSIState = RCC_HSI_ON;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;</span><br><span class="line">    <span class="keyword">if</span> (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)</span><br><span class="line">    {</span><br><span class="line">        Error_Handler(); <span class="comment">// 时钟配置失败, 则调用错误处理函数</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK</span><br><span class="line">                                |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;</span><br><span class="line">    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;</span><br><span class="line">    RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;</span><br><span class="line">    RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;</span><br><span class="line">    RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)</span><br><span class="line">    {</span><br><span class="line">        Error_Handler();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Error_Handler</span><span class="params">(<span class="type">void</span>)</span> <span class="comment">// 定义错误函数</span></span><br><span class="line">{</span><br><span class="line">    __disable_irq(); <span class="comment">// 禁用所有中断</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) <span class="comment">// 进入无限循环, 等待外部中断</span></span><br><span class="line">    {}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span>  USE_FULL_ASSERT <span class="comment">// 如果定义了USE_FULL_ASSERT, 则调用assert_failed函数</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">assert_failed</span><span class="params">(<span class="type">uint8_t</span> *file, <span class="type">uint32_t</span> line)</span> <span class="comment">// 定义assert_failed函数</span></span><br><span class="line">{}</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>


<h2 id="串口通信"><a href="#串口通信" class="headerlink" title="串口通信"></a>串口通信</h2><p>主要分类:</p>
<ul>
<li>串行通信: 数据按位依次传输, 如8个数据位依次传输, 速度慢, 但占用引脚资源少;</li>
<li>并行通信: 数据各个位同时运输, 占用引脚资源多, 但速度快;</li>
</ul>
<p>按通信的方式进行分类:</p>
<ul>
<li>同步通信: 带时钟同步信号传输, 如SPI, I2C;</li>
<li>异步通信: 不带时钟同步信号传输, 如UART;</li>
</ul>
<p>按照数据传输方向分类:</p>
<ul>
<li>单工: 数据只能单向传输, 只收不发或者只发不收;</li>
<li>单双工: 允许数据在两个方向上传输, 但不能同时进行;</li>
<li>全双工: 允许数据在两个方向同时传输;</li>
</ul>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/28.png" class="" width="600">

<h3 id="USART"><a href="#USART" class="headerlink" title="USART"></a>USART</h3><ul>
<li>UART: 通用异步收发传输器</li>
<li>USART: 通用同步/异步收发传输器</li>
</ul>
<p>这里以stm32f411ceu6为例, 使用USART1进行串口通信。</p>
<p>串行通信中, 每一帧的数据格式即为通信协议:</p>
<ul>
<li>起始位: 当未有数据发送时，数据线处于逻辑“1”状态；先发出一个逻辑“0”信号，表示开始传输字符;</li>
<li>数据位: 紧随起始位之后，数据位表示真正要发送或接收的信息，位数一般有8位或9位;</li>
<li>奇偶校验位: 数据位的末尾可以选择是否添加奇偶校验位，用于检测数据传输过程中是否出现错误;</li>
<li>停止位: 代表信息传输结束的标志位.</li>
</ul>
<p><strong>波特率</strong>: 每秒传输的符号数, 对于串口通信, 波特率即为每秒传输的位数.</p>
<p>常用的通信协议为: 8N1, 即8位数据位, 无奇偶校验位, 1位停止位.<br>波特率常用的有9600, 115200等.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/25.png" class="" width="600">

<p>在左侧选择<code>USART1</code>, 在右侧选择<code>Asynchronous</code>, <code>Baud Rate</code>选择<code>115200</code>, <code>Word Length</code>选择<code>8 bits</code>, <code>Stop Bits</code>选择<code>1</code>.</p>
<p>即设置了波特率为115200, 数据帧格式为8N1;</p>
<p>通过配置NVIC, 使能串口接收中断;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/26.png" class="" width="600">

<p>其余配置相同.</p>
<p>stm32f411ceu6默认PA9为USART1的TX引脚, PA10为USART1的RX引脚.</p>
<p>工作流程:</p>
<ol>
<li>在进入while循环前, 调用<code>HAL_UART_Receive_IT()</code>函数, 启动USART1的中断接收一个字节的数据;</li>
</ol>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (HAL_UART_Receive_IT(&amp;huart1, rxBuffer, <span class="number">1</span>) != HAL_OK) {</span><br><span class="line">  Error_Handler();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>进入主循环之后, 由于接收数据是中断处理, 主循环不需要持续轮询数据接收状态;</li>
<li>当USART1接收到数据后, 硬件会触发中断请求, 单片机暂停当前的主循环任务, 跳转到中断向量表中对应的中断函数;</li>
<li>HAL库识别这是一个接收并完成中断, 并调用回调函数<code>HAL_UART_RxCpltCallback()</code>, 在这个函数中, 我们可以处理接收到的数据;</li>
</ol>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">HAL_UART_RxCpltCallback</span><span class="params">(UART_HandleTypeDef *huart)</span> {</span><br><span class="line">  <span class="keyword">if</span> (huart-&gt;Instance == USART1) {</span><br><span class="line">    <span class="comment">// 判断是否接收到目标字符串</span></span><br><span class="line">    <span class="keyword">if</span> (rxBuffer[rxIndex] == targetString[rxIndex]) {</span><br><span class="line">      rxIndex++;</span><br><span class="line">      <span class="comment">// 判断是否接收到完整的目标字符串</span></span><br><span class="line">      <span class="keyword">if</span> (rxIndex == <span class="built_in">strlen</span>(targetString)) {</span><br><span class="line">        <span class="comment">// 发送回复字符串</span></span><br><span class="line">        HAL_UART_Transmit(&amp;huart1, (<span class="type">uint8_t</span>*)replyString, <span class="built_in">strlen</span>(replyString), HAL_MAX_DELAY);</span><br><span class="line">        rxIndex = <span class="number">0</span>;</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      rxIndex = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 继续接收</span></span><br><span class="line">    <span class="keyword">if</span> (HAL_UART_Receive_IT(&amp;huart1, rxBuffer + rxIndex, <span class="number">1</span>) != HAL_OK) {</span><br><span class="line">      Error_Handler();</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>代码结构:</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">"main.h"</span></span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RX_BUFFER_SIZE 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收缓冲区</span></span><br><span class="line"><span class="type">uint8_t</span> rxBuffer[RX_BUFFER_SIZE];</span><br><span class="line"><span class="type">uint8_t</span> rxIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标字符串和回复字符串</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* targetString = <span class="string">"hello"</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* replyString = <span class="string">"hi\r\n"</span>;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> {</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">if</span> (HAL_UART_Receive_IT(&amp;huart1, rxBuffer, <span class="number">1</span>) != HAL_OK) {</span><br><span class="line">    Error_Handler();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) {</span><br><span class="line">    ...</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span> {</span><br><span class="line">  ...</span><br><span class="line">}</span><br><span class="line"><span class="comment">// USART接收完成回调函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_UART_RxCpltCallback</span><span class="params">(UART_HandleTypeDef *huart)</span> {</span><br><span class="line">  <span class="keyword">if</span> (huart-&gt;Instance == USART1) {</span><br><span class="line">    <span class="comment">// 判断是否接收到目标字符串</span></span><br><span class="line">    <span class="keyword">if</span> (rxBuffer[rxIndex] == targetString[rxIndex]) {</span><br><span class="line">      rxIndex++;</span><br><span class="line">      <span class="comment">// 判断是否接收到完整的目标字符串</span></span><br><span class="line">      <span class="keyword">if</span> (rxIndex == <span class="built_in">strlen</span>(targetString)) {</span><br><span class="line">        <span class="comment">// 发送回复字符串</span></span><br><span class="line">        HAL_UART_Transmit(&amp;huart1, (<span class="type">uint8_t</span>*)replyString, <span class="built_in">strlen</span>(replyString), HAL_MAX_DELAY);</span><br><span class="line">        rxIndex = <span class="number">0</span>;</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      rxIndex = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 继续接收</span></span><br><span class="line">    <span class="keyword">if</span> (HAL_UART_Receive_IT(&amp;huart1, rxBuffer + rxIndex, <span class="number">1</span>) != HAL_OK) {</span><br><span class="line">      Error_Handler();</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">Error_Handler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN Error_Handler_Debug */</span></span><br><span class="line">  <span class="comment">/* User can add his own implementation to report the HAL error return state */</span></span><br><span class="line">  __disable_irq();</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">  {</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">/* USER CODE END Error_Handler_Debug */</span></span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>

<p>实现效果:</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/27.png" class="" width="200">

<h3 id="SPI"><a href="#SPI" class="headerlink" title="SPI"></a>SPI</h3><p>SPI主要使用四个接口:</p>
<ul>
<li>MISO: 主器件数据输入, 从器件数据输出;</li>
<li>MOSI: 主器件数据输出, 从器件数据输入;</li>
<li>SCK: 时钟信号;</li>
<li>NSS(CS): 从设备选择信号, 由主设备控制, 当NSS为低电平则选中器件;</li>
</ul>
<p>stm32f411有五个SPI外设, 其中SPI1连接APB2总线上, 最大通信频率为50MHz.</p>
<p>CubeMX配置如下:</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/29.png" class="" width="600">

<p>选择<code>Full-Duplex Master</code>模式, 即全双工主机模式;</p>
<p>发送数据函数:</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> HAL_StatusTypeDef <span class="title function_">SPI_Transmit</span><span class="params">(<span class="type">uint8_t</span>* send_buf, <span class="type">uint16_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> HAL_SPI_Transmit(&amp;hspi1, send_buf, size, <span class="number">100</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>接收数据函数:</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> HAL_StatusTypeDef <span class="title function_">SPI_Receive</span><span class="params">(<span class="type">uint8_t</span>* recv_buf, <span class="type">uint16_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">   <span class="keyword">return</span> HAL_SPI_Receive(&amp;hspi1, recv_buf, size, <span class="number">100</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>发送数据的同时读取数据的函数</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> HAL_StatusTypeDef <span class="title function_">SPI_TransmitReceive</span><span class="params">(<span class="type">uint8_t</span>* send_buf, <span class="type">uint8_t</span>* recv_buf, <span class="type">uint16_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">   <span class="keyword">return</span> HAL_SPI_TransmitReceive(&amp;hspi1, send_buf, recv_buf, size, <span class="number">100</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<h3 id="CAN总线"><a href="#CAN总线" class="headerlink" title="CAN总线"></a>CAN总线</h3><p><strong>CAN总线的基本原理</strong></p>
<p>要进行can通讯，需要专门的can收发芯片，单片机通过Tx与Rx与can收发芯片通讯，can收发芯片通过CANH和CANL与can总线通讯。线束上需要双绞线缠绕。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_18.png" class="" width="600">

<p>经过can收发器之后，普通信号会转换为差分信号，差分线是用CAN HIGH和CAN LOW两根线来传输信号，低电平下CANH为3.5V，CANL为1.5V，高电平下CANH和CANL均为2.5V。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_17.png" class="" width="600">

<p>其数据帧格式为：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_19.png" class="" width="600">



<h2 id="输出PWM"><a href="#输出PWM" class="headerlink" title="输出PWM"></a>输出PWM</h2><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><blockquote>
<p>stm32最多同时输出30路信号;</p>
</blockquote>
<p>STM32F1共有8个定时器，其中可以用于PWM输出的定时器有：</p>
<ul>
<li>高级定时器：TIM1, TIM8 (同时输出7路PWM)</li>
<li>通用定时器: TIM2, TIM3, TIM4, TIM5 (同时输出4路PWM)</li>
</ul>
<p>主要用到的寄存器:</p>
<ul>
<li>TIMx_ARR寄存器确定PWM频率；</li>
<li>TIMx_CCRx寄存器确定PWM占空比；</li>
<li>TIMx_CNT为定时器计数器；</li>
</ul>
<p><strong>捕获/比较模式寄存器 (TIMx_CCMR1/2)</strong><br>TIMx_CCMR1控制通道1和通道2的PWM输出,  TIMx_CCMR2控制通道3和通道4的PWM输出。</p>
<p>在这个寄存器中通过设置OCxM (模式设置) 位来选择PWM模式：其中110为PWM模式1，111为PWM模式2。</p>
<ul>
<li>PWM模式1：在向上计数时，TIMx_CNT &lt; TIMx_CCR1时通道1为有效电平，否则为无效电平；在向下计数时，TIMx_CNT&gt;TIMx_CCR1时通道1为无效电平，否则为有效电平。</li>
<li>PWM模式2：在向上计数时，TIMx_CNT &lt; TIMx_CCR1时通道1为无效电平，否则为有效电平；在向下计数时，TIMx_CNT&gt;TIMx_CCR1时通道1为有效电平，否则为无效电平。</li>
</ul>
<p>两个PWM模式的区别就是输出电平的极性相反;</p>
<p><strong>捕获/比较使能寄存器 (TIMx_CCER)</strong></p>
<p>需要将CC2E位设置为1, 使得PWM从IO口输出;</p>
<p><strong>捕获/比较寄存器 (TIMx_CCR1~4)</strong></p>
<p>该寄存器有4个, 对应4个通道, 用于设置PWM占空比;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/fig_16.png" class="" width="600">

<p>如图: 该寄存器的值(红色)与 CNT 的值(黑色)比较, 例如 CNT &gt; CCR1 时, 输出有效电平, 否则为无效电平;</p>
<h3 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h3><p>用TIM3的通道1输出PWM信号，频率为1KHz，占空比为50%。</p>
<p>TIM3的四个通道可以分别设置不同的IO口;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/23.png" class="" width="600">

<p>通过手动配置CubeMX, 这里使用TIM3的部分重映像;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/20.png" class="" width="600">

<p>配置定时器TIM3, 使其输出四路PWM信号;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/21.png" class="" width="600">

<p>通过设置定时器的预分频器 (Prescaler, PSC) 和自动重装载寄存器 (Auto-reload register, ARR) 来确定PWM的频率;</p>
<p>计算公式:<br><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.172ex;" xmlns="http://www.w3.org/2000/svg" width="39.074ex" height="5.398ex" role="img" focusable="false" viewBox="0 -1426 17270.9 2386"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(1799,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path></g><g data-mml-node="mi" transform="translate(2850,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">频</text></g><g data-mml-node="mi" transform="translate(3850,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g><g data-mml-node="mo" transform="translate(5127.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(6183.6,0)"><g data-mml-node="mrow" transform="translate(2043.7,676)"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">定</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">时</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">器</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">时</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">钟</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">频</text></g><g data-mml-node="mi" transform="translate(6000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g></g><g data-mml-node="mrow" transform="translate(220,-710)"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mi" transform="translate(1140,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(1785,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(2767.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(3767.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(4267.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(4878.7,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mo" transform="translate(5878.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6267.9,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(7017.9,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mi" transform="translate(7776.9,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(8758.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(9758.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(10258.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><rect width="10847.3" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p>
<p>通常定时器时钟频率设置为最大72MHz, 因此PSC为71，ARR为999，即可得到1KHz的PWM信号;</p>
<p>设置占空比(Pulse)为500, 即为50%;</p>
<p>占空比计算公式:<br><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.602ex;" xmlns="http://www.w3.org/2000/svg" width="30.137ex" height="4.828ex" role="img" focusable="false" viewBox="0 -1426 13320.4 2134"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1323,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(1621,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(2090,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(2833.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(3889.6,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">占</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">空</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">比</text></g></g><g data-mml-node="mn" transform="translate(970,-686)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><rect width="3200" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(7551.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mo" transform="translate(8552,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(8941,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(9691,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mi" transform="translate(10450,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(11431.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(12431.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(12931.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/22.png" class="" width="600">


<p>在main.c中, 主要用到两个函数;</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_1); <span class="comment">// 初始化PWM</span></span><br><span class="line">HAL_TIM_SET_COMPARE(&amp;htim3, TIM_CHANNEL_1, <span class="number">500</span>); <span class="comment">// 设置PWM占空比(Pulse)</span></span><br></pre></td></tr></table></figure></div>

<p>main.c完整代码, 四个通道输出PWM信号, 其中通道1可调节占空比;</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> pwm = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    HAL_Init();</span><br><span class="line"></span><br><span class="line">    SystemClock_Config();</span><br><span class="line"></span><br><span class="line">    MX_GPIO_Init();</span><br><span class="line">    MX_TIM3_Init();</span><br><span class="line"></span><br><span class="line">    HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_1);</span><br><span class="line">    HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_2);</span><br><span class="line">    HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_3);</span><br><span class="line">    HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_4);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    {</span><br><span class="line">    __HAL_TIM_SET_COMPARE(&amp;htim3, TIM_CHANNEL_1, pwm);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
<p>可用示波器查看输出的波形;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/24.jpg" class="" width="600">

<h2 id="ADC多通道采样"><a href="#ADC多通道采样" class="headerlink" title="ADC多通道采样"></a>ADC多通道采样</h2><h3 id="采样定理"><a href="#采样定理" class="headerlink" title="采样定理"></a>采样定理</h3><p>在信号与系统的学习中, 我们知道<strong>奈奎斯特采样定理</strong>指出, 采样频率至少是信号最高频率的两倍.</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="10.657ex" height="2.059ex" role="img" focusable="false" viewBox="0 -705 4710.6 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(523,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g><g data-mml-node="mo" transform="translate(1182.4,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(2238.2,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="msub" transform="translate(2738.2,0)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="TeXAtom" transform="translate(523,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(1407,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></g></g></svg></mjx-container></p>
<p>为了避免混叠现象，在采样前通常需要使用 <strong>抗混叠滤波器</strong>（Anti-aliasing Filter），它是一种低通滤波器，用于限制信号的频率成分，使其最高频率不超过奈奎斯特频率。</p>
<h3 id="单通道采集模式"><a href="#单通道采集模式" class="headerlink" title="单通道采集模式"></a>单通道采集模式</h3><p><strong>ADC的工作过程可以主要分为两个主要阶段:</strong></p>
<ol>
<li><strong>采样</strong>: ADC会读取模拟信号当前值, 在这一时刻, ADC会记录输入信号的电压值. 这个过程需要一定时间, 称为<strong>采样时间</strong>;</li>
<li><strong>转换</strong>: 采样后, ADC将所记录的模拟电压值, 转换为对应的数字值(二进制), 这个过程也需要时间, 称为<strong>转换时间</strong>.</li>
</ol>
<p>这里以stm32f411ceu6为例, 使用ADC1进行多通道采样;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/31.png" class="" width="600">

<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/30.png" class="" width="600">

<p>从stm32f411的datasheet中可以得到, ADC1挂载在APB2时钟总线上, 并且有16个输入通道(单个通道12bit分辨率).</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/32.png" class="" width="600">

<p>这里提到了, ADC有两个模式, 分别是<code>single-shot</code>和<code>scan mode</code>. 还支持DMA和中断模式.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/33.png" class="" width="600">

<p>datasheet给出(f_ADC)ADC clock最大是36MHz, 典型值是30MHz.</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/35.png" class="" width="600">

<p>这里从datasheet中得到单通道ADC采样频率为2MHz, 根据采样定理, 模拟信号的频率最大不能超过1MHz.</p>
<p>CubeMX中可以设置三种采样模式和直接访问储存的方式读取数据:</p>
<ul>
<li><strong>Scan Conversioin Mode</strong><ul>
<li>扫描转换模式允许ADC按顺序扫描并转换多个通道, 适用于多通道采集;</li>
</ul>
</li>
<li><strong>Continuous Conversion Mode</strong><ul>
<li>连续转换模式使ADC持续不断地进行采样和转换, 而无需每次都要手动触发;</li>
</ul>
</li>
<li><strong>Discontinuous Conversion Mode</strong><ul>
<li>离散转换模式允许ADC分批次进行转换, 每次转换有限数量的通道, 需要手动触发;</li>
</ul>
</li>
<li><strong>DMA Continuous Requests</strong><ul>
<li>直接储存器访问(DMA)模式允许ADC自动将转换结果传输到内存, 无需cpu的介入, 减少CPU的负担, 适用于高效的多通道采样;</li>
</ul>
</li>
</ul>
<p>这里设置单通道进行采集, 选择通道9;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/34.png" class="" width="600">

<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/36.png" class="" width="400">

<p>PB1为ADC输入通道, 代码如下:</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ADC_RESOLUTION    4095.0f <span class="comment">// 12-bit ADC</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VDDA              3.3f    <span class="comment">// ADC reference voltage</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">/* USER CODE BEGIN 0 */</span></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">ADC_Read</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (HAL_ADC_Start(&amp;hadc1) != HAL_OK)</span><br><span class="line">    {</span><br><span class="line">        Error_Handler();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (HAL_ADC_PollForConversion(&amp;hadc1, HAL_MAX_DELAY) != HAL_OK)</span><br><span class="line">    {</span><br><span class="line">        Error_Handler();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">uint16_t</span> value = HAL_ADC_GetValue(&amp;hadc1);</span><br><span class="line">    HAL_ADC_Stop(&amp;hadc1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">USART_SendString</span><span class="params">(<span class="type">char</span>* str)</span></span><br><span class="line">{</span><br><span class="line">    HAL_UART_Transmit(&amp;huart1, (<span class="type">uint8_t</span>*)str, <span class="built_in">strlen</span>(str), HAL_MAX_DELAY);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* USER CODE END 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">uint16_t</span> adcValue = ADC_Read();</span><br><span class="line">        <span class="type">uint32_t</span> voltage_mV = ((<span class="type">uint32_t</span>)adcValue * <span class="number">3300</span>) / ADC_RESOLUTION; <span class="comment">// 电压以毫伏为单位</span></span><br><span class="line"></span><br><span class="line">        <span class="type">char</span> buffer[<span class="number">50</span>];</span><br><span class="line">        <span class="built_in">sprintf</span>(buffer, <span class="string">"voltage(mv): %lu \n"</span>, voltage_mV);</span><br><span class="line">        <span class="comment">//sprintf(buffer, "ADC value: %u\r\n", adcValue); // 输出原本的ADC值</span></span><br><span class="line"></span><br><span class="line">        USART_SendString(buffer);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>

<h3 id="定时器-DMA的多通道采集模式"><a href="#定时器-DMA的多通道采集模式" class="headerlink" title="定时器+DMA的多通道采集模式"></a>定时器+DMA的多通道采集模式</h3><p>在设计Sensorless FOC时, 需要考虑多路采样信号与PWM信号一致, 即使用定时器在每个PWM周期的特定时刻触发ADC转换, 确保采样与PWM信号一致.</p>
<p>其优势有: </p>
<ul>
<li>由定时器触发的ADC采样, 这样采样的频率可控, 且定时器触发不会占用任何CPU资源;</li>
<li>DMA进一步降低了任务对CPU的占有率;</li>
</ul>
<p>这里仍然以stm32f411为例, 开启ADC1的IN0~IN2这三个通道, 并使用DMA模式进行采样;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/41.png" class="" width="500">

<p>使用定时器触发时, 最好实现的为TIMx_TRGO事件. 即每发生一次<code>TIMx_TRGO</code>事件, 就会触发ADC进行一次规则通道的转换;</p>
<p>打开DMA模式, 设置Mode为<code>Circular</code>, 使得DMA可以循环传输数据;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/37.png" class="" width="500">

<p>由于是多通道, <code>Scan Conversion Mode</code>设置为<code>Enable</code>, 由于定时器触发的ADC转换, <code>Continuous Conversion Mode</code>和<code>DMA Continuous Requests</code>都设置为<code>Disable</code>, 这样才能使定时器触发一次就转换一次选中的三个通道;</p>
<p>同时, 在<code>External Trigger Conversion Source</code>中选择<code>Timer2 Trigger Out Event</code>, 即定时器2触发ADC转换;</p>
<p>其他设置如下图:</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/38.png" class="" width="500">

<p>由于采样频率为2MHz, 因此定时器的频率不能大于2MHz;</p>
<p>在定时器中打开<code>Internal Clock</code>进行设置;</p>
<p>根据定时器的频率计算,这里设置定时器频率为100kHz;</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="53.237ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 23530.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><g data-mml-node="mi" transform="translate(1500,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path></g><g data-mml-node="mi" transform="translate(2551,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mi" transform="translate(3439,0)"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3904,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mo" transform="translate(4404,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mo" transform="translate(4682,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5071,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mi" transform="translate(5822,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(6273,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(6739,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(7208,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(7641,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(8170,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(8468,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(8934,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(9607.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(10607.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(11107.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(11718.7,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mo" transform="translate(12718.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(13107.9,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mi" transform="translate(13858.9,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(14324.9,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(14775.9,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(15120.9,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(15605.9,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(16348.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(17348.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(17848.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(18237.3,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mo" transform="translate(18793.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(19848.9,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(778,0)"></path></g><g data-mml-node="mi" transform="translate(21126.9,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path></g><g data-mml-node="mi" transform="translate(22177.9,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mi" transform="translate(23065.9,0)"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g></g></g></svg></mjx-container></p>
<p><code>auto-reload preload</code>设置为<code>Enable</code>, 使得ARR的值在更新时立即生效;<br><code>Trigger Event Selection</code>设置为<code>Update Event</code>, 使得定时器在更新事件时触发ADC转换;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/40.png" class="" width="500">

<p>代码部分: 将读取的三个通道的电压转换后发送到串口;</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">uint16_t</span> adcBuffer[<span class="number">3</span>]; <span class="comment">// 定义一个长度为3的数组, 用于存放采样值</span></span><br><span class="line"><span class="type">float</span> voltageBuffer[<span class="number">3</span>]; <span class="comment">// 存储转换后的电压</span></span><br><span class="line"><span class="keyword">volatile</span> <span class="type">uint8_t</span> adcReady = <span class="number">0</span>; <span class="comment">// ADC完成标志</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ADC_RESOLUTION    4095.0f <span class="comment">// 12-bit ADC</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VDDA              3.3f    <span class="comment">// ADC reference voltage</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">  ...</span><br><span class="line">  HAL_ADC_Start_DMA(&amp;hadc1, (<span class="type">uint16_t</span> *)adcBuffer, <span class="number">3</span>);</span><br><span class="line">  HAL_TIM_Base_Start(&amp;htim2);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  {</span><br><span class="line">    <span class="keyword">if</span> (adcReady) {</span><br><span class="line">      <span class="comment">// 检查数据是否准备好</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) {</span><br><span class="line">        <span class="type">char</span> msg[<span class="number">64</span>];</span><br><span class="line">        <span class="built_in">sprintf</span>(msg, <span class="string">"Voltage[%d]: %lu mV\r\n"</span>, i, (<span class="type">uint32_t</span>)(voltageBuffer[i]*<span class="number">1000</span>));</span><br><span class="line">        HAL_UART_Transmit(&amp;huart1, (<span class="type">uint8_t</span>*)msg, <span class="built_in">strlen</span>(msg), HAL_MAX_DELAY);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    adcReady = <span class="number">0</span>; <span class="comment">// 清除标志位</span></span><br><span class="line">    </span><br><span class="line">    HAL_Delay(<span class="number">500</span>); <span class="comment">// 1s延时</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">// 在回调函数中对adc采样的数值进行处理</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_ADC_ConvCpltCallback</span><span class="params">(ADC_HandleTypeDef* hadc)</span> {</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) {</span><br><span class="line">    voltageBuffer[i] = (adcBuffer[i] * VDDA) / ADC_RESOLUTION;</span><br><span class="line">  }</span><br><span class="line">  adcReady = <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>注意<code>adcBuffer[3]</code>这个数组必须使用uint16_t类型, 因为ADC的数据是在cubemx中设置为<code>Half-Word</code>类型, 也就是16位; 如果使用uint32_t类型, 则该32位数组无法正确映射dma所采集的16位数据; 如下图(每个方框代表1 byte, 红色划分代表32位数组, 粉色代表16位数组):</p>
</blockquote>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/29/stm32%E5%85%A5%E9%97%A8/38.png" class="" width="500">


<h2 id="USB-Host"><a href="#USB-Host" class="headerlink" title="USB Host"></a>USB Host</h2><p>由于常用的stm32f103没有USB Host功能，所以使用stm32f411CEU6，作为usb host与usb设备通讯。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a class="link" href="https://www.st.com/resource/en/reference_manual/DM00119316-.pdf">Reference manual<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/as480133937/article/details/99231677">【STM32】HAL库 STM32CubeMX教程七—PWM输出(呼吸灯)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV14k4y187e6/?spm_id_from=333.337.search-card.all.click&vd_source=3c842e78ba17ee7afd3375b35f554ca1">趋近于完美的通讯 CAN总线！4分钟看懂！<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1Z1421C7dP/?spm_id_from=333.337.search-card.all.click&vd_source=3c842e78ba17ee7afd3375b35f554ca1">STM32F103用CAN通讯驱动小米电机讲解<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/qq_40318498/article/details/96475438">STM32F103 实验 PWM输出<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/qq153471503/article/details/108123019">STM32CubeMX | HAL库的ADC多通道数据采集（轮训、DMA、DMA+TIM)、读取内部传感器温度<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/AriesPIG/article/details/119840979">STM32之USART-串口通信（含串口实验详细解析）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/qq_36347513/article/details/112654724">STM32CubeMX学习笔记（6）——USART串口使用<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/qq_36347513/article/details/113252061">STM32CubeMX学习笔记（10）——SPI接口使用(读写SPI Flash W25Q64)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/m0_58065266/article/details/125782139">STM32F411核心板固件库开发（四） ADC配置<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/tpytpytpy/article/details/122563117">STM32使用ADC+DMA进行多通道模拟量采集 （踩坑及傻瓜式解析）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/spiremoon/article/details/100025294">【嵌入式】STM32F4的ADC采样——多通道、DMA、定时器触发<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Electronics and Embedded System</category>
      </categories>
  </entry>
  <entry>
    <title>WSL2换源与科学上网</title>
    <url>/2023/08/29/wsl2%E6%8D%A2%E6%BA%90-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/</url>
    <content><![CDATA[<h2 id="wsl2换源"><a href="#wsl2换源" class="headerlink" title="wsl2换源"></a>wsl2换源</h2><p>安装wsl2之后，由于国内有墙的原因，为了提高下载软件的速度，需要将软件源更换为国内的镜像源。</p>
<p>刚安装好好，将原来的软件源进行备份：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure></div>

<p>打开sources.list文件，对源进行替换</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/08/29/wsl2%E6%8D%A2%E6%BA%90-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/fig_1.png"
                      class="" width="600"
                >

<p>输入<code>:%s/archive.ubuntu.com/mirrors.aliyun.com/g</code></p>
<p>该命令将文本内所有的”archive.ubuntu.com”更换为”mirrors.aliyun.com”</p>
<p>输入<code>:wq</code>保存并退出。</p>
<p>然后执行</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure></div>
<p>换源完成</p>
<h2 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h2><p>理论上来说，如果平时使用Clash for windows，是可以直接将windows的梯子在wsl2里面继续搭的，但是我试了很多次都没能成功，于是换一种办法。</p>
<p>下载clash和配置文件，从windows直接传到wsl2上，然后再进行配置。</p>
<p>具体步骤如下</p>
<p><a class="link"   href="https://bbs.huaweicloud.com/blogs/405107" >WSL2 ubuntu 配置clash代理科学上网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>这里有个错误, 对于xxxx.gz文件, 不能用<code>tar -xvf</code>, 应该用<code>gunzip xxx.gz</code></p>
<p>例如对于<code>clash.gz</code>文件</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">gunzip clash.gz</span><br></pre></td></tr></table></figure></div>
<p>得到名字为<code>clash</code>的文件.</p>
]]></content>
      <categories>
        <category>Basic Computer Programming</category>
      </categories>
  </entry>
  <entry>
    <title>Webots 入门</title>
    <url>/2023/07/27/Webots-%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="为什么用Webots"><a href="#为什么用Webots" class="headerlink" title="为什么用Webots"></a>为什么用Webots</h2><p><a class="link"   href="https://www.guyuehome.com/8218" >到底应该使用哪款仿真器来仿真我的机器人 - 古月居<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>一言以蔽之，Webots相对而言更加适合移动机器人，同时上手难度更低，更适合作为我们战队的零基础入门学习。之前在战队的时候，尝试推行该软件，由于该软件需要机械组的队员和电控组的队员协作，同时大家也没有学习仿真器的基础。因此很难推行起来。</p>
<h2 id="安装和使用教程"><a href="#安装和使用教程" class="headerlink" title="安装和使用教程"></a>安装和使用教程</h2><p>官网安装即可；<br><a class="link"   href="https://www.cyberbotics.com/" >Webots: robot simulator<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>通过官方文档快速学习；<br><a class="link"   href="https://www.cyberbotics.com/doc/guide/index" >Documentation<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="Controller-in-vscode"><a href="#Controller-in-vscode" class="headerlink" title="Controller in vscode"></a>Controller in vscode</h2><p>webots本身的IDE并不好用，而我习惯使用vscode（copilot和chatgpt都帮我写完啦），同时也可以使用两个屏幕写，vscode利用cmake对webots的controller进行编译，从而将controller的代码工作迁移到vscode中。</p>
<p>安装这两个插件，同时安装CMake并且添加到路径：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_2.png"
                      class="" width="300"
                >

<p>打开vscode设置，修改<code>setting.json</code>文件，添加以下部分:</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;cmake.preferredGenerators&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;MinGW Makefiles&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;cmake.configureOnOpen&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></div>
<p>建议使用webots的compiler作为cmake的generator;<br>用Everything打开<code>cmake-tools-kits.json</code>文件，加入以下部分</p>
<div class="code-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;My Compiler Kit&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;compilers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;C&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/Program Files/Webots/msys64/mingw64/bin/gcc.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;CXX&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/Program Files/Webots/msys64/mingw64/bin/g++.exe&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></div>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_3.png"
                      class="" width="600"
                >

<p>新建一个controller，选择<code>Webots(gcc/Makefile)</code>，用vscode打开文件夹，删去<code>MakeFile</code>文件，新建<code>CMakeLists.txt</code>，将下列内容直接复制过去即可。</p>
<p>CMakeLists.txt模板：</p>
<div class="code-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set the name of the project</span></span><br><span class="line"><span class="keyword">get_filename_component</span>(<span class="keyword">PROJECT</span> <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span> NAME)</span><br><span class="line"><span class="keyword">project</span>(<span class="variable">$&#123;PROJECT&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get C or C++ sources in the current directory</span></span><br><span class="line"><span class="keyword">file</span>(GLOB C_SOURCES *.c)</span><br><span class="line"><span class="keyword">file</span>(GLOB CPP_SOURCES *.cpp)</span><br><span class="line"><span class="keyword">set</span>(SOURCES <span class="variable">$&#123;C_SOURCES&#125;</span> <span class="variable">$&#123;CPP_SOURCES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the Webots home path (change it according to your installation method)</span></span><br><span class="line"><span class="comment"># Remember to use &quot;/&quot; instead of &quot;\&quot; which paste from the directory</span></span><br><span class="line"><span class="keyword">set</span>(WEBOTS_HOME <span class="string">&quot;D:/Program Files/Webots&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Link with the Webots controller library.</span></span><br><span class="line"><span class="keyword">link_directories</span>($ENV&#123;WEBOTS_HOME&#125;/lib/controller)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> (LIBRARIES <span class="variable">$&#123;CMAKE_SHARED_LIBRARY_PREFIX&#125;</span>Controller<span class="variable">$&#123;CMAKE_SHARED_LIBRARY_SUFFIX&#125;</span>)</span><br><span class="line"><span class="keyword">include_directories</span>($ENV&#123;WEBOTS_HOME&#125;/<span class="keyword">include</span>/controller/c/webots $ENV&#123;WEBOTS_HOME&#125;/<span class="keyword">include</span>/controller/cpp/webots)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Setup the target executable.</span></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT&#125;</span> <span class="variable">$&#123;SOURCES&#125;</span>)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT&#125;</span> <span class="variable">$&#123;LIBRARIES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the target executable at the right location.</span></span><br><span class="line"><span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT&#125;</span> POST_BUILD <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy $&lt;TARGET_FILE:<span class="variable">$&#123;PROJECT&#125;</span>&gt; <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/../)</span><br></pre></td></tr></table></figure></div>

<p><code>Ctrl+Shift+P</code>，选择这个编译器（CMakeLists中指定的编译器）</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_1.png"
                      class="" width="800"
                >


  <div class="note p-4 mb-4 rounded-small info">
    <p>💡在配置环境中，可能由于CMake Tools这个插件的版本不太稳定，导致一直找不到对应的generator，重装该插件之后重启vscode可以解决问题，切忌不要手动安装。</p>

  </div>

<p>代码完成后，先进行一次<code>Configure</code>对环境进行配置，然后再进行<code>Build</code>编译，修改代码后继续<code>Build</code>即可。</p>
<p>(由于工具链冲突，有可能会弹出<code>配置IntelliSense</code>，选择<code>MakeFile Tool</code>还是<code>CMake Tool</code>，选择后者即可)</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_9.png"
                      class="" width="600"
                >


<p>最后生成<code>.exe</code>的可执行文件，在webots中选择对应的controller即可开始仿真。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_4.png"
                      class="" width="300"
                >

<h2 id="PROTO的制作"><a href="#PROTO的制作" class="headerlink" title="PROTO的制作"></a>PROTO的制作</h2><p>Webots里面可以通过创建一个PROTO file来引入一些机器人和场地道具，避免了一些重复造轮子的工作。</p>
<h2 id="Solidworks导入模型"><a href="#Solidworks导入模型" class="headerlink" title="Solidworks导入模型"></a>Solidworks导入模型</h2><p>在新版的webots中，不能像往常一样直接导入VRML97模型，导致插入Solidworks的图纸比较麻烦，因此在机器人的设计过程中，尽量通过简化模型，使用webots自带的几何体来进行代替。</p>
<h2 id="入门练习"><a href="#入门练习" class="headerlink" title="入门练习"></a>入门练习</h2><p>第一次学习或者很久没使用，应该跟着官方文档的Turorials过一遍。或者哪些内容忘记了，跟着对应的Tutorial过一遍。</p>
<p><a class="link"   href="https://www.cyberbotics.com/doc/guide/tutorials" >Tutorials<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="麦轮底盘控制器（详细）"><a href="#麦轮底盘控制器（详细）" class="headerlink" title="麦轮底盘控制器（详细）"></a>麦轮底盘控制器（详细）</h3><p>由于麦轮建模非常复杂，因此可以拿webots自带的麦轮底盘进行修改。我们这里尝试写一个<br>controller，使得其可以通过键盘控制全向移动，以此来快速上手。</p>
<p>这个Fabtino本身也自带一个键盘控制器，我们做一个更符合比赛一个控制器。</p>
<ol>
<li>创建一个新的项目：<code>File -&gt; New -&gt; New Project Directory...</code>；</li>
<li>新建一个工程文件夹：<code>D:\webots_project\macanum_control</code>，world name相同；</li>
<li>勾选<code>Add a rectangle arena</code>；</li>
</ol>
<p>修改节点<code>RectangleArena &quot;rectangle arena&quot;</code>，使其尽量大一点；</p>
<p>左上添加节点按钮或者<code>Ctrl+Shift+A</code>，添加机器人<code>Fabtino</code>。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_5.png"
                      class="" width="400"
                >

<p>修改<code>WorldInfo</code>, 使其适合麦轮的仿真环境。</p>
<p><code>WorldInfo</code>-&gt;<code>contactProperties</code>添加两个<code>ContactProperties</code>；</p>
<p>设置如下：</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">contactProperties [</span><br><span class="line">  ContactProperties &#123;</span><br><span class="line">    material1 &quot;InteriorWheelMat&quot;</span><br><span class="line">    coulombFriction [</span><br><span class="line">      0, 2, 0</span><br><span class="line">    ]</span><br><span class="line">    frictionRotation -0.785398 0</span><br><span class="line">    bounce 0</span><br><span class="line">    forceDependentSlip [</span><br><span class="line">      10, 0</span><br><span class="line">    ]</span><br><span class="line">    softCFM 0.0001</span><br><span class="line">  &#125;</span><br><span class="line">  ContactProperties &#123;</span><br><span class="line">    material1 &quot;ExteriorWheelMat&quot;</span><br><span class="line">    coulombFriction [</span><br><span class="line">      0, 2, 0</span><br><span class="line">    ]</span><br><span class="line">    frictionRotation 0.785398 0</span><br><span class="line">    bounce 0</span><br><span class="line">    forceDependentSlip [</span><br><span class="line">      10, 0</span><br><span class="line">    ]</span><br><span class="line">    softCFM 0.0001</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_6.png"
                      class="" width="400"
                >
    </div>
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_7.png"
                      class="" width="400"
                >
    </div>
</div>


  <div class="note p-4 mb-4 rounded-small info">
    <p>在<a class="link"   href="https://webots.cloud/proto?keyword=robot" >webots.cloud<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>中，我们可以找到更多的机器人及其说明文档。</p>

  </div>

<p>这里写一个简易控制器，来使得麦轮底盘进行全向移动；</p>
<ol>
<li>贴标签（和指针一个道理）<br>利用Webots中的API:<code>WbDeviceTag</code>对电机或者传感器贴标签，以方便在后续的调试中直接调用。利用<code>wb_robot_get_device</code>函数将标签指定到对应名字的电机或者传感器上（后面统一称为设备）。<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">WbDeviceTag left_motor = wb_robot_get_device(<span class="string">&quot;left wheel motor&quot;</span>);</span><br><span class="line">WbDeviceTag right_motor = wb_robot_get_device(<span class="string">&quot;right wheel motor&quot;</span>);</span><br><span class="line"><span class="comment">// 后面均用left_motro和right_motor来代替指定设备</span></span><br></pre></td></tr></table></figure></div></li>
<li>设置位置<br>利用<code>wb_motor_set_position()</code>设置四个轮子的位置。<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line">wb_motor_set_position(left_motor, INFINITY);</span><br><span class="line">wb_motor_set_position(right_motor, INFINITY);</span><br></pre></td></tr></table></figure></div></li>
<li>设置键鼠逻辑</li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_8.png"
                      class="" width="600"
                >

<p>完整代码：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;robot.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;motor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;keyboard.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TIME_STEP 64</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span> &#123;</span><br><span class="line">    wb_robot_init();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a references to the mecanum wheels</span></span><br><span class="line">    WbDeviceTag motor_fl = wb_robot_get_device(<span class="string">&quot;front_left_wheel_joint&quot;</span>);</span><br><span class="line">    WbDeviceTag motor_fr = wb_robot_get_device(<span class="string">&quot;front_right_wheel_joint&quot;</span>);</span><br><span class="line">    WbDeviceTag motor_bl = wb_robot_get_device(<span class="string">&quot;back_left_wheel_joint&quot;</span>);</span><br><span class="line">    WbDeviceTag motor_br = wb_robot_get_device(<span class="string">&quot;back_right_wheel_joint&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set velocity, poistion set to infinitiy.</span></span><br><span class="line">    wb_motor_set_position(motor_fl, INFINITY);</span><br><span class="line">    wb_motor_set_position(motor_fr, INFINITY);</span><br><span class="line">    wb_motor_set_position(motor_bl, INFINITY);</span><br><span class="line">    wb_motor_set_position(motor_br, INFINITY);</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> motor_speed[<span class="number">4</span>] = &#123;<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enable the keyboard</span></span><br><span class="line">    wb_keyboard_enable(TIME_STEP);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (wb_robot_step(TIME_STEP) != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> key = wb_keyboard_get_key();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> v = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (key == WB_KEYBOARD_UP)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key == WB_KEYBOARD_DOWN)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, -v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key == WB_KEYBOARD_RIGHT)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key == WB_KEYBOARD_LEFT)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, -v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key == WB_KEYBOARD_PAGEUP)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key == WB_KEYBOARD_PAGEDOWN)</span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, -v);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, v);</span><br><span class="line">            wb_motor_set_velocity(motor_br, -v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            wb_motor_set_velocity(motor_fl, <span class="number">0</span>);</span><br><span class="line">            wb_motor_set_velocity(motor_fr, <span class="number">0</span>);</span><br><span class="line">            wb_motor_set_velocity(motor_bl, <span class="number">0</span>);</span><br><span class="line">            wb_motor_set_velocity(motor_br, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    wb_robot_cleanup();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="自动避障小车"><a href="#自动避障小车" class="headerlink" title="自动避障小车"></a>自动避障小车</h3><p>新建一个project，名字为<code>collision_avoidance</code>，添加<code>e-puck</code>机器人和随地放置一些木箱<code>WoodenBox</code>。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_10.png"
                      class="" width="500"
                >

<p>编写controller<code>epuck_avoid_collision</code></p>
<p>完整代码如下：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;robot.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;distance_sensor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;motor.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="keyword">define</span> TIME_STEP 64</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="keyword">define</span> MAX_SPEED 6.28</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// entry point of the controller</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// initialize the Webots API</span></span><br><span class="line">  wb_robot_init();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// initialize devices</span></span><br><span class="line">  <span class="type">int</span> i;</span><br><span class="line">  WbDeviceTag ps[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">  <span class="type">char</span> ps_names[<span class="number">8</span>][<span class="number">4</span>] = &#123;</span><br><span class="line">    <span class="string">&quot;ps0&quot;</span>, <span class="string">&quot;ps1&quot;</span>, <span class="string">&quot;ps2&quot;</span>, <span class="string">&quot;ps3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ps4&quot;</span>, <span class="string">&quot;ps5&quot;</span>, <span class="string">&quot;ps6&quot;</span>, <span class="string">&quot;ps7&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    ps[i] = wb_robot_get_device(ps_names[i]);</span><br><span class="line">    wb_distance_sensor_enable(ps[i], TIME_STEP);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  WbDeviceTag left_motor = wb_robot_get_device(<span class="string">&quot;left wheel motor&quot;</span>);</span><br><span class="line">  WbDeviceTag right_motor = wb_robot_get_device(<span class="string">&quot;right wheel motor&quot;</span>);</span><br><span class="line"></span><br><span class="line">  wb_motor_set_position(left_motor, INFINITY);</span><br><span class="line">  wb_motor_set_position(right_motor, INFINITY);</span><br><span class="line"></span><br><span class="line">  wb_motor_set_velocity(left_motor, <span class="number">0.0</span>);</span><br><span class="line">  wb_motor_set_velocity(right_motor, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (wb_robot_step(TIME_STEP) != <span class="number">-1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// read sensors outputs</span></span><br><span class="line">    <span class="type">double</span> ps_values[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      ps_values[i] = wb_distance_sensor_get_value(ps[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// detect obstacles</span></span><br><span class="line">    <span class="type">bool</span> right_obstacle = </span><br><span class="line">    ps_values[<span class="number">0</span>] &gt; <span class="number">80.0</span> ||</span><br><span class="line">    ps_values[<span class="number">1</span>] &gt; <span class="number">80.0</span> ||</span><br><span class="line">    ps_values[<span class="number">2</span>] &gt; <span class="number">80.0</span>;</span><br><span class="line">    <span class="type">bool</span> left_obstacle =</span><br><span class="line">    ps_values[<span class="number">5</span>] &gt; <span class="number">80.0</span> ||</span><br><span class="line">    ps_values[<span class="number">6</span>] &gt; <span class="number">80.0</span> ||</span><br><span class="line">    ps_values[<span class="number">7</span>] &gt; <span class="number">80.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// initialize motor speeds at 50% of MAX_SPEED</span></span><br><span class="line">    <span class="type">double</span> left_speed = <span class="number">0.8</span> * MAX_SPEED;</span><br><span class="line">    <span class="type">double</span> right_speed = <span class="number">0.8</span> * MAX_SPEED;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// modify speeds according to obstacles</span></span><br><span class="line">    <span class="keyword">if</span> (left_obstacle)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// turn right</span></span><br><span class="line">      left_speed = <span class="number">0.8</span> * MAX_SPEED;</span><br><span class="line">      right_speed = <span class="number">-0.8</span> * MAX_SPEED;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (right_obstacle)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// turn left</span></span><br><span class="line">      left_speed = <span class="number">-0.8</span> * MAX_SPEED;</span><br><span class="line">      right_speed = <span class="number">0.8</span> * MAX_SPEED;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// write actuators inputs</span></span><br><span class="line">    wb_motor_set_velocity(left_motor, left_speed);</span><br><span class="line">    wb_motor_set_velocity(right_motor, right_speed);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// cleanup the Webots API</span></span><br><span class="line">  wb_robot_cleanup();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>将e-puck机器人的controller替换为<code>epuck_avoid_collision</code>，运行仿真即可。</p>
<h3 id="小车倒立摆模型搭建"><a href="#小车倒立摆模型搭建" class="headerlink" title="小车倒立摆模型搭建"></a>小车倒立摆模型搭建</h3><p>在webots中，通常一个机器人是一个Robot nodes, Robot nodes再由很多Solid nodes组成, 不同的Solid nodes由Joint nodes连接而成, 常用HingeJoint来连接不同的solid nodes, 即转动副;</p>
<p>节点关系图如下：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_15.png"
                      class="" width="500"
                >

<p>先在场景中创建一个Robot节点, 然后添加其物理属性, 密度和质量更改其一即可, 另外一个为-1</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_11.png"
                      class="" width="200"
                >

<p>在Robot_children下添加一个Shape, 设置appearance和geometry, geometry选择Box即可;</p>
<p>对shape进行命名, 然后添加boundingObject, 选择<code>USE</code>里面的Shape;</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_12.png"
                      class="" width="300"
                >

<p>这样就画好小车的主体了:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_13.png"
                      class="" width="400"
                >

<p>在Robot_children下添加1个HingeJoint, 添加第一项参数HingeJointParameters, 修改其中的<code>anchor</code>, 作为转动副的锚点;</p>
<p>所有的设计参数都可以参照这个坐标系的尺寸：（在画一个机器人必须先用笛卡尔坐标系对其建模，以方便填写参数）</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_14.png"
                      class="" width="500"
                >

<p>转动副Anchor设置参考图：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/07/27/Webots-%E5%85%A5%E9%97%A8/fig_16.png"
                      class="" width="400"
                >

<p>第二项device添加电机<code>RotationalMotor</code>, 修改名字为motor_1;</p>
<p>在endPoint中添加Solid节点, 并对其命名为wheel</p>
<h2 id="Webots的不足"><a href="#Webots的不足" class="headerlink" title="Webots的不足"></a>Webots的不足</h2><p>Webots作为一个易用性强，结构简单的虚拟样机，可以针对一些机器人中的运动学和工作规划的设计进行优化，但是缺点也很明显，对于物理属性和材料属性决定的问题，webots的仿真比较无力。例如在解决步兵发射机构和飞镖发射的问题时，任何微小变化的因素：装配精度，温度变化，电机性能等等都会对发射精度产生不可忽略的影响。</p>
<p>对于工程机器人的机械臂的工作空间规划、平衡步兵结构设计与控制算法的耦合测试，麦轮和全向轮的飞坡以及在盲道上的表现，都可以尝试着去进行仿真，在仿真过程中不断修改机器人的结构设计参数以及控制的算法，可以达到一个缩短研发周期和研发成本的效果。</p>
<p>Webots的物理引擎毕竟与现实物理世界还是有较大的差距的，因此仿真的结果不一定与最终的测试结果相同，会存在一定的误差，因此应该根据研发的需求决定是否进行虚拟样机的仿真。</p>
<p>所有的仿真都是在一个不太复杂的工况中通过虚拟样机做近似处理，从而得到一个优化的结果，不能完全依赖仿真，从而忽视了实际测试的重要性。</p>
]]></content>
      <categories>
        <category>Robotics</category>
        <category>Software</category>
      </categories>
  </entry>
  <entry>
    <title>Work Summary (2024.8-2024.12)</title>
    <url>/2024/08/23/Work-Summary/</url>
    <content><![CDATA[
<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="d6848ab22fb52ad13ad11155b8f7ce936ff8226eee35699e537ea4c7cd7b2b6a">2f6169c944c4a66dcc0bf1536b4d3a59ceae556fd5ae2d79ed3b40f5d5e6857f93c7ef01633eba1e6e316ce85b4a755cffac585b10ef5a48c091cfe28b9900092ea84624bf212151c19137d2011c484f0c423efdb7525ce0d7cf317ceb6997dedad3b30f3295bd1fdbf622582d0eb8481a785e49c60a11222959d8cde7a2c8b58ef0c7322441255c2f004ddd32fb9e4041cb677201ae5c1c1bb53b65808ac18f4bc6eb7770a16a3096e10ca41b4cdecafa7a7001e2ec27e98be23f030b3137b3be433e58851f8861594c00af5e42abd7f0602c41b1b63de5346f4345c66535b437eaa1296f2e07a88fae1632ebe6f92db8815373429e5f627425bc6f3fc9795f503c3ac2ea7b377f607d57a00e6011e2b20cb473d2d8c3ba02dd55b7cc9688af6a19a93079952498fde0b056e06f2db15ead629b13afd5a1cff7a8b2657312941e4aec9adae9b0f1b57d7a53307b03320060cf9df0225c56e81bdf49d82aa2dc54e43261d4c1758695524bec03dbc18b2006e7754dee7df530552093d6c274fcbfe8f378a088dc0a923fe9ba32b4ea494d964a73fdd84c5d47c318460ca485a2b46ecaa7a73042bb53a5b755109a44793602b9d9b6989738efb3aed3a091481cd368fc8ec91e7a54f2e7da62d5ec4854fc65526d22143c63bc0858593290485c00995ed62334c2dc01cb2a726fcdc14b6e0cdb054e6ccfb4c11d1e63a0fff7f4c9d2fca565819c696fd6e09cf8daa5ed4f2862c7ade9384f35bd9571167ea49aa89d9045ac111e87e4aa821344c5de68520ee5b204f1e5e2f3adfe48ce0dcd596782d123ed5f9a31863914cb09625b077e77e9f6f1ef10021e787450c92d53e97b5364f9d3409f4e26e8888f847f82f16609b1a87eb9149974be073ee9718f505a25f905c97040094f9b5a2f81ebb2a64b3ee34c8796caa70ae1dc0c3df801f64b99b45e79e4671f97a012feb228d4ec03fb8c0619f72bed0034a4815b636a33cc38e78142108f24377962711b3ac56297300fdc202fffb790e6a70a04e076b3ef851c1453df56d0cafa920498ea128c28f3edba9faadbca6293cbc5db7d70722040b34b12e335bfa25751123f21803a26a9cab5b0a676a0817d7f16e6e1a55426bac84e2a4068da4e7b71bf483651976540745fb2e030e09e1a1bb953bfc97293b6ae27e9b9d001109ebc34a9e4f5ba7c292b0bba19dcaca268d02301b91dbbd8a7fcc6168bcf31aeb939fc88101a691992b04aa24258778b319c52f2558e67da20b0a3fb062fe22691f9c63962f78ebc0cd6707b502ac16c49539ae6d9f82f0975b85de11431ce2fa0d8ac51ead8bdae4eb05034f5e30ac524b1eca64261b3daec9ac011a8e8d228da4495d4217598006c6fe97420ab424052fe640dd88fd560b3dbde608cc9c85c214062853a98717d2cf43f956d93cc7c5f82ff1e6742ceca01985f37ab266a68a1d3cadd66641c14c8b2c884a023e457b5c69b964d4e8536ef37d5e80937aab3572d2684fd65e846a3bfa2eb6d5dc645c6cc37483b64b2f96439dbdf177ca71012eb08b9c5f9184ddab9ea345168238206c02fe40e14e9efb8bbf134f6bc02dc6384b671bf18e42dc7bf4b7173a84983e04ae7a134b1abe466953620603c8dc001bd9305b07fe8b3234f1048c7f68b888cd2289e9341ebc18b6b4a2cda80bffe83beddbba9625d0f318e568e628ce6a0fcd6946590544e620c65f82ceca4b1b8bf413473b630a406897415a2b5d3fa5d4b530bf6927544b837fc92af72e2809344497ac92d9294911d0a89d48f1d0f6381e990c3934a0f86da5781afeacf03464856ed56bffadfd798ab7817fb8e3c6def08fb7b0d376542768821f88dfb12a8901ec4ea1231fbb2cdee025423b0409bd4582a49854d61a02f429d16e27e4223775835e93d46b6cdecec548d41b5a0112e705ef2d6d8e09aca606bbd4c5a588b080abe0d3259b8275dc88f58bf1d4ad53fdeb8e79e4dcf29e49c2fa2d9bf17f080a48e58a8817ea93bb6ade8d2e92a1a017cc7d62f6795bba02e690e7f119c89af6d54cbc853e39ce742d9172030f4e1a5a23a9019982196e83c671c8d501617e890fdd3bc18dbe963f9b1d0609b54adf6c826dc3277d08d517dc116222c2734d2a9d0f1805e829ec98ecad4bab26d6e372383957a26d140b0aa3c17c26a18333d538590c3b24ecda896145e4fa0e9fb050cf4298c8e5e69db32198f8c5f7e3a51ff1ca03cb497ccb05aefd378fde45bcb4f70239a1b4dafa287566d0e474d2b5cf5966dc1d9b8c17284726a5681b4b9b64792eddaa7df3f0f272f878b0a57becf81d952704331a2ce2f08e9e87e93f2a75ea5a236869fc822baab3daf2596e3ca3ace21782eb3d5aab9225e8f47bb144a2b7922f969e21db1baccb8d6ee843270d6cb6544727a3908399836d5626d33e4be6d58e713626180b9fc89510c895d98ffac0394908738c97ec0131f3c288a5929f2af2ccad5d160544ed7647084df93c8dc305a495555ca468b01a9cbfc0f2948b04349287820a46bbfe317eb0d32a01f6c64ab18d69ea98f0e2e6053550e62f768bd9685ff7773b0b14719dfb55bef3d026ccf8d7f16bfe94936de56e59cee5e353c6e31e566b55781c106737c588d0c7a19723ffb539785692ac492f0aa50d0cbd33e15479250bacd265783a92783de3e86fc54d7bce58b59b8c6210c43a3c25ae827bb09519e750488e39c686b71cbc23b7728ab47df2ae7919e89224bb8341521196823f65daf8faa68eb08693c431e2bb7e67c67d8f7d3288749e1ce582cef39292d1ed9475dc1e6655941162a395e26d01b10608e2d6754190f1d9fbeabadf94eff1da193d1ccc24d2ec1c8347a99458894945a5f21de9efe41e6fc248a6ff344fd4dd02a28c4f5e5f984d6b25ec7b0e7dd40832bb5db1e6824f325e003a88bf2d5fcd825b700aaa200f275690d6ca261cb7f1ff1633a48e2c196e3edf39432b0b31c34e70c59272104f55fdb73155ffb154fb514519815ae60b7ea71f5873a4d44dacfed5eb8b71d208f3db1f88071610c37f20dbe59a5fc445a937ac9f65d688d8987a24714b69c02557b2b7ea07beed93a9839d39d44a0cfcfcb2e9560f7bf9bf3e8f2a2208ed4175c0bf08054fd0e1ce5b3c533bef8d958c713f99f62918f0f037447adc37104a1da8f3f60fca4a787ac71c90b64ab8ff58825586bf29e9a723a9e5cbc8099acdccf0cca4082eef77774f73136f4a36a55bd2a90f0ac4f191eef94b39a7d91c2bf117d4ba824926ad1ea16a58068a92c3bc71ccb939365f92e57e3c735f719dcd47d9b0b3685b2fdc926561a3df0a7d5c3e6c5b46060d8e85c40f9ed37dfff6ee98df1301ea4688627b681a8e10ab21bc1329cbb244e67b9088c8db95d9a992b98f70e14a272b3f8ef14488be689ee10abb4f61a8da8c44f402815ef770b4949bee70b7ecab521963b05a68ceefbeeeca963489ba15b1f35844e6d8719d2a04c7a74a42334511a8e8894d9de589cae982b0cf0743c360cc427ff14f3da86f88c780c55ce0768d0c3f21fa1d87782f34fe284bc67ad50a08bbdb6a9df0f2006dd80c2c5adb5e56bdcf1e9195fbce6a0e4d700efa400eb59d14c07b4c6f367dad112ee75f04353240511a8c1c75bc903b830cf07872d4c04294cb725104c31ea3d2391a86614cff781083bb0ae33d2a989e59d4293073460e0ed3896ca1af53890567245617dd9b9609437b958093dae846f0af88b3b7ace48d7625a5f2136c9a8d466a0f914fff798c697abdf1c267fa372d7041ea3bdf890e843eeafe220af8184c07aa0dd108ff2bf251b0c0bbf5cff7e7720a50df55c4a9961ae0668773e32c967b7b7330cb13e3f020a0b028329c54851efaecb92b757ce74ed9660cff04d2ec0e83cc3f9becb962de48759a5a731bf4d8be5276d28da8df04cb9cd2db25a51f087ffcc4583f4ffbffe98d950b22700ed7346c8124359cefbc9f751e23e60e65c7257462e140da06f1d4e52fc36de95b66f780afbbc9328d52814e84da79f2e052cafa5d0c6b25cd8319c8eb7a698ea6732c836dae5e705c9bfbb88b61b10b4c7823add416751c7f71c03095ed08e63c76157e1589fb70378693d2cd23a7672540fff1230d929a22d803b102f44bb857ec68765ec48e67a1107274d656b70806fdc850f305136a8a1d4618671cf6d4842d88be056ef6e59371b11cfcb1726b7a1111ad42adf909a97b6cb1208a9c3aa961c6e2bf4b8f14ee98bad9ebfae7e23a788fc3d87d94c2ee3ddcf5d4ad83942ec21d7353a916e02b288624bad28dbfc19330311cec61cfac65ebc113663e03f19ddcd4db0d28444cdd167de2baa1e26fad749eb3e488eefafe2ea329435dce7afee3df293f8ec42b248f5435f824fc3de652a20a5feeceea642ccee4e7093bb2f0d61eacee6ae7495f413dc313923c97142e09ee9555ed5cb128f44b460ffef205b2d2b6cbfc21c734e3128b339e58635d5bac23cbb80a769fd1e8a0eaf58a46060f5b13bb0ce310b14386d727f6a38696f81e88933752f580ef7e733a72fa3c5d6ce8eda6571a4d7b620763e9f87fd06c5400bf8a327db823870ada3421600f7b9246c66d074cb0a94cbd5a7b0fae110ee24a8cbb0b1a2535b69e66f7262046bfb2379c8dd2014f70e291965c54be9070d30e6aee8010b23b48f7a5bbad5f6e5a1330ad5a8f1e12b4ae909443089e894d0f1a846ebcecfc5145677889a6ecb9699f29cdab8f3acd29ef421f892f4d02ae3cb9384143857e3571ff4ffa3c325689c3db6eef1676060b2129bc0fa1a144b4952d740a3f51576af10f473f695e74caaa996a639ac11962988eef964ae5673293c837573d17bf5763812da4a99c391ab9f9508956dd03289e09f9216cc7bf5740c8662398f8055d67ca3ba8ffdd83c457b5909d0d7340737ccd0a8dbd313000143ea82870fee9239bb829028d289135d50252ad37ae6b3055cab19a41f93ac1159a996d6b0ed4e5374fb1afc3a8648bcb9cc9a7493707791db121014c27b9f8536d946ac390bf850bba6b565dc58e4e8f49c1ba750d557ddeb6ff5f9b61aaab3d2e9c6800ef58d9e964f70aac9aa22c5c6553e652ae3eeca5ecf7ee500b14b40a33e711eb3535c3b0a1c923dc37841b31fab0cc15213bafa7b9f8adb0bdca203d6319a1e89b523bb131c6e0f5d30a0f9edf14c549764a2198b543651a476536423920ca1eeb807730a1a0a66a2e0c1d162b91652db0026a540d9e49c41d2761f6ff7cb5aa74aa1c9e6386d8d5b1b3bf1c20bc07d54802bcb48237fa9593e0278a671bb8f99d8be4000fe10a6f696b7de7c39049aaf44fbf0c219db5535855a5664793e807dd9a00a740a96ad2ade18e34a95af4791b8d1246770a7dfe6abced07d5788c0ef0e859f111a900d9e734eb606981341031aee9741a6d273e1c05e563ffa394d43337493c29f7b6f98b7f58471259e02144fa30f14500b355b96d384fd9ecc0fc1cedd211f4e67d49249e5350cea920999ca6d761c45a00045de5f6f7860a69e5ba510a00a25e24d23feeeec669abddc3ef2fd2f82d80ef31bb8ade005e466a64726272452aaf285a28de6da8fa27b501bdbc2e2951806ce731dab3799d6046cefd637307bdee48f9aef2264e0cb378631a63d4b0d1ec399195e63fa4144fb25e5fb6c3162dd4375f4a891c5b3ed0d204389ac7f42df247129aff3a89c6a4440d64f6f581390905f91c2315822a4fd1e624e4895e6bd6e1b8c44a03b36082129a4247c52e984af03b8f819d80625313bb199977135168afc513df36b352ac2ad324cc0d2df416b6e4eb0f27864b87807167c51f902f619ff780d451bda342638a2eeb6c2c669de7ae075219a3495d8e144fa433db120c0dda8a738651af55825cd521f82d03920e164ad5486d5a841d9e871a8042b2cc9b596a5153aa74c7634f9303d3653d83a8f37c4fc0cb3209d5157167af7e4ba38bd1a2f3a80bc1e274ae9042fa507445921613fad06f7fb5716aad90d70cc7ba250d7a0a436a24bc73a5439afd544cdd6ee388fc1e026c8c228fc758134e850706bb8801ae67d99d8eca476a62ce2d580aa29ee4038f67c672a9ccb814a49b277bedadb6670fd052ce3ed834d86da14b8f9fd7bd55def1a2548947fef84315877f80e28debf435dd381778ac56dbcf5072c316004a4b24d396137bb9e2499b038b95eeebeb806949cb7bad45b9356e13906d4da8f269a95d9ae84c6dd1857be5d6bf32bfc8e7a3415b4d2c0af59cf10ca4c4b97bc2a0af900b6a77e68db438cd37a69c00169e0177bae17fa55c55c9bb8eef0d6b3234d71a1ea67a9bdddd5b738e8bfa57800fe0419cf2b31583c40fcc922da97020679b6b021c2acb2b61800ee37f10eb2a820b8a4b5dfcd100fa8eaf8dac062ab2272f0b312e83582c6ab1b6adef24a509f8bdaf4c64de37c0ad78526894979dba92112d07ef229decb7e8e9963314843fd70ef00156f10a7c143c656ea8a8c02e5196e9336a2a911ebb9cb2d418b55442927cd410df341aec24623326dbf75836d501d793f2bd9e279c0c3ee146ef94d4d8caed6ffaa309a3f3e0fc6ecab623bbc9856a5b071c1e6a3a029e69f039594801043efdd9aabe729cedef845eda9437b858e4eada7977b4477ea6d7edc8cb654cf4d84eb3e3f0bdfc1d6f86498c3326bd55030c8d06ad67eef5fecb17b55c6511aedd4fac901e842d4d80e6cac4d3ca50eb12cca600a7f73b55a94df8cc8cbd33e9771df940e7c59956f87dcf0b1d5910e450111e317bde9ab745a8eeaf1eec88e86d8da2b06167752939c85682c383d92727496bd4a125b38c9b90b097ba623e96ec9dddcf74e39edb9a8bc49ba97da80a8dbd8095e470e69df237a22750ea9470d4c3509bfe670a3ab04d28429ec3532a0e4d8aa9d648a8a71db1380f6800cd14595e17da656f5f8eb8c71e137565a3efc681cbc851aafe7c57f7e814e33f0e73729c63e43d4628d7e5b74bac6a1fb521ecb7027acb6501bf72618631610e70ffaee145fb5481f0a740bc99b6be33c2ac78c822e1ae6ef53be55c0b20c4ec41cef2ca17a5fe7edaedbe3166a673910a27ad109274b6d05a11f7a657ff14f61a265ae193313d93fc23391e7c25da45a4f5dd14e58b3707abe4b150b99d43e4bc918a489d27b2083c3f1f87190a419646251adcd6a5ff9e433cabb7719142608408605ee33b0190f3b6e12691a95f456b8c35631abedb5bf648b64b3be6d6ceef4a4b9acdf19fb6efda3814f1be5b283803a5e98dd0d58feeb3ae4dfbb9702bbd7dbf800c2ec8605d5b47f4edc3c5d29818efcf23f76f0bbfa871df9050582f86bfd16f1939eca698faaae902db21673f0767d98e9755fb417021ce40b80401ffd6dc8b8e123bd9124075460f265e65a768dbc7c405c9aa99368238c014891566a012895359f31002f45473b2d0c92ba34fc83c4cbce552143bf40d7db853966efe844b66b332c8f2d5f7e8b9ef1ccc2d74d6e9dc1b1e225d157cec22fda03b513731adca5f73b818907c526fce7b5b756f6534906aa1f143d981f213846394848cd5c7f2ba98681ec95875faabc61b5d882c5a077bf72e8ebe10e60c3500a681f3b2346d0bb0ec690b1c1579554813d1a9e564c0e404f96a23c52aabf1fc1be5c00e5108a5c29c4320f0c9bbb779e1e636330f0c4629277d3fba5400b18f9269999be0e4bb6aaaf9a2c44038ed853ab756072bbe52ad97926e9ba73952fb531b7133ec32162071d1a48e45086af17af57489bc9614f12d13ec984af022c0f428692564297b38ec355cc07bd8c594bf0d4a9ab51bf150f71728b287cbf0cce41770739370c6f89dc19653d37f1f2bb25cd3298c8b9826bc29307daf09b026dbf9c7e3535d9c42c08fc97122dc6e1a026d822f0ec4bb511cd2d7bc116e2ea45e70279a75cf3cd440fd6338eb8670b3c9ccb32d560df62a013c0422d6284829b0d5c49526a8ba43c4bf8a0723b4914c881ef92c195e2edd1e0b6fa973e5ed0e965f5bae8031caa9eba087f64d7211d162ff6ef561d10666ec6a65d303d2eb2e90053ff21d60c8e22e0f06ff11dc0fa966a2a5dd017c8ba6a567f7e9ec000bdd05df9d45f1ede43ba7676f2dd310eb15c4825fd382f82933de0e8c5790dad0342ff3f7d19d4db8a9e285c3554ff7f1a83333fba8a878482082d386107cb04b508cab898c9f93fef71db1504be5d3cdf2a55aa336bfba66d62475c89a5622940361b519956100e2c869034ffbdd24f95fde71d6a5037cad6c278637f9659ea9d0149d37f556e60636ac29003e9349b0cd4a58226d37040be8856f72a9de267e0d61e0ca36590ca7e1521ba9fc32c058776ceace28c19df64e065bbd103e3291aa2711f279e949e6c9aefbcc0b66ebb97673e15b9b1acb217643d087e3af2ec12342d56c40c462e053ec1a53ec03973708c9a611d3523d5e84a3f20672c88a57c6d12c975fe83d251f9344de39b08919017e86b09bd017fc4b389d736d5acf4be38ae835744a2cc9378085f47fcc0d573ba0da951e1a6ed8e29f584ec258eaeea639293b763d5e878020857146a87c9a964db027113af66f012a866c9b3980e63956acb5a44f9332ee5ee83447ac00ffdac64ae38adc3533290a0f30d2c008f32aa8577e25d09fa6a876d3e85ac5d46510588a6fa54413f9022fd0725eb68253781ab6c601d3dc52fa0e8d7e08f6c85f93de80404411ee9a36070db9ebf43e2d407d176a9e519e650ea294771e4a8ac6e47477e64b1abba6c6f7d13a7f7b37cdf301361ea7ed10d880ef787da452e8b62332c1369cc645070ba1b6083d24fdf721b698bbe52357c109bf23a331d19e52e05a2a548657c269892e8106edffb806786a46472c3708855b7c2ea02b281af820fa907298bd2df8b047666928dcd8f3735078af46fce52952ae8f6ffcad4b73e40965d65067709cc7c657d68c6d313fa2eacdb078b0113ba9e70e8aa7a699d5d18a92080f1420200d4a1803ad8539923e1e373009a780671c3a624a9cecc471f0ee5644a2112dd18ee059b6a2997283bd437c5d3a9513d1836e33163b3cd61b65da7f3b67d00090b16682df05ed4055fddf50d00e82def39350c5bbb14f51f0160b820639733caf13ba3d9daaacb1806bae6279e303a1159f02a6275c32b68f5896573c305205ec4faf381ea137c16aa4211cf2b2d259d801319a075f2e7a232af6504948c5f4a7a04584533f8ff0a50ce3b9bf2119911641db603b81ab3c32e481b4cd667e176fc9f6ec9e61528d206eb706da15105840983fcdeab9f4cbc5f7a110ad82ecb61ed9bbcbf9a1f3571b100c6482d6d92b7d4398bb21fe2111124faab700de9b9468f75282462ca620762a0d488b0a01451176acd2c4c1a0b9fb0d14efe05ff96efd79c99056b0e3eb37225d0e71d733231866300657258723477f400b277f5b752472d19a7f1cfef5331a50c2ae8870897a497e764670152a5cc6efc262e22b0e7681854309f48b0c5d7fe2f5c1394542433035d406de6f848bb87636b7ac496746310c6e187177f80695064df915354c7853ba0018dcd056e02b6d0bfda12519cec3cbab7f2dc515a47439c30e1cfe8d5bdd75050b3e62be898e3f35e407f466af826c00354401e76b60b0a6f8e58229e4174242e781b6131977777beed12b1bfb0da3ebc771357f1d828b1b038af2240cbc3c82484b3c4f6c71c4505835cff29c440c9b5c0c58162ac61cef95dd55796447ea955c0b2d6569d675e4675a7f45cf33218077f8f626d297d563adcac612cbdbeef9d25ded99d51768db06944b3e1ea59705e25ff8c3966ffac9d071bb5433cde6c9d0dec4af25a556f9b6607e91b29c7c9b3c1029c0d73dc4506e3bf11b4e7273c718f4892a82628382fc00ebe833ed42f764ae793a19923c8b1c81ea5d7b17f4dddf0ce921cdaa45c2601a2de0b6ea4f7cdbf568831275e6e1fe9bc61b047dc6da37163df8db95d7b54fa2ea38b1bdf9a0d912d43c1c7d72bdef28fa04f6dd6b5d6627a6ff88040d37a04ec217a885ee3e606c0e263ce25312fea2c3a50318d841fa1d052c8652d274351fda57a329e915f1c9f7800e0e315ec9ebca7f7f3f74e73b39d593086304f0249933ca5f3098e5936b3383d4c1d5548eb0b4be76f286a338ced6d25e3b3264637d79c9af827732b6bbe109221a99742c4b779730655e94ca344538a4cdc92ddf632609f5d45e405ae5f075327a43ce0da7d11b0df337d282b06236c441940a952adf8b6c333002ce2ffcd0085eaca4a7755b24ee2cf9d8e8db57e394fa453de805e7be8316f3615fec682601a3e986d5f75f5ddf6d492e09b2a78bbd8e802f61a1c590f74dd4b881bd5e5484fc3333f5b378acc45d6558708f4e0f8b28dd7e4112273d9c9de0423a14e5efda2e83144c2f13d415d11914b6b7c95a779bb49e9f386eee1b86661864da07d8fc3e05645d7053cf6927c544555d521b8c97e5c123a204f8300a31d45563a3d0cc3e66de34522e567b8cd99c29ab6969ee3e4609a3f4eb6e9fcc200ebed4cfd9aba1adcf775fd799b88ee3bc8827c5680f459166c758b7b067ba99121f3ced6dd64722de7ff6f5bb940c7cd3fff899464a62bca66ea008276a58bdb2bffb26a196c821d43e6215f06a1936ac35452ec6651a4cc2391e004d26e92f843c0524c5be6eae5291db97671055e5dbbf2a4a74dc7f1b3f2754c902c6c6c74d3a80ab5e07de96c9cf5068bb13245ec10a6fb7669cd86d1b12df6c0621d3c81f978f80d9a193e3c1ff6b8c1bfc703421efef6306283a4ea9975f0f191e03a0c6c980a261434ddc63282d0a294f1ddf3f64a7d3578af4aa847c8ba3a74d0b7f69da6f3039b068d62e1b57cc729b57562e84ae4b73f231dc43fc2556b6a765717a7497231e268bfa40d60d172da914f6f23668ec82e91be3315f8fe1829eddb489bfa811b3acadabe30f82b1b614e09125597118be114feaa728337d9fa5039de5e2e1cac664985547fd97119aee856b2d235ae506d954640559fb769b0bd2c2e1fe9ad96a4e35b54c9b5562b920c8e7a56d39b7f05b39988f963e3cac7144e7b50cbbcc5334d291b43bf030cab43318e516a728191833eaad5ee54e702c3d489a91be12ed554d719d0dc93967e784c31d51d8a84a85fae79de9119f708935978e2af82708665c8a416f37ce2894986aee06166c95e7669270852b6db31ad1cd8f427c385bda4e0ee787a169f50af3a49fefda47d1f06809ad1babd9267e9f1d0d03cf2395e66b922571006158eef4406b1ed8b59685089fa04f710550b8bd85c19f60eca894251a9566bfa035faad913b39af4400e4ab5a6fc26a4e7d9456bbeeac42edb25088cfe7ce2fffb25ed1068192460afc58aa008edaa95193b4e49d68fec58ee8604c4d092fd5f8aabb06d3e577078f0ff8c48d23712c59999dcda035465d7624e27e64eb3614f8655b99b6b0c2aef57124ccbb578dd31fbe337d072e6eca72dea1f8267c781d6fff6720fa3024774c6a02a4b2d897017df122f1d04b8f7db2859ce95f45e21e428fa8ac4f9236c3a27a3cda3fcdc5d9c5e10870f401e127236fca0f599135e7b6d5f85fb11f9b22491368f91f724fb43eeb076a15aa9a80b5d0f573af99ed6baa81a1cbf86e26a5567785e728b7767f4f6d1b92851b19e74e39b8dd35e92eea80af806a939ab83ba6c6e877787211de7ac2a79e28420ab768794e805ed3099bbcb013e1d97dd26db283f1b917136c979a525c407e23a9852acd5c7169f3a44affad2e9f06bf67d82a509e729cb4a7ccc14b2475a693512af8f694e5d959c2b012b5a490373091b7a2f6666a2a7682e424c2a4f2867f8babca51bcb71ac5c8b3d6e5558bdc06a64c02e02d6e2c273b82fd845cbdea6677755bd020f359f2b84b917da538a672a2cf411c9a408326158292a82b28289d12c746d5123e943fa5a7d36f3b99376524940f60ee0fc76bce6f15152552b4a1c8f583a0deba58a5dfeb915e185f0f88b820b7cd0793a3faf25bee2522312f2ddc5660840aec39a5bd24ce3627ab6f43a6c5537f17c1c03d61005a68358232703893842ba1b6a8cf7a37d9305490618d608eccedff3118e4749ed1622b89547cc1703f472cb61a4be0e17902fcc16cc5c49a870942c5633cefe9229fb623b5b3c2cb340532ffbbbcef3f076ae83a54ef42d220c22878e07aa44c00f13e77bf68d43b8afca022602f56835e7d4a8f5daac398690a33db182dc4d68dfa3ae2a3e7f1f7ba2f64cf76fc5859f938b9cf48124092f123cfcc4627d6ed6d3d4ff96e2bf434088b5ed9e1bd37c84ecd5aecd6cfc60ba93008f8af2c9e7cfcab6abc75d8b428a38e7dd150c5b05f93442e777968cba355867d06266d6b72d43c861058750e1a62aef8de775ddf4325fa266f7c9c724ef391140e9a6da9bccbc2cbc620ed0118c3463bf43c296f93969a28960316e9f000434c6360bb6993d70e335024599d5454d8908d66c6c137190af5ed2e4eefd07c17ecca9a5667947b085a8e54072dd3583304cb44d8726fa2f2956371056cba3b881b25e46ef61ca3fe15ac310be1aea07ad98ff3148d5f1f2d8a2f64cde0da4f6b718fc6962f81d5ab13931a0ce1328053d04c94c702ac3fac4e3133857ac25a16823f2104d08a6e1eab9dfaa5a87097ee6d17542f345e489adbfcaeeab310df5b6e637ad52f9c4145ecc0fa517609d732d518c8b1f8a9ec38c4cb9e99dce167ce316d5832578aeb0441c9596a0eab19f07987bb3031aa94f7b786448b04aaca447b8d0b6da10828e52d98a6f47e9436a10cf0713bfcefc22bb032dcbe38f784eb9ced0ee2cfb44abc5ddfb6ce48537793bfb7a248cbe135133dec4ebab99de81ae79edc74b21b347b2d828fb516f0144fa881258e72305abb257479e8071f00e412909a5b0ed57c635bf5c833e908aa16d49e4d72fc1d2d826460dabbcc970a3e48f0414a46fe6f2b4da79adb25ea287f4f26609f36c93471b25e7463f232d5530f179c56dd87d4fe11b19d2f2281cb9fb5ee1265173da6421bce502ffa5514db415660e28e763d95c9428de9a9a7b27c0658252b59b64009fefb783b60c58fd9bafbc5796ef71e9a2bbd1a56e511b90dc74cfa92281741118dffd7a97e49d23f57b37b665dd1c035355889554b859b9509f455bf3e753b046d448cdbd04e881b28e6df915874aa80ffccebf39fef62ba898be81e2e6ad8dfc042f563b1e7393a3aa2f5b113cfacad353dbe21577eaf4d4bb9224117ae8bb13c23e941be512d2e6728d142ad2f99ef2dc11f899f72b920985c4215cbaba7408a4381247e61795b59934b95b0f9ef04f428fe745e500447a50e24dabcdf22a119ca1bfe2e243527d73b0bce31086b20f78c64132b0db3274517a77e283f4158d01ffb06b81b88a6b20e297792d8ecfd0cce28cfcbe5d9a23a6f2518754b92cac5d2b9fb4e101685dcbcdf0edade9342d0fb0df0546b6c6e123f8385f483645c2883d5793e9afa232f7599c95468db1dfc870762290397bc166e7c00fdad7c69408d363224175323503d007bebda02903349ff2a025cd639a4861e3ffd4ddbb5bf4d531ad7bb4832450593bdcfad98e97eb89bf11aab00c408be286350981662da976383541130046b844453daedcf78065e3bc612abf8d70d786864d25546d2eb11ec34d89fb5f710eb9d7ca7e79524f2df95ac200d70a5730de607afa183526055d315302de7dfebc87f1a950d671c768727b3b3d083363df93e257d897a152da65f10bb415ef6ec77667b1fba1275c689836ba1eddbfdf59795932452bb93daa40988cdd665acb2d8b5465d65703890f6fcab6a65ae7d6c3375d6eefacb4db964614877e1b2302764b83390f28e8a34616c0aff0a6974ddf94a6f8c0a835cb8f5b78211ff1d004eff6beecef40b0c33b6ad10838ecb39f52c4ff5988059fcf9c78df048d67350c0048daa4a8677b65519b6b4ed3d027c64412afcb7648cace3d5bba83d04980a324c7b290cfa42f3c7b94a4646c74075a3a4f8d98c6078f6638eb6742eb8d3ce391f93f78a827ff94240e144c8e244a4d244651e72ba57ce486f617a862b9cbeb1c59aef4362b5f49d99f51927f490fa6325400d80e1f2631ef53aeb850ea2b82f1593280958bb7ba8a76e13b59036629e3914967f55953f28a74b78b219d54a6286f56d23af23e05a74a56ad81c79fd3d672c31d269a8e00e4ec8edcbe7da43de9bdf99d9848e2b91be124dc4e39148bd6b86e8a1cafe94a0d14ae7a8834c395313429385e758485ead9a322f190ca733fc41de754c2955848a8a49e2a98c33cfd049b0b7e2e0e6ca08585e22aecbcc8ffbfd4731180aa325bfaf7635d64f4c5eaaed99537efe4a1f6805784c89a7db2bdcd0e27aef629c597fcf66670eac93bd908eab368d83021884569b28906bba4b329d663787d04915b78d31b3c7725193a266a4987dbb3b48a4d2d4365ddf21c01d09cd9d4870325ac5594e71a0b7176eef950cb13860ea3a793ce82bd0ca104b857fb1a2e334884cd15e6a6f5bb20cc6f0fa5e9d9fc9fa51957aee96d4e35b70a433cc67ce5721a413201965564df51777c39874cd95ae01e96a65a787d7b19f2d21019dcda8c232007d8bfaa28a586e8ad63953ecd814b68f120f0c38a67d3807261e434fe3f4bcee0886407586177da3822b672ff93d53092e1b5e97299fea79c77c90151060d05978e459ab5b2e81cf80955b16dcd5db5ff873d9fab774faa9a426db98dc0d7ac587291ebee85f83fe716b9561f5f27edceac9246d13feef3e2a89f06a3374bbc787d1d0fb19ab7beea73694bbfc1a18be0b003aba1598fc5c2f6224999c44a3141a2cdfbdb7824d73578453da3b663d26d773f79d304d2a90560fb698bb0e5b7a0fbc6ae27b142bdf992241cf491eda750fefaf2853f855d19e4ab207f64d84e35a064aa285480c2b71a8982caafa06e37416e1d13795355408c9931c61de39537ede204f64ae3bdf32b3613c0682c686c204780a1b381553b61515f9f0204dbb2255945468643fccad67d9d89722cf510a1c1d76a1d0054c8e00c1139f46e6313f4ad9d8a6088464a7c0ee688befff477ff59954eac009e1d5a23caafec83cac309f07454ea1ee322b0af6045eba75daa87a90f3f2d8e0514f32a1b6449e302a7b0cfe1a5af2453d7672b9764691e5c2f845ed3eea1cf2e76fc8a629c5e16af48fc61e4ba61bc053db459a842beeec7014e06dca4e0f768ef95402ba3a2af2a6ba1931f5a9585aa702d9dfbbc50180edee51d3f53923596bd3176402d477c4cbe74b733149a4aed032c2ae5491f7ce1bda9d1f093145d9a9a58471105146d9661e96211700b1781e8a08bc18dff6949fed34cb8945036449d0bbb4c9d5d88119db80576445ed93b78e599ed317c039bcbb0fd4c0792d269880721e7f3582bb9e13507b417038d1c7a2a540869b5768560bd8bcaf6307961732628f26c0d67f555ea0915473fdfcd4a3d01b3c9f45dc123619a4cf9c7818040fcf8e70577862f251467d661814a491a166d71c5bacc92baa8e0cbe55c26772397d226b7899c21b61c1079b20d56b7495b6625025e34e55867f70b01bfc6d9b905a31e54865ca2aa7663d60d163ec3b12e99815efa8f56b136d2e9fdb52410fadcffc8b479dc3c8da1a1f9589194a8c092d71d29b5a2d18a3bc226e84251ea1e7e49efd44e25811db47331bf6a9b0acee1227916f38ab77c6672bdddf09724e739fa4639674d39475a2fe89d6c57f13acbb609f886cfec1bb823d64e1f2037e363428cede81f0911a1adcca603bfb05dba228919d4b01e27d91dfd61c9e4c25bd51fc546c9266b4d78de65bf34fed2652a3299dfac61b29ddf1104a5cab654808e53605252c7118b7a4bb54a0ec51c3dcb4159b2e682b4e486f4a9c815be88ca8db76299b8091d734ad4a563fc3603197b65191836e3a08dffd24fbfda0380d8b1c5446d3f04a65810c31379b6a572a6c67c19563941b7fb0dfada483a5dcad7836e8eea220141c5db544f6a19bdbdf58bd603e289fe61c4f65fea6bb72101f5f8243736c5be7db9f90456a1cc181cd11edd8366cde332b68923e57c223916deaf76d4de004c006f332ccf867d6769218c2d3a6041bd4689052a03d51a2e8535084c40b432d3032f1d6ac376008f6933546163f9f8e7a80651efdd6b5f245d495251689b84f54ae765890004a0603cc04468cfea5391e92a4f93850536cae4e6c5ada30c4a15dce7a634f646083283744024bf137dd32fa4785c351531f5537b3bf02104febfe30bbfad5307ff9b2b1a6539abc165cdd9d5d3055747c341fec49e5d314ef18b80ff1bca4323b021389fe405a65e745c3ead5f32ae51109b11fb94711cb888521e0bf005e215e8fdd3851bb25584502b3b5266f541cd350844fd1c2f29a827a7869bcbe2786cd659f3decd91f2d00cc82ee4cc273d72ceabba43f6994be0a43ef40b154dd7dfe5d66151c0f19ee0fdd35162aa0dd09c509ee01e7926ade32321eb867a53cd996642bd033e4f49301d0ba3eaf31e720944bc526467fe8ac32719675c49a5fb361d4a31a547132b5504f09102b7b39b1a0df23a256d66c3ec99a375b43f5c550065c82a72bc5f40b6cb6e7f11b8600d5cbb80315bd7062f0f6591ace2ba4af7e1c19fd5f292a04f43f098c3da50d39bdc67c25945633ead1af2b5509ad21224bdb65c42ce4b8eb9b1366248dcc21d51afa83bbc48a5cea7f1365685ed2b8c532dc7d3112f5adcf16017a61b333ecd85f8cb3f908ad9874fad99dd03176563568d5bbe2cc0fbe0af8f1c8681ccfcac73ba16fdc0d61a20f3b6b14cfdc53250c61ac155bd28b9b2001d1ff46ed31cadd2cc63722c895e7dbb822c8ce67c5adcf053a0c4b04ad9dd5301001034f25fef56b891b943e1abdcbaf9ed3c6d97b39e7fc74fbf2d705630b23018d0ea1f8f5f89de03cd530c7da6e3fef4ed332bb73fdbd9a6f00e87f89255457e5f32a4f09ce24365bd08386acc0012c99ba6554b4483e1bdeb669a82a401bb213c5dbc5c067d50d4eb28a9969a4aa3babfc06747f6199f7f8039a07221602f05ed0d1b5df030b35a0fddca782e64b315f539723b3aa75d6fa84038afa4fa28a72ba4e7121a825b916909e1d0ad72b9700c8369d61bd0364bc1c4052cebff1a6142b8d6d6a4cc3325d88c4d7963ed8898f97e810f35d1a666fc503e7bde31206a57453071d1ebd3a05e885f81e04b83795ba36e3f85efca9bc3221987e5bfda3447653b92b329821a8b6099890f992ba57d51e81d83685786334bb7ec861dc75c6a27505b24040f3fdd63b3befc82b20e8163dd6720da74b4207d0ea01999c73fc2e6178b7ec6852f7e532386a05a33bb4c378dcbf5996ca5be3c05ca64e26c7695e7537d3e3ccd1da47e2d47aaa20888a5904cffc691f27c7ce5ead12aa87b6b47de3a607554d5388e65ace56bdf65831a33f494157dc3771756ddbb1c48fe5833421806dff09eabae6ce7c60fd6fe7fe47cdfef6e652daa1898d087bb2627b74994e6b8696b3651f5e6355a39b2ee344ee90460b9941829498444117ac1e2eb68e1c3a2b2a260ed933295c17e3ed244046dcfa3f9a7ace12928073b3c9df08e1cd7e1bba744d177e399043260fdc31a9d2c2d611afaab965f6c80d1a529c909e8af98f1a271c1ea7c13ec263de185e20be56f2913b29941976026e911ce1f62209cc49be051b676b67e485454a8810a680e24872828bca5e0e082ab7e484a344f921a122f4be50178e0aa62234425a09954ced392b15f44d99fe5c3f521f0e349d3425add58fdac0568163c582324a503117ea4d46cd50d1aefc52c5eeab4bee88e1267056a0b37fff5f8af053d781689ca3c38942584b2a12bcac82f18c5674777b400d85f0013486e0806e4fc3a4e4b668bdf4a5673e23fccd0ef5a47bef495231c8305fe568cc609128b2a060782427504b159cdd4401f01ab4994a3f40c9f23856c9316c7a5784ebb309a7cffdea9f3c0e33a20ab90e7a2da719d106792651b3e866e19bd4dc80a76646521443e2cb143065daf357cff7120da94d24847b1665100245067d4999e6467fd9966e58276167d714387e21aa1abbb8043afcba74536a2bfef3ef3d6b49e6073951e0a88dfe75530b072eda361cef932e09984de8dc76e46d3ab5c4a5f96601307f0fe04abc45d9f17b676a56d5d9b6acc0c5003ac62ec149176d147d73011656fa1b701c446d84b6a838deaae7107100c1430e5f556a997ad5fa2aa609a1c1e89bed223641bad6c4f68f1ece956c8c569de07d0f27d9c75a7f5afbd9341338be530efffa78f04ab0857813063e1923e40258ee197bfaa75724bff4e7c6e04fe87904d833b94ff523088ef679fb9432bafec0c938d3ae54a526a41a2fb80666722e999514638e706d05e91391f1a5fd0177e5e182ee95414f23421e761a072ce2c972cc1c2c5ea5d90eb6344a0e0a0c74862d1b2f6d91c1ccc8ab6825092c871f7ae64b60928ec983e848efb2b363122477de22d612709311268d67cd6036e415684472681b82e97c4fff855704683cc2c77afed1339e3a869d4d3212fd3426206af0560d85ef3ababb0f81a56ff201b829a48728724996bdebf9c8a7256bdda81d5b66356e0a6e057f53e0326b38f5606fdba366a98bd40d51230c7d6428ea0b71f632a45d50cd51fd88b1b83196cfa9242a78d6efa7ee74948dc413b2a7808ddb53602ee734b7ba4cbf690e4b31f0cfa27f9ed524d708253c48139a4692501a673fa566b0f1a20137980328d64349607cac8a2bee19225257c3f666a0d00a8786d82245475767e59c2d8ef19905c07d8c1f286b9c9e1f7ceac5c3d61db9070fef71b29324aded29650c727eefc0df0c13e774faf633cc05bde8a184df601b6c5d5a2030b0bd67b1ae3b30614ccc972fa088a54f65460051a3759981a8ffe020227cabdab6bf5169531b4a81556efdfabd8bdd88b3489471181f9868d4fd5532b3662041cd3c3bf064c662ccc8b0f86343503af3f479f39bf4d45c2f4059786d20aaa62b774c48795d03e4c89efccb7a3d56cdefca43ecbd6c1a8fc7d8475f97b03da23167380e8e8eec4a1b2f5ed434155c2747b769ba32b4afeb4512e25a3cb0829d131f777dd0573aef7f72aa8802203e9affbe3ebee13ce52a14f78c480aa488a39b416d8b1874ca2a25816aa086f16805086b5035f8928d86d1ef1ac5400168a7d201ad17c475c5a1828c9d2b88e2388dbe773a7ddd58dbfa096f221853d32bd68a8879c2d4d92c91c3fde336f2ff73dee4c6d61b442889b4dc887857fb88521c11272641b8891d6be47e7b4de209923caa1ac7827f34f6a121a90a5abcafb753522e7fe29b4060307af453fb54cee0db06b85eb338d3954491095d328ba43706bb645fb44bc29fc2768387fc1b8f45d4b0b80b9cf49b91df7614ee24879b22f8d3d41619ebf73fee9b5f2d04ce2e89d225cefbfd2adb333edff4a7b5acd55c8c4d2377c3964190883a6a0a0a7926b0576fade29825dd4f65a85005e2ef3766e9964eddbb00fd70cec7338b935cc6d26270fb3ce974e254f0b3dacd25b3911525b8af72110f5ff3a1aecc405eade866c4d55727c22fb763e06d0f9a7f2e10fbcb7de95719cc7485360d71af7348bd7402173075cf1063baa831c3046f61f3223dadc34a9178c606a38bc36608255e18e07657d26330aeda814bcf9dce83a6631bdfdd412e49841a1e989844e4b9a2ff450fbdfc72a1343d3d5780260f11e253943a0dd00140b822feb5e23d8f4350b22fa9fe55e931cffc337ae9e68ac95d9b177d089a55bf6732119f5031993a6f8dfba8b05c8ea85aba7e9d9ca3a6bbfff7df778cba12bf6bc63d0c53e9ea3164de1dd6be6df0fdb1a5c91f4f46cd128158493c46984184ff84810c628fe3c1cf9e06f6480afc056d94dd05e8b5bed79fd5ed61d34461d2fa1012bc0d5e1ba23eb0a61f98e2dbf3378df799fd7f99e142a601f492a6bc7ed287e97d24245e95a58313cb9242e8fa6378527d2906d785e93dffb76d84790d6f66cb42830be9d76d1d92b2f667c8ffc2d3698120062454379e36480cfa0732f8a6a2c8ca97677ed11eacb5306151f6d19da2818e711048e04f3cff356da7e25de4baf46f1f86723df7a4a7591f389fb89021d4d67c9f05998cc73da7ca2058fd121a723e5d5238b2276a985bdd4ec0aada75c6a8fda9e48508f0332e963585c9cd232b85fd5ffd235073af581846edc982d900413864b56a821fe2ff1ddae7a5bb2c2cf4cb9a06f3b7089c5450bf5c6e5f7229285629160affc9cb14e14243f67831b7838756335501191bce00a4b780d7c08193d335218f2731f472c4e9c11e75aa7036bf82c75fea8432cf994b6c16b94c22dc8b864a377ee5cc109db5a88047214badbfcb5edba31511a4dd067db929bd4dc6899cb0b87637d2acdf18cd8160feda06eb20c49b9691c3d3946d123b01d81c418fa99da12b40962aee1b5d8df4a6eeb07a921474ae0e0d7f7cfc32815292f69986d3062686f3d99031a067fc11ecdf25fb5aec1834e38bb56e67f3ed9ae5f2b2a0e914be55c3369406e80975dc9a5981341ccdc47671e6b209cae5a792158e4c280c303d2daa1beba439f675a02994e252dd0d406385bfb33031eb7b3050cb30a672adca08c8650d963345e6a6dac3d290f5e72185215b87f5f50adac64bbfc10d8ab2715fa76ee524e293643e472d6ae01c3fd34d76734f6862548580658b2a555ba88187a78d191e451f267420096bddcc5f8b3689639a77e1ea6a288bba9476f93345dcb536de17739791e80789dbdb2ecde9ec85316a6a8af64f6725ed0cc7170a7199e0cdca3d27867eec5b529ae4fd9ad7b512f0d9c9116b240baa00aa04765d46ccebbb446830fb031fd711f1c52aee0e4df2113356468470fdc0c25ca8c0a6303c723bfd739c3a68ba25b474b9f624828b95da69daeac146a43f5ae9b6432ef85a6b5af50cf676ce878fce53c14caaed0e0fd96857cca7f229f3f05dcaebdd4bd9d23ccdcc53d5a4dd98e1d625e40dd30a5480af3b2df113469eee3a4412a7f72e9bbe21e509c12c9744feb7f9b6bdcf746156b4f5d61d4d079d713e6255458fb67940c296fe3236d4672e3286a24dbbf3fb79ea5202393825d8f0b1fbf800739ef232863f321a7a1bb0af6add835b9ed16d11cb6df36f6e92890ea63985dbfcceea9bac16ea37035635ebdc3f46a376be86bfbbe464fd723b23cf0ff2165b7906d72f095a265f4567c1a363435a652a5221588a8e808b0c678e8014a6966ad4a3f9710f53395c832f45a8494c7d6c9b317336447dd89e7f20fc888f59d88c19ff6b929aa2e5712d61c410d4c66a4bb910c38dab8bee15e38899aed5409cdb6eefb5255a59f261050ad4d275fb6cfef40f7840bb9342b900a87eba3cf0b7bbf82088d9030b3855bcb3714045043c751571d7b7d15295c0729d5cccfb1ec7b5b75c87f49443843b6786057d19bc6418895d8c898ff26763528fb98dd7aa0b3b5fc54b2664167bf93a3f17097ff00b466237d0877c9ca14fb3b8a01df91aaae95224e709721b4fbe6b4afca29f4af775d3e72341fd1410d75b7dcff4c1fdeece763c0704ecb9fb65e4239eb17701e7bc106d1ead904269f803565602d5700b903d110a76e54a14cf1990eb5b60e18ede5c1b1978c11da1c0ffd9cd9d31795ee6ea7eeb3c35d867623131a02dade54664cdd5625fc84e25b358a895abe97b7578b446b446a03666ea3a7df3000e83841d13ff315a0c3d5d70a4fd89d05d7c3006bea7332602a317eef26e7af7a44d2307b95d138d1817fe12b0b58ef24896b7801768194021547793fb85427484b0327d40908a2214fdc16ce26decf40fa3d9d6f637fc02cfb19eadb4db100497480a6ecac68700a7af44dd9fc24b07b2487be2c728db8e4f466579b6e5c16cfcdeac31a9b14867a975df953ea5abbdae0fce127be4988c07d42940b445e409817b8fa5d24535a47e43d8b6148ce0f7b061cbe767d63858948ae832d8a77bba51786eb84a546eab3e7a79f40e886344d321ffd5065d8eb9e2cd080e3ef809a7db764ebbb2af8db4bd05fdf71bd61c4d9ca83c92b5c22874ce6fc6a000603f12986f1776136abb572e60b60bf5cd94983dc59477601bd771eedb5ad67f0ee3ed6d318e4c30651e70f7cb973933ee7d28a28a7048473ebfbf2e5d1674fb74742f8b581412407901a89fd9d4d6c95b3b27dc018eba9974fea6d002a8930f932d2681c50c07eee4638d87ed8c0743c109df11c5271ba727caf0c998d1684e6cde229abcf3e5e5bb1efc36608e6265f9d743ed3a7b16fcb6f944be7467256b8440a6382488bb315cf5fd14f8e9ab740983aafb419cd2f2a4bf6ae09ffc15a36e201ad7f84afefab0c61827fc917380d9496cb2c0ad7b3a98620b7fa024df24ef974953ba86119295280395158f4aa546e99abb4c356fc49021e33c329556fab77da6f3547f78776891ae80783c7e431935201f9f7548ab35f57e74275b2da12cf68b8cf0bf4d23984cf203ef210a699a05d90204d186955a2d6030465573ec2c519a1baffe8dbdddac5e203f70fd4fce8035e2549a7e2b005a6d8d72e43712ed771177fb9b0e50b9c11b3c1a2d6453476b9b3bd878e12e6fb130e17e5ab5d377103d81dce50aa41979be7ffc9c396b2eab4c987a1607fb8b5b63ccb6ed82fdf0fa969fd0bad14d46e1e8b14ce5e5beb3e2b411584b7fbfa8ce80a73251935f3b35cd44af9a1cd29074075387d16bdcefd0ec47b69e7341a06489a97c2348eed47fbe8402c5703c73806f7405b5126edb38ab675ad334c957bb0dff01e231dbe9f2aa9033c57a44d5417f9ce193eaef13ac300eca3c71f1e92aa269c02e8219f7923c6b43cfb1261c9fa0e36e1ec3a90b8dd07fb237db174c561f94ff511a60e02cbd34d6c174bccf0ac57c89af02a150d670db1b938e3f9554ce34ac007cfeadc56fdf557af8a93f70fe3e04ea5845457ea609c0c76a592f03ba5675b443e8930984d819d6469b28e76931c59a53ae3cf73ff653992f87d857fbbbe57e9df7922c637131d4af9e973f0b79afaf66c26792f1600b4bdeb539c078374c9f66c44fe8804b4c42586bde6ada2917d004f81c3e03d995c282b15998f5411cda3d203cdc2b3f7220077ba1670308decd19684e511c410f917ca124183b1ae21e7f47ab8b10803765c51450a147f685e38145b805592ab9598198f0b37fff79e698e652b1fc4a336098a0f0a33ce9d6652f5a476c78a2a24e560fbcc4a4b3490e76d3530c1cffd44e87bd81033b8c64587d8aaa00573cc3c4725c8d59b863b9a9ebd6972fdf5c53aabcb55e1fa18fc64a36380d3904ecab434f2eb58c811a3f38133c260363911ee081cba446f71588a255a7fd76953ad90e28d3e56178a131b7ed64491bdb19ca5db3375fce7e2dec67fb38ad66bc29ae08c42eaf6f92db621a2a5d79bc754c7ee9df30c68636afd04fb05b4cccde34bc53151cf14964d318f64457521ecc98e07a797e8710126781a2fad73a3055b63e25aca4130c2639adab1439c3ba0a64285d43aa65779fb2d125fea3c408882ba62a0c804b2af33a655e96cdc87e1f478a3f5df6a74a14193cc5c9eedfd4a0f64174072b2b226131ac38bfd1790bcd138b0f62cb7a2cdeea19aaa690f7db1841a59a6ba50cfb1e1224954f64eb446d50f2e0750e52817320eefd3da36b685fe2fe4731c9e6d9c24912aaaa8b282b86c35dc8ff213ae11b3a0c7245241f13260e4d68237ad3f96c47c42403cc1e40b1057993e213491b5fc3d1c1da7a7f3d739aef1c0b72bc0582491ea5cb2774ad7b3d9f5d9a991b6159871f7ce7674b357cf58f5b927bf6368e129b042bde091a126de6d6a2d1cd6bd3e35ec26e859c887eab9746cdf7b601f6681140a07ac4956dc8e7480f6ae13f4b3a7769baeb732d51b534a7b4a145d840fb50138c493abd768cb2bef2d511adf4cf5c8efeb368988d925c4d02117725e6400dbab57b5a81abc59531fe84cc1b37dfe9a12b84cfb3fe8af05d20771bd7fee1a819a1fc2bb283e5f14db604f8b418fd308eff2b1acb468ffdc034b93f8893fd7712edccb54d7da353690c741f2b229ca05827251e7afdc21c21abe5fdd56d92e39e62c79dc56bfba59ac51feb1750d122822933a4e4b38c301cb9b2080062f3e0f78a673b2b314ba53fdafded796a82c0d2469314f87154a059331e255398729e2251b42b67d9ee2282cb99189bf940bb4b81abd113fe3358e6ba0f3f1486a5622ba2b19073769c09eeaf4fb533072155ec8cd2c9d46ae1ef712994d29d8cc3a132952b9aae51c17b7c78185dd04af66c16a5f979f00d0ca86b6e729494b18996edbe8295c88ca7d5d677111097364311f7a9989983bdfda8a3bcfa6333f7c61f780e78b3d3e0a71e944c21aae327dadce255c46ff060bd8e48c278da9066297590264d900f382c619d602602bf19d5fcd1b08a98407de3e473059baf295c2f8cf68f9263f5329a77a1f0b98258c72ffdc3b6f3e24e1e60a6596c0e4f77b2ccbc66b0936efc6af212df9d82bbf232648aa6bdb8b83e0c8ac4e38ad7a348fa69c45d1e0ee4c8537f43fafc6ffbb777b803f716d72525ed3dcb28e6458da3f0b1316b365dcd71e9e06ff35315df26af6d024b3377eaf4d6b8cd5f5600607fc65cc13e39702636c8aec99e6751a133b12fd00f45fd2fc903e4a4d451e6aa4fd091633292a0231707ea32799dee38a8f8c391c3ad326a8edfa511def604184a0d596a4aec2c2710f52efdc8123f1dac21bfdb439cc4e4ed683a3b7f98bb98b54e09bd501012414638f5302ff53225b4de7ff2b69e8b886361d8aa99057078aa36bbd8570ede77a0842342f13172529a5edb6021ac246167874ba22dc7fa5ea0ecfd75564efa977bb074907a8d18f3d27a5b629de011a04385ba2160090056d6b29069f82dfca104c5f04d6b937a6342fd89f9be76f235b30c61f119ec437aec135fc34cde7577c4c61e66c41c161b125a4e247e703533887f6eeb7f16b6220cb93abd950272d760e88c71766d9fe0f8a22a2f019095bc8f2b5c27d514276647275651b28bc0927f2802bc18318410962a9aeb37b4ef91ac0fce4a502fcef906eaaa11d51a68d6b864e8fdede9784c5f2cbb7c7b8355ac8d509b56adc23e1095724c4acacadd5c8119ec8d3244e94cb1f40623dcded626e2e44e6e5295ec11d1fe36dffa717708fe5cb793ca0f8696a0cf120c3f299432cb264d385e2b66f6b6cab1bd4c8c8edf0557ee9dc19a037432596e4cac08b4e693726cd3e24f15026a403df841ce882f3456989200db2d20df296faed4782779af698d64ed79bb1915557304b0503fb730b8d4ac8a9e98b125ad851a2a630a964c3aacc9bc0a8add8773c387ab7616e1660d34a0481b4deeb2bac7ff5013412f385409422ccac4e5cfccd32d04920f5d42670744afb54ebc0339337fa1bcc7f86f44c9ec66bf43165de12795b9aa9e0392bf7aad93b0c38226a15883a716a866b83fa532a72d1ee89f331fe4b7115580b414cbbdb04d07398c67ea738898e149c8dcde4e3208939f4781f937a196096d46d3f0144ee39c152dd619f3f9e78e3055fe14fde0912941762f35c32e1066df141ebb48fedad3716561d21f7df8b37eafe0bad341db2be5b64723884fdae2a3276d26056b9eea4c2ba93597bfc4868801f3850f103128e8d110801c1873168cf1952158c3fb7da5f0238185f64365788de81182e96fff9998d6d389c218127cc8023ba687cab75d5e4dffeab1f5d6448d7e6e3ff72d870432cf54cd91ed0dd85feb4b755857eb8adceb08280f8c9a2e668c7a3b540286a794300b462a0f2b1dc47a552221021e31cbecae51a176d93bb5b4805da9f82a2ef501e8efb8c0d4102d5f0deb2c90f841ccc9f914c2714987a749318b92753a06e65cedf44beeeb79000a72b5c122fdf496a59e8d3472b66d02b759a247af6d1e544dce398e67b837cb2cc22746560496af2554a4d3f5f4e8dc0a6ad33652cbc512c4f988563a67e32404526a9553f3e0862445ecb0d2bcf16013a83c762c91524bc6095db1d2493c76699a2436e9d874129940ad1bb68c8cc36a89f5603182cc3263f02714be2f4c997cd87d18ccb01436611d917722c6194cb2b3b5ca1d5607b16136aa3f256c353f6e9e8b6af153e912cae88528da0a4bfa927f28310c613b4b0df7873f525977ff48ca3e6f844834bd5030f2e5595238ebb8c03c011757c554cb62d25e9d34be050801ad7f38f82e7ddd591e9b98669089de447a9084d99d45918f1c61d30a279c7f0e7dcad2ef4cf09bae6f723680ce1ce67731f918365e3c4424285190ec9c4c0225593959c21b38cae17cf473567abbc368ffd4f69c332ac8db52f12720912192e7c18f972bab9c5878ab8a01f7a6f349fd4617daa4279001f07f49ec3de9d5445008a1b2de62ad98e46c7a70bde8f471101a4fe13cc4f855498460fa581525cd2f1a73c3b9690624327e330ec373e755d935df97db3d78941f61b48b8899d63003a3c520ad3a8d7ed47d17c008ea99448b9f764413ae014604df5baa8bdfbcec4298c2ec9b14d092ea999dddf9aed10605fcaeda6aaac11bb1d1b5c975e1941d700d9aa5c38b40577f65bc069de6d17f7eaf3126207ac03da948a2f877ce366fdd24fcabf6217c953fb6696ed5e92c5604debbbb599b2cab6bc557a33b05be73c6330721ce7218ca3aa4e1ccbabcf742bbee0628febcc4682d302126c47ff90bf0fc165ebca552a6730a3d0582fa1a2031fd72e7a3e75ed3de28d2ab64f8dee2ac946d24b3b283c9adbc3e95ddf46f655bfb9b3b39b519a1870b32db3e712e933506b16d3aab0c815ab063119ef08974c4de17f6363af1e51d69dfacbb53e698f156fba5f0f8e82080ef114f485f3788c4952eeb431f5793874c58b04638058f8bbebdca270fa0f4c7e3b0633b2142e5fd607fcff5610320734e7d2b55dc2b17908742a1eb470af3900f6b27e1777bedbea8cb497f4e5052954d5f2bc18404000d99cc5b5e2d4c03b1358668b035e579d0e12e87f1cdcd0d4b56734fb8f99de90f5c52ebb01b55c5f6118e399665c7decd623ec180b2e4399a25ad46913dd6f98aa4574a92e616fcab5b29a215a2bda21cdb47fdb3207bb70f5ed3e4d7e7089df358986e4b9ad868b43b099630ee59a63c5131ffcd7a8ba50a3336dc50c54e0c9956cc4c47104cbbeeac95a15987d95dff4d213664e458b30c2543babcbde78667faa1b497aac197b0f476150e2c23610aa8c85174253babb1bfa5a178f1c8244694276823acce2b092c3736abd06b410c93b818181b54d17676ef78a613e00bff7fae435e7e2bedfe64c557090c6a70c0601687449452e819c</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<link href="/css/hbe.style.css" rel="stylesheet" type="text/css"><script data-swup-reload-script type="module" src="/js/plugins/hbe.js"></script>
<script data-swup-reload-script type="module">
import {initHBE} from "/js/plugins/hbe.js";
  console.log("hexo-blog-encrypt: loaded.");
    initHBE();
</script>
]]></content>
      <categories>
        <category>Scientific Research</category>
      </categories>
  </entry>
  <entry>
    <title>制导飞镖结构设计</title>
    <url>/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="整体规划"><a href="#整体规划" class="headerlink" title="整体规划"></a>整体规划</h2><ol>
<li>第一代飞镖设计出整体气动外形，没有动力和舵面控制，利用摩擦轮无控制发射；</li>
<li>第二代飞镖加入动力系统和舵面控制姿态，通过IMU进行自稳控制；</li>
<li>第三代飞镖加入视觉识别，实现末端制导；</li>
</ol>
<h2 id="Profili2联合SolidWorks绘制翼型"><a href="#Profili2联合SolidWorks绘制翼型" class="headerlink" title="Profili2联合SolidWorks绘制翼型"></a>Profili2联合SolidWorks绘制翼型</h2><h3 id="Profili导入翼型"><a href="#Profili导入翼型" class="headerlink" title="Profili导入翼型"></a>Profili导入翼型</h3><p>进入profili2，选择第二个图标：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_1.png" class="" width="500">

<p>选择对应的参数，设置如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_2.png" class="" width="500">

<p>选择保存图像</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_3.png" class="" width="500">

<p>点击OK后，另存为dat文件到一个文件夹中。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_4.png" class="" width="500">

<p>用Excel打开，删去第一行，在第三列全添加0，将文件另存为<code>.txt</code></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_5.png" class="" width="500">

<p>在Soildworks中，选择<code>插入</code>，<code>曲线</code>中选择<code>通过XYZ点的曲线...</code></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_6.png" class="" width="500">

<p>选择<code>浏览</code>之后，需要更改文件类型才可以进行搜索到<code>.txt</code>文件；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_7.png" class="" width="500">

<p>最后通过在前视基准面中新建草图，将曲线转换为实体，便可以得到曲线图。</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>💡小技巧：制作三角翼的时候，只要在Excel的表格上x轴坐标加上对应的数字即可使得翼型在x轴上平移。</p>

  </div>

<h3 id="SolidWorks绘制飞行器"><a href="#SolidWorks绘制飞行器" class="headerlink" title="SolidWorks绘制飞行器"></a>SolidWorks绘制飞行器</h3><p>初步设计的参数：</p>
<ul>
<li>翼梢：30mm</li>
<li>翼根：210mm</li>
</ul>
<p>考虑强度的情况下，设计5根碳板厚度为1mm，翼肋间距为12+12+12+10+10mm。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_8.png" class="" width="200">

<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="39.214ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 17332.7 860"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(1243.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2299.1,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path></g><g data-mml-node="mi" transform="translate(3299.1,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4177.1,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(5055.1,0)"><path data-c="3B" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path></g><g data-mml-node="mtext" transform="translate(5499.8,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(5749.8,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(6993.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(8048.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><g data-mml-node="mi" transform="translate(9548.9,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(10426.9,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(11304.9,0)"><path data-c="3B" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path></g><g data-mml-node="mtext" transform="translate(11749.6,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(11999.6,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(13242.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(14298.7,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mi" transform="translate(15298.7,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(16176.7,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(17054.7,0)"><path data-c="3B" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path></g></g></g></svg></mjx-container></p>
<p>所以最大弦长为：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="22.546ex" height="1.846ex" role="img" focusable="false" viewBox="0 -666 9965.6 816"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(1187.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(2188,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(3375.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(4376,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(5653.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(6709.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><g data-mml-node="mi" transform="translate(8209.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9087.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></p>
<p>机翼主梁采用PLA打印（或者PLA+），中间部分连接两根1.5mm碳杆，碳杆在与碳板翼肋相连；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_9.png" class="" width="600">

<p>前缘翼梁采用1mm碳纤维板，在翼肋接口处铆合；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/27/%E5%88%B6%E5%AF%BC%E9%A3%9E%E9%95%96%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/fig_10.png" class="" width="600">

<p>碳板和碳板之间采用DP460碳纤维专用环氧树脂AB胶进行粘合；</p>
<p>翼肋之间通过高精度打印一些距离块来辅助安装；</p>
<p>使用航模蒙皮对机翼附膜，再与已经设计好的机身进行缝合，得到第一代的无动力测试飞镖；</p>
<h2 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h2><p>第二代飞镖采用IMU和stm32进行自稳控制，通过两个舵机控制舵面进行调整；</p>
<h3 id="IMU选型"><a href="#IMU选型" class="headerlink" title="IMU选型"></a>IMU选型</h3><p><a class="link" href="https://github.com/HNUYueLuRM/vision_tutorial">在了解CV和RoboMaster视觉组的文档中详细讲解了IMU（4.3节）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="控制原理"><a href="#控制原理" class="headerlink" title="控制原理"></a>控制原理</h2><h3 id="控制逻辑"><a href="#控制逻辑" class="headerlink" title="控制逻辑"></a>控制逻辑</h3><p>当飞镖发射出去之后，IMU测量到飞镖产生加速度，延时一定函数之后，启动电机旋转，同时控制舵机进行姿态调整；</p>
<p>姿态控制分为三个阶段：</p>
<ol>
<li>爬升到一定的高度；</li>
<li>平飞巡航；</li>
<li>对目标进行俯冲；</li>
</ol>
]]></content>
      <categories>
        <category>Robotics</category>
        <category>UAV</category>
      </categories>
  </entry>
  <entry>
    <title>卡尔曼滤波器</title>
    <url>/2023/08/15/%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2%E5%99%A8/</url>
    <content><![CDATA[<h2 id="为什么是卡尔曼滤波器"><a href="#为什么是卡尔曼滤波器" class="headerlink" title="为什么是卡尔曼滤波器"></a>为什么是卡尔曼滤波器</h2><p>卡尔曼滤波器在机器人控制中应用非常广泛，在RoboMaster中，卡尔曼滤波器是视觉自动瞄准不可或缺的一环。</p>
<p>对于一个机器人的状态估计，或者一个运动参数的测量，往往会有两种计算结果：</p>
<ul>
<li>通过理论计算的结果</li>
<li>通过传感器测量的结果</li>
</ul>
<p>但实际上这两种结果都不准确，理论公式的计算往往过于理想化，忽略了真实的物理场景存在的各种误差和噪声；而传感器的测量会受到各个环节的噪声的影响，最终的结果也会有误差。</p>
<p>卡尔曼滤波器（Kalman Filter）的核心思想就是既不相信理论计算，也不相信传感器测量，而是相信两者的加权值。</p>
<p>当然，卡尔曼滤波器用于对线性系统的状态估计，而对于非线性系统，可以用扩展卡尔曼滤波器（EKF），扩展卡尔曼滤波器在每一步对非线性函数进行线性化，将非线性系统近似为线性系统。这是通过计算函数在当前估计点的雅可比矩阵（Jacobian）来实现的。</p>
<h2 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h2><p>卡尔曼滤波器的第一个计算公式就是理论计算和实际测量的加权计算：</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a class="link" href="https://zhuanlan.zhihu.com/p/633067526">干货|卡尔曼滤波器到底该怎么使用（引出，推导，案例使用，代码实现）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>   </p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title>卷积</title>
    <url>/2023/05/18/%E5%8D%B7%E7%A7%AF/</url>
    <content><![CDATA[<h1 id="离散卷积"><a href="#离散卷积" class="headerlink" title="离散卷积"></a>离散卷积</h1><p>卷积这个运算其实蕴藏在生活中的所有的小细节中，我们可以先从 3b1b的讲解出发，了解一下卷积的数学图像和日常中的应用。</p>
<p><a class="link" href="https://youtu.be/KuXjwB4LzSA">But what is a convolution?<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="一些生活中的例子"><a href="#一些生活中的例子" class="headerlink" title="一些生活中的例子"></a>一些生活中的例子</h2><h3 id="投两个骰子"><a href="#投两个骰子" class="headerlink" title="投两个骰子"></a>投两个骰子</h3><p>假设我们丢出两个骰子，我们可以得到一个 6×6 的表格，表示两个骰子的点数和的概率分布，如下图所示。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_1.jpg" class="" width="600">

<p>我们很容易发现，相同点数和的组合，如 3+1、2+2、1+3，都排在同一条对角线上。</p>
<p>当然我们可以把第二组骰子翻转过来，同时将骰子的每一面的概率改为不均匀，我们可以找出一种新的方法去计算两骰子点数之和的办法，即每次对应一组相乘并相加，然后第二组骰子向右移动，继续相乘相加得到一种点数之和的概率，从2点数之和到点数之和为12。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_2.jpg" class="" width="600">

<p>每次对应一组并相加，然后第二组骰子向右移动，继续相乘相加得到一种点数之和的概率。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_3.jpg" class="" width="600">

<h3 id="竖式乘法"><a href="#竖式乘法" class="headerlink" title="竖式乘法"></a>竖式乘法</h3><p>在小学中，我们学过简单的竖式乘法，其实可以理解为对数位上的数字进行卷积运算。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_4.png" class="" width="600">

<p>可以想象，将其中一个数反转过来，利用上述的移位对应相乘，然后再相加的办法，最后进位，就可以得到同样的结果。</p>
<p>所以说，竖式乘法其实就是一种卷积运算。</p>
<h3 id="多项式乘法"><a href="#多项式乘法" class="headerlink" title="多项式乘法"></a>多项式乘法</h3><p>当对两个多项式乘法的时候，其实也可以视作为一种卷积的运算：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="60.923ex" height="2.583ex" role="img" focusable="false" viewBox="0 -891.7 26927.9 1141.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(1111.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(2111.4,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(2611.4,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3405.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(4405.9,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g><g data-mml-node="msup" transform="translate(4905.9,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(5914.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6303.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(6692.4,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(7414.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(8414.9,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(8914.9,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(9709.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(10709.3,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g><g data-mml-node="msup" transform="translate(11209.3,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(12217.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(12884.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(13940.4,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(14662.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(15662.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(500,0)"></path></g><g data-mml-node="mi" transform="translate(16662.9,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(17457.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(18457.3,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="msup" transform="translate(19457.3,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(20688.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(21688.3,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(500,0)"></path></g><g data-mml-node="msup" transform="translate(22688.3,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(23919.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(24919.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g><g data-mml-node="msup" transform="translate(25919.3,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,413) scale(0.707)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g></g></g></g></svg></mjx-container></p>
<p>其实等同于将数组<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.166ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3167.3 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(1333.7,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(1833.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(2278.3,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g><g data-mml-node="mo" transform="translate(2778.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>和<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.166ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3167.3 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(1333.7,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mo" transform="translate(1833.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(2278.3,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g><g data-mml-node="mo" transform="translate(2778.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>进行卷积运算，得到的结果就是多项式的系数。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_5.png" class="" width="600">

<h3 id="离散滑动平均值"><a href="#离散滑动平均值" class="headerlink" title="离散滑动平均值"></a>离散滑动平均值</h3><p>将一个长数组和一个短数组进行卷积运算，我们可以看到得到的结果是一个更加平滑的长数组。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_6.png" class="" width="600">

<p>可以增加短数组的中间值，类似于增加一个权重。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_7.png" class="" width="600">

<p>两者都可以得到原始数据的平滑版本。</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>这里的卷积很像是在函数的某一个点上的函数值平均了附近周围的函数值，类似于对一个评分系统进行加权平均，使得其更加合理。</p>

  </div>

<h3 id="图像处理"><a href="#图像处理" class="headerlink" title="图像处理"></a>图像处理</h3><p>我们对一张图片和一个矩阵进行卷积，用二维的高斯函数作为矩阵的值，可以得到一张图片的高斯模糊版本，打码的效果就是这样实现的。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_8.png" class="" width="600">

<p>仔细看可以知道新图的每一个像素点都融入了高斯矩阵所包含周围像素的颜色捏合在一起，从而变得很模糊。</p>
<p>同样如果使用不同的矩阵，卷积得到的结果也大相径庭，例如边缘检测，图像锐化等。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_9.png" class="" width="600">

<img lazyload="" src="/images/loading.svg" data-src="/2023/05/18/%E5%8D%B7%E7%A7%AF/fig_10.png" class="" width="600">


  <div class="note-large blue">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <p>💡关于卷积神经网络</p>

    </div>
    <div class="notel-content">
      <p>图像处理中用于卷积原始图片的矩阵通常叫<strong>核 Kernel</strong>，卷积神经网络的思路就是用数据集算出应该选取什么样的核来对图像进行卷积，来满足神经网络所检测的目标。</p>

    </div>
  </div>

<h2 id="离散卷积的定义"><a href="#离散卷积的定义" class="headerlink" title="离散卷积的定义"></a>离散卷积的定义</h2><p>显然，我们把两个离散函数中的一个反转过来，然后对应相乘，再相加，然后再移位，继续相乘相加，这样就是离散卷积：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.864ex;" xmlns="http://www.w3.org/2000/svg" width="36.616ex" height="6.399ex" role="img" focusable="false" viewBox="0 -1562.5 16184.4 2828.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(490,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(768,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1368,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mo" transform="translate(1923.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2979.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(3551.6,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(3829.6,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(4429.6,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mo" transform="translate(4929.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="mi" transform="translate(5652,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(6228,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(6506,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(7106,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mo" transform="translate(7661.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="munderover" transform="translate(8717.6,0)"><g data-mml-node="mo" transform="translate(365.9,0)"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(0,-1107.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1299,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(2077,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(734.3,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"></path></g></g></g><g data-mml-node="mi" transform="translate(11060,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(11632,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(11910,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(12431,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mi" transform="translate(12709,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(13285,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(13563,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(14385.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(15385.4,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(15906.4,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container></p>
<h3 id="信号与系统"><a href="#信号与系统" class="headerlink" title="信号与系统"></a>信号与系统</h3><p>在信号与系统中，一个离散系统的输出函数就可以表示为输入函数与冲激响应的卷积。</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>冲激响应指的是系统对冲激信号的响应。</p>

  </div>

<h1 id="连续卷积"><a href="#连续卷积" class="headerlink" title="连续卷积"></a>连续卷积</h1><h2 id="形象理解"><a href="#形象理解" class="headerlink" title="形象理解"></a>形象理解</h2><p>连续和离散的卷积其实原理是相同的，在离散的情况下，求和变为积分，古月居通过一些形象的描述，可以很好理解连续函数下的积分是怎么样的。</p>
<p><a class="link" href="https://mp.weixin.qq.com/s/cZUdlh79xhgqN2aY5Vto3A">“卷积”的形象理解<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="连续卷积的定义"><a href="#连续卷积的定义" class="headerlink" title="连续卷积的定义"></a>连续卷积的定义</h2><p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.159ex;" xmlns="http://www.w3.org/2000/svg" width="25.755ex" height="5.328ex" role="img" focusable="false" viewBox="0 -1400.6 11383.9 2354.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(490,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(879,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(1240,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(1906.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msubsup" transform="translate(2962.6,0)"><g data-mml-node="mo" transform="translate(0 1)"><path data-c="222B" d="M114 -798Q132 -824 165 -824H167Q195 -824 223 -764T275 -600T320 -391T362 -164Q365 -143 367 -133Q439 292 523 655T645 1127Q651 1145 655 1157T672 1201T699 1257T733 1306T777 1346T828 1360Q884 1360 912 1325T944 1245Q944 1220 932 1205T909 1186T887 1183Q866 1183 849 1198T832 1239Q832 1287 885 1296L882 1300Q879 1303 874 1307T866 1313Q851 1323 833 1323Q819 1323 807 1311T775 1255T736 1139T689 936T633 628Q574 293 510 -5T410 -437T355 -629Q278 -862 165 -862Q125 -862 92 -831T55 -746Q55 -711 74 -698T112 -685Q133 -685 150 -700T167 -741Q167 -789 114 -798Z"></path></g><g data-mml-node="TeXAtom" transform="translate(1046.4,1088.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(589,-896.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(778,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"></path></g></g></g><g data-mml-node="mi" transform="translate(5025.5,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(5597.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5986.5,0)"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g><g data-mml-node="mo" transform="translate(6503.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(6892.5,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(7468.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7857.5,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(8440.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(9440.9,0)"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g><g data-mml-node="mo" transform="translate(9957.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(10346.9,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(10866.9,0)"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g></g></g></svg></mjx-container></p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>可以通过想象在消化食物这个卷积例子中，进食函数和消化函数的卷积动画过程，来帮助记忆卷积的公式。</p>

  </div>


<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a class="link" href="https://youtu.be/KuXjwB4LzSA">But what is a convolution?<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://mp.weixin.qq.com/s/cZUdlh79xhgqN2aY5Vto3A">“卷积”的形象理解<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Mathematics</category>
      </categories>
  </entry>
  <entry>
    <title>智能家居门禁系统</title>
    <url>/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<h2 id="门禁系统v1-0"><a href="#门禁系统v1-0" class="headerlink" title="门禁系统v1.0"></a>门禁系统v1.0</h2><h3 id="研发需求"><a href="#研发需求" class="headerlink" title="研发需求"></a>研发需求</h3><p>当我一个人在宿舍的时候，很容易把钥匙放在自己的位置上忘记拿出来，然后就导致被锁在外面。同时携带钥匙出门也会很不方便，所以如果能够实现指纹、人脸、nfc等身份信息来直接进行验证，就可以不用携带钥匙出门或者被锁在外面了。</p>
<h3 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h3><p>v1.0主要考虑简单易用和成本低廉，因此只采用指纹和nfc两种方式进行验证，采用esp32作为主板开发，后续可以添加人脸识别等功能，远程开门等功能。</p>
<ul>
<li>NFC模块采用<a class="link"   href="https://detail.tmall.com/item.htm?_u=33hgjd523174&id=41286608549&spm=a1z09.2.0.0.3c6b2e8dTXqeeb" >RC522模块<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，使用SPI通信，可以利用<code>MFRC522.h</code>进行开发；</li>
<li>指纹模块采用<a class="link"   href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.3c6b2e8dTXqeeb&id=561808592573&_u=33hgjd5212e9" >AS608光学指纹传感器<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，使用串口通信，具体通信协议可以查看其开发手册。</li>
<li>采用<a class="link"   href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.3c6b2e8dTXqeeb&id=672120084915&_u=33hgjd522c61" >ESP32<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>作为主板，方便后续添加wifi或蓝牙模块进行升级；</li>
<li>执行机构采用一个9克的<a class="link"   href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.3c6b2e8dTXqeeb&id=657320114220&_u=33hgjd52c885" >金属舵机<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，保证拉力足够；</li>
</ul>
<p>接线图如下：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_1.png"
                      class="" width="500"
                >

<p>左边对应的是ESP32的GPIO，右边为三个硬件模块；</p>
<h3 id="机械设计"><a href="#机械设计" class="headerlink" title="机械设计"></a>机械设计</h3><p>采用3D打印机打印一个外壳，外壳的设计如下：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_2.png"
                      class="" width="600"
                >

<ul>
<li>外壳分为两部分，上层放置NFC和指纹传感器，上下层中间夹着ESP32，通过usb线和延长的pwn线连接到门后的电源和舵机；</li>
<li>上下层之间的连接和NFC模块与上层打印件的连接采用M3的铜柱和螺丝连接，方便拆卸；</li>
<li>整个模块通过热熔胶固定在门上；</li>
</ul>
<p>实物图：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_3.jpg"
                      class="" width="500"
                >

<h3 id="软件设计"><a href="#软件设计" class="headerlink" title="软件设计"></a>软件设计</h3><h4 id="看门狗设计优化"><a href="#看门狗设计优化" class="headerlink" title="看门狗设计优化"></a>看门狗设计优化</h4><p>Esp32主要有两种看门狗：</p>
<ul>
<li>中断看门狗<ul>
<li>中断看门狗主要用于确保系统中断不会运行太长时间。如果一个中断例程运行时间过长，可能会导致系统其他部分不能及时响应，进而可能导致系统不稳定或崩溃。这种类型的看门狗通常用于更底层、与硬件紧密相关的场景。</li>
</ul>
</li>
<li>任务看门狗<ul>
<li>任务看门狗主要用于监视操作系统级的任务（Task）。如果一个任务消耗的 CPU 时间过多，或者因某种原因陷入死循环，任务看门狗可以重置该任务或整个系统，确保系统的稳定运行。这更多地应用于应用层，确保长时间运行的任务不会冻结或占用过多资源。</li>
</ul>
</li>
</ul>
<p>在程序中有很多延时函数容易导致阻塞和卡死。这里使用任务看门狗来防止阻塞的发生。</p>
<p>头文件：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;esp_task_wdt.h&gt;</span></span></span><br></pre></td></tr></table></figure></div>
<p>在<code>setup()</code>函数中初始化任务看门狗:</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 其他初始化代码</span></span><br><span class="line"></span><br><span class="line">    esp_task_wdt_init(<span class="number">2</span>, <span class="literal">true</span>); <span class="comment">// 设置任务看门狗的超时时间为2秒，并使能看门狗</span></span><br><span class="line">    esp_task_wdt_add(<span class="literal">NULL</span>); <span class="comment">// 将loop()添加到任务看门狗的监控列表中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>在<code>loop()</code>函数的末尾重置任务看门狗的计时器</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 你的代码</span></span><br><span class="line"></span><br><span class="line">    esp_task_wdt_reset(); <span class="comment">// 重置任务看门狗的计时器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="遇到的一些问题"><a href="#遇到的一些问题" class="headerlink" title="遇到的一些问题"></a>遇到的一些问题</h4><ul>
<li>通过串口<code>Serial1.write()</code>发送指令包之后，需要延时<code>delay()</code>等传感器返回数据，然后再通过<code>if (Serial1.available())</code>来判断是否读取到数据，如果没有延时，会读不到数据；至于延时函数的大小，则可以通过测试或者查看串口调试助手的时间戳来确定；</li>
<li>在串口通讯中，通常2个16进制数(0x1A)代表1个字节(bytes)，例如2 bytes则代表输入4位16进制数指令。</li>
<li>门锁使用一段时间之后会卡死无法响应，reset单片机可以解决，因此需要通过软件看门狗来解决这个问题；</li>
</ul>
<h4 id="总体设计代码"><a href="#总体设计代码" class="headerlink" title="总体设计代码"></a>总体设计代码</h4><div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP32Servo.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;SPI.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;MFRC522.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIN_25 25</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIN_33 33</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIN_13 13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SS_PIN 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RST_PIN 12</span></span><br><span class="line"></span><br><span class="line">MFRC522 <span class="title function_">rfid</span><span class="params">(SS_PIN, RST_PIN)</span>;</span><br><span class="line"></span><br><span class="line">Servo servo1; <span class="comment">//定义servo对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// SG90舵机的参数</span></span><br><span class="line"><span class="type">int</span> minUs = <span class="number">500</span>; <span class="comment">//0度时脉宽，us</span></span><br><span class="line"><span class="type">int</span> maxUs = <span class="number">2400</span>; <span class="comment">//180度时的脉宽，us</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> servo1Pin = <span class="number">22</span>; <span class="comment">//对应esp32上的pin22，输出pwm</span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> PS_GetImage[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x03</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x05</span>&#125;; <span class="comment">// PS_GetImage指令包: EF01 FFFFFFFF 01 0003 01 0005</span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> PS_GenChar[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x04</span>, <span class="number">0x02</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x08</span>&#125;; <span class="comment">// PS_GenChar指令包: EF01 FFFFFFFF 01 0004 02 01 0008</span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> PS_Search[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x04</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x50</span>, <span class="number">0x00</span>, <span class="number">0x0A</span>, <span class="number">0x00</span>, <span class="number">0x68</span>&#125;; <span class="comment">// PS_Search指令包: EF01 FFFFFFFF 01 0008 04 01 0050 000A 0068</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  ESP32PWM::allocateTimer(<span class="number">0</span>); <span class="comment">//分配一个定时器0</span></span><br><span class="line"></span><br><span class="line">  servo1.setPeriodHertz(<span class="number">50</span>); <span class="comment">// 设置舵机PWM频率为50Hz</span></span><br><span class="line"></span><br><span class="line">  servo1.attach(servo1Pin, minUs, maxUs); <span class="comment">// 将舵机与引脚对应</span></span><br><span class="line"></span><br><span class="line">  pinMode(LED_PIN, OUTPUT);</span><br><span class="line">  digitalWrite(LED_PIN, LOW);</span><br><span class="line"></span><br><span class="line">  pinMode(PIN_25, OUTPUT);</span><br><span class="line">  digitalWrite(PIN_25, HIGH); <span class="comment">// 25输出3.3V到传感器上</span></span><br><span class="line"></span><br><span class="line">  pinMode(PIN_13, OUTPUT);</span><br><span class="line">  digitalWrite(PIN_13, HIGH); <span class="comment">// 13输出3.3V到传感器上</span></span><br><span class="line"></span><br><span class="line">  pinMode(PIN_33, INPUT); <span class="comment">// 设置引脚33为输入模式</span></span><br><span class="line"></span><br><span class="line">  Serial1.begin(<span class="number">57600</span>, SERIAL_8N1, <span class="number">26</span>, <span class="number">27</span>); <span class="comment">// 初始化Serial1</span></span><br><span class="line"></span><br><span class="line">  SPI.begin(); <span class="comment">// 初始化SPI接口</span></span><br><span class="line"></span><br><span class="line">  rfid.PCD_Init(); <span class="comment">// 初始化RFID模块</span></span><br><span class="line"></span><br><span class="line">  rfid.PCD_SetAntennaGain(rfid.RxGain_max); <span class="comment">// 设置天线增益</span></span><br><span class="line"></span><br><span class="line">  esp_task_wdt_init(<span class="number">5</span>, <span class="literal">true</span>); <span class="comment">// 设置任务看门狗的超时时间为5s，并使能看门狗</span></span><br><span class="line">  esp_task_wdt_add(<span class="literal">NULL</span>); <span class="comment">// 将loop()添加到任务看门狗的监控列表中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isTargetUID</span><span class="params">(byte *uid)</span> &#123;</span><br><span class="line">  <span class="type">const</span> byte targetUID1[] = &#123;<span class="number">0x7A</span>, <span class="number">0x14</span>, <span class="number">0x86</span>, <span class="number">0x4E</span>&#125;; <span class="comment">// 洪汶熙的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID2[] = &#123;<span class="number">0x09</span>, <span class="number">0xAB</span>, <span class="number">0x0D</span>, <span class="number">0x64</span>&#125;; <span class="comment">// 张殷华的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID3[] = &#123;<span class="number">0xCA</span>, <span class="number">0x55</span>, <span class="number">0x88</span>, <span class="number">0xE5</span>&#125;; <span class="comment">// 徐昌洲的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID4[] = &#123;<span class="number">0xCA</span>, <span class="number">0x8B</span>, <span class="number">0x90</span>, <span class="number">0x7F</span>&#125;; <span class="comment">// 毛逸先的校卡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (byte i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(targetUID1); i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (uid[i] != targetUID1[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID2[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID3[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID4[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  digitalWrite(LED_PIN, LOW); <span class="comment">// 确保LED初始状态为熄灭</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (digitalRead(PIN_33) == HIGH) <span class="comment">// 如果引脚33为高电平</span></span><br><span class="line">  &#123;</span><br><span class="line">    Serial1.write(PS_GetImage, <span class="keyword">sizeof</span>(PS_GetImage));  <span class="comment">// 向传感器发送指令包</span></span><br><span class="line"></span><br><span class="line">    delay(<span class="number">300</span>); <span class="comment">// 延时30ms，等待传感器返回数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Serial1.available()) <span class="comment">// 判断串口是否读取到指令包</span></span><br><span class="line">    &#123;</span><br><span class="line">      String receiveData_1 = Serial1.readString(); <span class="comment">// 读取并存储串口数据</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (receiveData_1[<span class="number">9</span>] == <span class="number">0x00</span>) <span class="comment">// 检查确认码是否为0x00</span></span><br><span class="line">      &#123;</span><br><span class="line">        Serial1.write(PS_GenChar, <span class="keyword">sizeof</span>(PS_GenChar));</span><br><span class="line"></span><br><span class="line">        delay(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Serial1.available())</span><br><span class="line">        &#123;</span><br><span class="line">          String receiveData_2 = Serial1.readString(); <span class="comment">// 读取并存储串口数据</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (receiveData_2[<span class="number">9</span>] == <span class="number">0x00</span>) <span class="comment">// 检查确认码是否为0x00</span></span><br><span class="line">          &#123;</span><br><span class="line">            Serial1.write(PS_Search, <span class="keyword">sizeof</span>(PS_Search));</span><br><span class="line"></span><br><span class="line">            delay(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Serial1.available())</span><br><span class="line">            &#123;</span><br><span class="line">              String receiveData_3 = Serial1.readString();</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span> (receiveData_3[<span class="number">9</span>] == <span class="number">0x00</span>)</span><br><span class="line">              &#123;</span><br><span class="line">                digitalWrite(LED_PIN, HIGH); <span class="comment">// 点亮LED</span></span><br><span class="line">                servo1.write(<span class="number">60</span>); <span class="comment">// 执行开门操作</span></span><br><span class="line">                delay(<span class="number">1000</span>);</span><br><span class="line">                servo1.write(<span class="number">180</span>); </span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!rfid.PICC_IsNewCardPresent() || !rfid.PICC_ReadCardSerial()) &#123;</span><br><span class="line">    delay(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查是否为目标UID</span></span><br><span class="line">  <span class="keyword">if</span> (isTargetUID(rfid.uid.uidByte)) &#123;</span><br><span class="line">  digitalWrite(LED_PIN, HIGH); <span class="comment">// 点亮LED</span></span><br><span class="line"></span><br><span class="line">  servo1.write(<span class="number">60</span>); <span class="comment">// 执行开门操作</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">  servo1.write(<span class="number">180</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  rfid.PICC_HaltA();</span><br><span class="line">  rfid.PCD_StopCrypto1();</span><br><span class="line"></span><br><span class="line">  esp_task_wdt_reset(); <span class="comment">// 重置任务看门狗的计时器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="门禁系统v2-0"><a href="#门禁系统v2-0" class="headerlink" title="门禁系统v2.0"></a>门禁系统v2.0</h2><p>由于已经不在宿舍住，V2.0改为卧室门锁，方便离开后锁门和解锁，保留NFC+指纹开门，同时在室内采用手扫上锁以及红外远程上锁解锁，同时采用7.4V的电池供电，红外遥控器通过工位上的USB HUB供电。</p>
<h3 id="问题总结-amp-硬件设计"><a href="#问题总结-amp-硬件设计" class="headerlink" title="问题总结&amp;硬件设计"></a>问题总结&amp;硬件设计</h3><p>第一代指纹传感器响应速度过慢，第二代将其替换为响应速度更快的指纹识别模块，并且有更小的体积，更便宜的价格。</p>
<p>保留NFC+指纹开门，同时加入室内开门机制，采用遥控器+人体识别开门，方便在工位的时候开门，同时也可以在室内手动上锁，方便出门上锁。</p>
<p>遥控器采用简单的红外遥控器即可，截取红外信号，然后自制一个开关放在工位上。</p>
<p>舵机采用经典的MG996R，不用小舵机，方便设计舵盘和复杂的机构，为了减少开发板的负担，舵机和开发板都在5V稳压模块上取电，指纹模块和RFID在开发板上取电。</p>
<h4 id="HLK-FPM383F-电容式指纹传感器"><a href="#HLK-FPM383F-电容式指纹传感器" class="headerlink" title="HLK-FPM383F 电容式指纹传感器"></a>HLK-FPM383F 电容式指纹传感器</h4><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_4.png"
                      class="" width="500"
                >

<p>由于指纹模块的Rx端上拉电阻，而Tx端没有，因此单片机的Rx端需要上拉一个10K电阻到3V3引脚处，以保证通信正常。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_5.png"
                      class="" width="500"
                >

<p>UART默认波特率为57600，帧格式为8位数据位，2位停止位，无校验位；</p>
<p>指纹模块上电或者复位后需要一定时间初始化，根据手册，添加180ms的延时函数。</p>
<ul>
<li>单片机上引脚定义：<strong>26作为TX连接黑色，27作为RX连接黄色</strong>，引脚25作为输入连接<code>TOUCH</code>，引脚33输出3V3作为<code>VCC</code>；</li>
<li>指纹模块引脚定义：黄色线为<code>Tx</code>，黑色线为<code>Rx</code>，绿色线为<code>VCC</code>，白色线为<code>TOUCH_VCC</code>，蓝色线为<code>TOUCH</code>，红色线为<code>GND</code>；</li>
</ul>
<p>接线如下：</p>
<table>
<thead>
<tr>
<th align="center">HLK-FPM383F</th>
<th align="center">ESP32</th>
</tr>
</thead>
<tbody><tr>
<td align="center">TOUCH_VCC</td>
<td align="center">33</td>
</tr>
<tr>
<td align="center">TOUCH_OUT</td>
<td align="center">25</td>
</tr>
<tr>
<td align="center">VCC</td>
<td align="center">33</td>
</tr>
<tr>
<td align="center">TX</td>
<td align="center">27</td>
</tr>
<tr>
<td align="center">RX</td>
<td align="center">26</td>
</tr>
<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
</tbody></table>
<p>关于休眠指令的触发，发送休眠指令<code>PS_Sleep</code>使得指纹模块进入休眠，<code>TOUCH</code>输出低电平，其触发条件如下：</p>
<ul>
<li>VCC为低电平，不能响应休眠，VCC检测到上升沿后，指纹模块激活；</li>
<li><code>TOUCH</code>上拉或下拉电阻，都会激活指纹模块；</li>
<li>重新烧录代码，引脚刷新，指纹模块激活；</li>
</ul>

  <div class="note p-4 mb-4 rounded-small yellow">
    <p>在计算校验和的时候，要注意是<strong>字节</strong>之和，而不是按照协议的分类，例如ID号是FFFF，应该算0xFF+0xFF，而不是直接用0xFFFF去算。算校验和的时候先把16进制全部转化为10进制，加起来再转换为16进制，多算几遍确保无误；</p>

  </div>

<p><a class="link"   href="https://www.sojson.com/hexconvert/10to16.html" >进制转换工具<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>使用特定的上位机录入指纹较方便；</p>
<p>先用串口调试工具测试，再写代码！</p>
<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_6.png"
                      class="" width="200"
                >
        主控唤醒指纹模块流程
    </div>
    <div style="flex: 50%; padding: 5px;">
        <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_7.png"
                      class="" width="250"
                >
        自动验证指纹流程
    </div>
</div>

<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VCC 33   <span class="comment">// 指纹模组电源</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TOUCH 25 <span class="comment">// 手指检测引脚</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">uint8_t</span> PS_AutoIdentify[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x32</span>, <span class="number">0x03</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x00</span>, <span class="number">0x07</span>, <span class="number">0x02</span>, <span class="number">0x43</span>&#125;;</span><br><span class="line"><span class="comment">// EF 01 FF FF FF FF 01 00 08 32 03 FF FF 00 07 02 43</span></span><br><span class="line"><span class="type">const</span> <span class="type">uint8_t</span> PS_Sleep[] = &#123;<span class="number">0xEF</span>, <span class="number">0x01</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x03</span>, <span class="number">0x33</span>, <span class="number">0x00</span>, <span class="number">0x37</span>&#125;;</span><br><span class="line"><span class="comment">// EF 01 FF FF FF FF 01 00 03 33 00 37</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial1.begin(<span class="number">57600</span>, SERIAL_8N2, <span class="number">27</span>, <span class="number">26</span>);</span><br><span class="line">  Serial.begin(<span class="number">57600</span>, SERIAL_8N2); <span class="comment">// 用于电脑端检查</span></span><br><span class="line"></span><br><span class="line">  pinMode(VCC, OUTPUT);</span><br><span class="line">  pinMode(LED_PIN, OUTPUT);</span><br><span class="line"></span><br><span class="line">  pinMode(TOUCH, INPUT);</span><br><span class="line"></span><br><span class="line">  pinMode(<span class="number">27</span>, INPUT_PULLUP); <span class="comment">// RX引脚上拉电阻</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(LED_PIN, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (digitalRead(TOUCH) == HIGH) </span><br><span class="line">  &#123;</span><br><span class="line">    digitalWrite(VCC, HIGH); <span class="comment">// 指纹模块VCC上电</span></span><br><span class="line">    delay(<span class="number">180</span>); <span class="comment">// 上电初始化</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (Serial1.available()) <span class="comment">// 清空休眠和开机的数据缓存</span></span><br><span class="line">    &#123;</span><br><span class="line">      Serial1.read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Serial1.write(PS_AutoIdentify, <span class="keyword">sizeof</span>(PS_AutoIdentify)); <span class="comment">// 发送自动识别指令</span></span><br><span class="line">    delay(<span class="number">800</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Serial1.available())</span><br><span class="line">    &#123;</span><br><span class="line">      String receiveData_1 = Serial1.readString(); <span class="comment">// 读取第一个应答包</span></span><br><span class="line">      </span><br><span class="line">      Serial.print(receiveData_1); <span class="comment">// 打印字符的十六进制值</span></span><br><span class="line">      Serial.print(<span class="string">&quot; &quot;</span>); <span class="comment">// 打印空格</span></span><br><span class="line">      Serial.println();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (receiveData_1.length() &gt;= <span class="number">10</span> &amp;&amp; receiveData_1[<span class="number">9</span>] == <span class="number">0x00</span>) <span class="comment">// 验证第一个应答包</span></span><br><span class="line">      &#123;</span><br><span class="line">        digitalWrite(LED_PIN, HIGH);</span><br><span class="line">        delay(<span class="number">1000</span>);</span><br><span class="line">        digitalWrite(LED_PIN, LOW);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Serial1.write(PS_Sleep, <span class="keyword">sizeof</span>(PS_Sleep)); <span class="comment">// 指纹模块休眠</span></span><br><span class="line"></span><br><span class="line">    delay(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    digitalWrite(VCC, LOW); <span class="comment">// 指纹模块VCC下电</span></span><br><span class="line">  &#125;</span><br><span class="line">  delay(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="RFID-RC522-射频感应模块"><a href="#RFID-RC522-射频感应模块" class="headerlink" title="RFID-RC522 射频感应模块"></a>RFID-RC522 射频感应模块</h4><p>需要安装库依赖，打开根目录下的<code>platformio.ini</code>文件，添加如下内容：</p>
<div class="code-container" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[env:esp32dev]</span></span><br><span class="line"><span class="attr">platform</span> = espressif32</span><br><span class="line"><span class="attr">board</span> = esp32dev</span><br><span class="line"><span class="attr">framework</span> = ardui<span class="literal">no</span></span><br><span class="line"><span class="attr">lib_deps</span> = MFRC522</span><br></pre></td></tr></table></figure></div>

<p>接线如下：</p>
<table>
<thead>
<tr>
<th align="center">RFID-RC522</th>
<th align="center">ESP32</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SDA</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">SCK</td>
<td align="center">18</td>
</tr>
<tr>
<td align="center">MOSI</td>
<td align="center">23</td>
</tr>
<tr>
<td align="center">MISO</td>
<td align="center">19</td>
</tr>
<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
<tr>
<td align="center">RST</td>
<td align="center">12</td>
</tr>
<tr>
<td align="center">3V3</td>
<td align="center">13</td>
</tr>
</tbody></table>
<p>为了方便使用校园卡中的NFC身份信息来做验证，因此先通过一个程序读取并且打印所有NFC卡的UID，然后再将其写在门锁的程序中：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;SPI.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;MFRC522.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIN_13 13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SS_PIN 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RST_PIN 12</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"></span><br><span class="line">MFRC522 <span class="title function_">rfid</span><span class="params">(SS_PIN, RST_PIN)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line"></span><br><span class="line">  pinMode(LED_PIN, OUTPUT);</span><br><span class="line">  digitalWrite(LED_PIN, LOW);</span><br><span class="line"></span><br><span class="line">  pinMode(PIN_13, OUTPUT);</span><br><span class="line">  digitalWrite(PIN_13, HIGH); <span class="comment">// 13输出3.3V到传感器上</span></span><br><span class="line"></span><br><span class="line">  SPI.begin(); <span class="comment">// 初始化SPI接口</span></span><br><span class="line"></span><br><span class="line">  rfid.PCD_Init(); <span class="comment">// 初始化RFID模块</span></span><br><span class="line"></span><br><span class="line">  rfid.PCD_SetAntennaGain(rfid.RxGain_max); <span class="comment">// 设置天线增益</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!rfid.PICC_IsNewCardPresent() || !rfid.PICC_ReadCardSerial()) &#123;</span><br><span class="line">    delay(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 点亮LED</span></span><br><span class="line">  digitalWrite(LED_PIN, HIGH); <span class="comment">// 点亮LED</span></span><br><span class="line">  <span class="comment">// 打印卡片UID</span></span><br><span class="line">  Serial.print(<span class="string">&quot;Card UID: &quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (byte i = <span class="number">0</span>; i &lt; rfid.uid.size; i++) &#123;</span><br><span class="line">    Serial.print(rfid.uid.uidByte[i] &lt; <span class="number">0x10</span> ? <span class="string">&quot; 0&quot;</span> : <span class="string">&quot; &quot;</span>);</span><br><span class="line">    Serial.print(rfid.uid.uidByte[i], HEX);</span><br><span class="line">  &#125;</span><br><span class="line">  Serial.println();</span><br><span class="line"></span><br><span class="line">  rfid.PICC_HaltA();</span><br><span class="line">  rfid.PCD_StopCrypto1();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>测试程序：</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;SPI.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;MFRC522.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIN_13 13 <span class="comment">// RFID输入3.3V</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SS_PIN 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RST_PIN 12</span></span><br><span class="line"></span><br><span class="line">MFRC522 <span class="title function_">rfid</span><span class="params">(SS_PIN, RST_PIN)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  pinMode(LED_PIN, OUTPUT);</span><br><span class="line">  digitalWrite(LED_PIN, LOW);</span><br><span class="line"></span><br><span class="line">  pinMode(PIN_13, OUTPUT); <span class="comment">// RFID输入3.3V</span></span><br><span class="line">  digitalWrite(PIN_13, HIGH);</span><br><span class="line"></span><br><span class="line">  SPI.begin(); <span class="comment">// 初始化SPI接口</span></span><br><span class="line">  rfid.PCD_Init(); <span class="comment">// 初始化RFID模块</span></span><br><span class="line">  rfid.PCD_SetAntennaGain(rfid.RxGain_max); <span class="comment">// 设置天线增益</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isTargetUID</span><span class="params">(byte *uid)</span> &#123;</span><br><span class="line">  <span class="type">const</span> byte targetUID1[] = &#123;<span class="number">0x7A</span>, <span class="number">0x14</span>, <span class="number">0x86</span>, <span class="number">0x4E</span>&#125;; <span class="comment">// 洪汶熙的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID2[] = &#123;<span class="number">0x09</span>, <span class="number">0xAB</span>, <span class="number">0x0D</span>, <span class="number">0x64</span>&#125;; <span class="comment">// 张殷华的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID3[] = &#123;<span class="number">0xCA</span>, <span class="number">0x55</span>, <span class="number">0x88</span>, <span class="number">0xE5</span>&#125;; <span class="comment">// 徐昌洲的校卡</span></span><br><span class="line">  <span class="type">const</span> byte targetUID4[] = &#123;<span class="number">0xCA</span>, <span class="number">0x8B</span>, <span class="number">0x90</span>, <span class="number">0x7F</span>&#125;; <span class="comment">// 毛逸先的校卡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (byte i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(targetUID1); i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (uid[i] != targetUID1[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID2[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID3[i]</span><br><span class="line">    &amp;&amp;  uid[i] != targetUID4[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!rfid.PICC_IsNewCardPresent() || !rfid.PICC_ReadCardSerial())</span><br><span class="line">  &#123;</span><br><span class="line">    delay(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (isTargetUID(rfid.uid.uidByte))</span><br><span class="line">  &#123;</span><br><span class="line">    digitalWrite(LED_PIN, HIGH);</span><br><span class="line">    delay(<span class="number">1000</span>);</span><br><span class="line">    digitalWrite(LED_PIN, LOW);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  rfid.PICC_HaltA();</span><br><span class="line">  rfid.PCD_StopCrypto1();</span><br><span class="line">  delay(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="HLK-LD102-微运动感应模块"><a href="#HLK-LD102-微运动感应模块" class="headerlink" title="HLK-LD102 微运动感应模块"></a>HLK-LD102 微运动感应模块</h4><p>手扫感应开关采用海凌科的HLK-LD102微运动感知模组；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_8.png"
                      class="" width="500"
                >

<p>上位机配置参数如下，串口波特率设置为57600：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_9.png"
                      class="" width="300"
                >

<p>注意：上位机配置完参数之后需要重启才行！</p>
<p>手扫一下，TTL引脚输出高电平，此时上锁；再扫一下，TTL引脚输出低电平，此时解锁，中间需要间隔1s。</p>
<p>输出引脚电平变高和变低会有抖动，需要加入延时函数消抖。</p>
<h4 id="MG996R-舵机"><a href="#MG996R-舵机" class="headerlink" title="MG996R 舵机"></a>MG996R 舵机</h4><p>MG996R 舵机的工作频率在50Hz，因此脉冲周期微20ms，通过控制高电平的时间来控制舵机角度，这里为0.5ms-2.5ms；</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/12/%E5%AE%BF%E8%88%8D%E6%99%BA%E8%83%BD%E9%97%A8%E7%A6%81%E7%B3%BB%E7%BB%9F/fig_10.png"
                      class="" width="300"
                >

<p>使用ledc模块输出PWM，使用10位解析度，将对应的脉冲转化为解析度；</p>
<p>测试程序：这里将正常情况下（没上锁）输入脉冲宽度为0.5ms，上锁的脉冲宽度设置为1.5ms。</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> servoPin 22 <span class="comment">// 舵机引脚</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> freq 50 <span class="comment">// 舵机频率</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ledChannel 0 <span class="comment">//LEDc模块的通道0</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> resolution 10 <span class="comment">// 分辨率</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  ledcSetup(ledChannel, freq, resolution); <span class="comment">// 配置LEDc模块</span></span><br><span class="line">  ledcAttachPin(servoPin, ledChannel); <span class="comment">// 将舵机引脚连接到LEDc模块的通道0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  ledcWrite(ledChannel, <span class="number">77</span>); <span class="comment">// 上锁，占空比约为0.075，相当于1.5ms</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">  ledcWrite(ledChannel, <span class="number">25</span>); <span class="comment">// 解锁，占空比约为0.025，相当于0.5ms</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="红外传感器"><a href="#红外传感器" class="headerlink" title="红外传感器"></a>红外传感器</h4><p>目前还有点问题</p>
<div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;IRremote.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> recvPin 35</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ledPin 2</span></span><br><span class="line"></span><br><span class="line">IRrecv <span class="title function_">irrecv</span><span class="params">(recvPin)</span>;</span><br><span class="line">decode_results results;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  pinMode(ledPin, OUTPUT);</span><br><span class="line">  irrecv.enableIRIn(); <span class="comment">// 初始化接收器</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  digitalWrite(ledPin, LOW);</span><br><span class="line">  <span class="keyword">if</span> (irrecv.decode()) &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> data = IrReceiver.decodedIRData.decodedRawData;</span><br><span class="line">    Serial.println(data, HEX);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (data == <span class="number">0x00</span>) &#123;</span><br><span class="line">    digitalWrite(ledPin, HIGH);</span><br><span class="line">    Serial.println(<span class="string">&quot;LED ON&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      digitalWrite(ledPin, LOW);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    delay(<span class="number">100</span>);</span><br><span class="line">    irrecv.resume(); <span class="comment">// 接收下一个值</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p><code>platformio.ini</code></p>
<div class="code-container" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[env:esp32dev]</span></span><br><span class="line"><span class="attr">platform</span> = espressif32</span><br><span class="line"><span class="attr">board</span> = esp32dev</span><br><span class="line"><span class="attr">framework</span> = ardui<span class="literal">no</span></span><br><span class="line"><span class="attr">lib_deps</span> = </span><br><span class="line">    MFRC522</span><br><span class="line">    IRremote</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Other Projects</category>
      </categories>
  </entry>
  <entry>
    <title>无人机算法设计</title>
    <url>/2024/08/19/%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="硬件选型"><a href="#硬件选型" class="headerlink" title="硬件选型"></a>硬件选型</h2><p>电机采用T-motor的U系列工业级无刷电机，具备防水防尘的特点。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/19/%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/fig_1.png" class="" width="400">

<p>采用4S电池供电，并且采用T-motor的13*4.4CF碳纤维桨叶，75%油门可以提供1400g的拉力。</p>
<p>14.8V飞行参数（从左到右：油门，电流，功率，拉力，转速，力效，电机温度）</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/19/%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/fig_3.png" class="" width="400">

<p>电机工程图如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/08/19/%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/fig_2.png" class="" width="400">


<h2 id="机械结构设计"><a href="#机械结构设计" class="headerlink" title="机械结构设计"></a>机械结构设计</h2><p>采用八电机设计，主体结构为碳纤维连接, 轴距为360mm.</p>
<h2 id="基础算法"><a href="#基础算法" class="headerlink" title="基础算法"></a>基础算法</h2><p>经典的无人算法通过级联控制(cascaded control)或分层控制(hierarchical control)将姿态控制器, 高度控制器, 推力分配器分开进行设计. 每一个控制器采用PID进行设计.</p>
<h2 id="SDC算法设计与推导"><a href="#SDC算法设计与推导" class="headerlink" title="SDC算法设计与推导"></a>SDC算法设计与推导</h2><h2 id="实验设计"><a href="#实验设计" class="headerlink" title="实验设计"></a>实验设计</h2><h2 id="创新点设计"><a href="#创新点设计" class="headerlink" title="创新点设计"></a>创新点设计</h2>]]></content>
      <categories>
        <category>Robotics</category>
        <category>UAV</category>
      </categories>
  </entry>
  <entry>
    <title>打印机维修日志</title>
    <url>/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<h1 id="维修日志"><a href="#维修日志" class="headerlink" title="维修日志"></a>维修日志</h1><p>打印机型号：<strong>Sermoon D1</strong></p>
<h2 id="2023-05-19"><a href="#2023-05-19" class="headerlink" title="2023-05-19"></a>2023-05-19</h2><p>开始修理搁置大半年的打印机，遇到了很多问题，首先是在调平过程中，显示屏卡死，找创想三维的技术重新刷了固件，就能用了。</p>
<p>在调平过程中还遇到一个问题，螺母行程不足，喷头离打印平台太远，将螺母几乎扭出螺丝仍然不够，后续在四个支撑螺丝上加入垫片垫高（M4），使得弹簧给打印平台更多的压力，这样就有足够的行程调平了。</p>
<p>在打印过程发现，喷头无法正常出丝，打印的效果如下：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/fig_1.jpg"
                      class="" width="500"
                >

<p>同时在喷头加热到220℃后仍然无法将打印耗材拔出（用钳子都拔不出来），拆开喷头后清理喉管和喷头都不管用，并且每次清理的时候都能清理一坨弯曲的耗材，后来才发现喉管滑落，喉管顶部和挤出机的连接地方有一个空腔，导致耗材都堵在那里，无法正常出丝。</p>
<p>咨询技术后买了新的喉管，准备进行更换。</p>
<h2 id="2023-05-20"><a href="#2023-05-20" class="headerlink" title="2023-05-20"></a>2023-05-20</h2><p>更换新的喉管之后，在220℃下能够正常出丝，并且拔出耗材的头如下图（正常情况）</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/fig_2.jpg"
                      class="" width="600"
                >

<p>并且能够进行初步的正常打印。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/fig_3.jpg"
                      class="" width="500"
                >

<p>但是在打印过程中，又出现了出丝不畅的情况，即分层现象，同时整个打印件一捏就碎，毫无一点强度，咨询他人后发现是堵头。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/fig_4.jpg"
                      class="" width="500"
                >

<h2 id="2023-05-21"><a href="#2023-05-21" class="headerlink" title="2023-05-21"></a>2023-05-21</h2><p>多次测试之后，猜测可能是铁氟龙管老化或者摩擦阻力太大，需要对铁氟龙管进行更换。</p>
<p>为了验证想法，我将铁氟龙管拆了，直接将耗材不通过铁氟龙管直接插入挤出机，发现打印效果好了一点，但是打到后面仍然会出现上述情况。猜测是由于打印过程中直接拉扯耗材造成，后续购买了新的进口铁氟龙管，准备更换。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/05/21/%E6%89%93%E5%8D%B0%E6%9C%BA%E7%BB%B4%E4%BF%AE%E6%97%A5%E5%BF%97/fig_5.jpg"
                      class="" width="500"
                >


<h2 id="刷固件方法"><a href="#刷固件方法" class="headerlink" title="刷固件方法"></a>刷固件方法</h2><ol>
<li>将SD卡格式化，将<code>firmware_V1.1.18.bin</code>文件放入SD卡根目录；</li>
<li>切断打印机电源，将SD卡插入打印机；</li>
<li>重启打印机即可。</li>
</ol>
<h2 id="喉管问题"><a href="#喉管问题" class="headerlink" title="喉管问题"></a>喉管问题</h2><p>喉管的隔热套不能取下来，由于散热过快，可能会堵住喷头。</p>
]]></content>
      <categories>
        <category>Mechanical Design</category>
      </categories>
  </entry>
  <entry>
    <title>拓扑优化</title>
    <url>/2023/07/30/%E6%8B%93%E6%89%91%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2 id="结构优化基础知识"><a href="#结构优化基础知识" class="headerlink" title="结构优化基础知识"></a>结构优化基础知识</h2><p>在对机器人进行研发设计的时候，结构优化是一个很重要的步骤，好的结构优化能够提高零件的刚度重量比，在机器人的关键部位和一些重要的承重零件，利用各种结构优化，从而减轻机器人的重量，提高整个机器人的性能。<br>结构优化通常可以分为以下四类：</p>
<ul>
<li>尺寸优化<ul>
<li>一般优化零件的整体尺寸参数，优化孔的半径、板的厚度以及整体大小尺寸和形状都是；</li>
</ul>
</li>
<li>形状优化<ul>
<li>连续体的开孔形状，如圆孔还是方孔等、倒角，圆倒角还是方倒角、和边界形状等；</li>
</ul>
</li>
<li>形貌优化<ul>
<li>一般应用于钣金件的结构加强筋设计上，利用冲压形成压痕的加工工艺添加加强筋，可以看作是广义的形状优化中的边界形状设计</li>
</ul>
</li>
<li>拓扑优化<ul>
<li>以材料分布为优化对象，通过拓扑优化，可以在均匀分布材料的设计空间中找到最佳的分布方案。</li>
</ul>
</li>
</ul>

  <div class="note p-4 mb-4 rounded-small primary">
    <p>💡除了拓扑优化会改变结构的拓扑以外，其余三种优化均不会改变结构的拓扑形式。</p>

  </div>

<h3 id="拓扑优化"><a href="#拓扑优化" class="headerlink" title="拓扑优化"></a>拓扑优化</h3><blockquote>
<p>拓扑优化（Topology Optimization）是在给定的3D几何设计空间内对设计人员设置的定义规则集优化材料的布局及结构的过程。目标是通过对设计范围内的外力、荷载条件、边界条件、约束以及材料属性等因素进行数学建模和优化，从而最大限度的提高零件的性能。</p>
</blockquote>
<p>拓扑优化常用于提高一个零件的刚度重量比；</p>
<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        
    </div>
    <div style="flex: 50%; padding: 5px;">
        
    </div>
</div>



<h2 id="Solidworks拓扑优化"><a href="#Solidworks拓扑优化" class="headerlink" title="Solidworks拓扑优化"></a>Solidworks拓扑优化</h2>]]></content>
      <categories>
        <category>Mechanical Design</category>
      </categories>
  </entry>
  <entry>
    <title>无人机安全性论文笔记</title>
    <url>/2024/10/15/%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%AE%89%E5%85%A8%E6%80%A7%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="Neual-Fly-enables-rapid-learning-for-agile-flight-in-strong-winds"><a href="#Neual-Fly-enables-rapid-learning-for-agile-flight-in-strong-winds" class="headerlink" title="Neual-Fly enables rapid learning for agile flight in strong winds"></a>Neual-Fly enables rapid learning for agile flight in strong winds</h2><p><a class="link"   href="https://www.science.org/doi/epdf/10.1126/scirobotics.abm6597" >链接<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>论文中提到的抵抗最大风力是43.6km&#x2F;h, 即12.1m&#x2F;s.</p>
<p>论文提出了一种 data-driven approach. 叫做 Neural-Fly. 能够达到厘米级精度的误差.</p>
<p>该算法的两个核心:</p>
<ul>
<li>an offline learning phase;<ul>
<li>Domain adversarially invariant meta-learning (DAIML) learns a wind condition-independent deep neural network (DNN).</li>
</ul>
</li>
<li>an online adaptive control phase used as real-time online learning.</li>
</ul>
]]></content>
      <categories>
        <category>Scientific Research</category>
      </categories>
  </entry>
  <entry>
    <title>机器学习基础知识</title>
    <url>/2023/05/09/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h2 id="神经网络的结构"><a href="#神经网络的结构" class="headerlink" title="神经网络的结构"></a>神经网络的结构</h2><hr>
<h3 id="Multilayer-Perceptron-多层感知器-MLP"><a href="#Multilayer-Perceptron-多层感知器-MLP" class="headerlink" title="Multilayer Perceptron 多层感知器 MLP"></a>Multilayer Perceptron 多层感知器 MLP</h3><p>对于一个深度学习网络的神经元吗，我们可以将其理解为一个装有数字的容器。</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>💡在神经网络</p>

  </div>

<p>神经元中装着的数叫做<strong>激活值 activation</strong>，它是一个标量。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/09/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/fig_11.png" class="" width="500">

<p>在早期这种人工神经元叫做<strong>感知器 perceptron</strong>，后来随着神经网络的发展，逐渐变为<strong>sigmoid neurons</strong></p>
<p>关于perceptron的概念可以看<a class="link" href="http://neuralnetworksanddeeplearning.com/chap1.html">Perceptrons<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>中的第二段。</p>
<p>下一层与上一层的连接的每条线叫做<strong>权重 weight</strong>，每一层的神经元与上一层的所有神经元连接，它的权重构成一个列向量。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/09/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/fig_12.png" class="" width="500">

<p>这一层的某个神经元，它的激活值本质上是上一层所有神经元的激活值的线性组合。</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.819ex;" xmlns="http://www.w3.org/2000/svg" width="36.602ex" height="6.354ex" role="img" focusable="false" viewBox="0 -1562.5 16178.2 2808.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="msub" transform="translate(1152.6,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(2340.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(3340.6,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="msub" transform="translate(4493.1,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(5680.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(6681.1,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(8075.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(9075.5,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="msub" transform="translate(10298.8,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(562,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(11612.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="munderover" transform="translate(12668.6,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mi" transform="translate(509.9,1150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="msub" transform="translate(14279.3,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="msub" transform="translate(15322.2,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(562,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg></mjx-container></p>
<p>但是这个线性组合的结果可以为任意实数，因此通常需要一个函数将其映射到实数域的<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.526ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mn" transform="translate(278,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(778,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(1222.7,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(1722.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container>的区间。</p>
<p>最开始常用的是<strong>Sigmoid Function</strong>，这个函数可以把正数趋近1，负数趋近0，它的图像如下：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.738ex;" xmlns="http://www.w3.org/2000/svg" width="15.657ex" height="4.774ex" role="img" focusable="false" viewBox="0 -1342 6920.6 2110"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></g><g data-mml-node="mo" transform="translate(571,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(960,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(1532,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2198.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(3254.6,0)"><g data-mml-node="mn" transform="translate(1583,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(722.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(1722.4,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" transform="translate(499,289) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(778,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></g><rect width="3426" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/05/09/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/fig_13.png" class="" width="500">

<p>一层所有的神经元只有一部分需要激活，即大于 0，其他都为负数并且接近 0，如果需要的加权值并不在<strong>sigmoid</strong>函数的定义域附近，为了使得加权和能够在实数轴上对应我们需要的位置，我们可以把这个加权值拖拽到所需要的位置。</p>
<p>所以我们需要对加权和做一个偏置，这个偏置叫做<strong>偏置项 bias</strong>。<br>例如我需要加权和大于 10 的激发才有意义，那么最终的结果就是：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="41.283ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 18247.1 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></g><g data-mml-node="mo" transform="translate(571,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(960,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="msub" transform="translate(2112.6,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(3300.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(4300.6,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="msub" transform="translate(5453.1,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(6640.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(7641.1,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="msub" transform="translate(8793.7,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(9981.4,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(10981.7,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(12375.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(13376.1,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="msub" transform="translate(14599.4,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(562,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(15857.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(16858.1,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(17858.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p>
<p>在sigmoid函数的作用下，一个神经元的输出为0~1之间的任何一个数，同时从函数图像我们可以看出它的变化是平滑的，因此对于weights和biaes的微小的改变从而得到的输出结果的改变也是平滑的（可导的），而不是像阶梯函数那样产生突变。</p>

  <div class="note p-4 mb-4 rounded-small info">
    <p>💡在perceptron中，改变weights和bias的结果很有可能导致输出发生突变。所以为什么选择sigmoid函数作为激活函数并不重要，重要的是sigmoid函数的平滑性。</p>

  </div>

<p>利用多重积分的数学公式，我们可以推导得：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.006ex;" xmlns="http://www.w3.org/2000/svg" width="43.066ex" height="6.153ex" role="img" focusable="false" viewBox="0 -1391 19035 2719.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z"></path></g><g data-mml-node="mtext" transform="translate(833,0)"><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(500,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(1056,0)"></path><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" transform="translate(1445,0)"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(2001,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(2557,0)"></path></g><g data-mml-node="mo" transform="translate(4056.8,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="munder" transform="translate(5112.6,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="mi" transform="translate(576.3,-1084.4) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g><g data-mml-node="mfrac" transform="translate(6723.2,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mtext" transform="translate(566,0)"><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(500,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(1056,0)"></path><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" transform="translate(1445,0)"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(2001,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(2557,0)"></path></g></g><g data-mml-node="mrow" transform="translate(1147.8,-686)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="msub" transform="translate(566,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g><rect width="3712" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(10675.2,0)"><path data-c="394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z"></path></g><g data-mml-node="msub" transform="translate(11508.2,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g><g data-mml-node="mo" transform="translate(12820.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mfrac" transform="translate(13821,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mtext" transform="translate(566,0)"><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(500,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(1056,0)"></path><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" transform="translate(1445,0)"></path><path data-c="75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z" transform="translate(2001,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(2557,0)"></path></g></g><g data-mml-node="mrow" transform="translate(1478.5,-686)"><g data-mml-node="mi"><path data-c="1D715" d="M202 508Q179 508 169 520T158 547Q158 557 164 577T185 624T230 675T301 710L333 715H345Q378 715 384 714Q447 703 489 661T549 568T566 457Q566 362 519 240T402 53Q321 -22 223 -22Q123 -22 73 56Q42 102 42 148V159Q42 276 129 370T322 465Q383 465 414 434T455 367L458 378Q478 461 478 515Q478 603 437 639T344 676Q266 676 223 612Q264 606 264 572Q264 547 246 528T202 508ZM430 306Q430 372 401 400T333 428Q270 428 222 382Q197 354 183 323T150 221Q132 149 132 116Q132 21 232 21Q244 21 250 22Q327 35 374 112Q389 137 409 196T430 306Z"></path></g><g data-mml-node="mi" transform="translate(566,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g><rect width="3712" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(17773,0)"><path data-c="394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z"></path></g><g data-mml-node="mi" transform="translate(18606,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container></p>
<p>假设第0层有n个神经元，第1层有k个神经元，那么第1层的激活值就是：</p>
<div style="display: flex; align-items: center;">
    <div style="flex: 50%; padding: 5px;">
        <img lazyload="" src="/images/loading.svg" data-src="/2023/05/09/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/fig_14.png" class="" width="200">
    </div>
    <div style="flex: 50%; padding: 5px;">
        <mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -7.118ex;" xmlns="http://www.w3.org/2000/svg" width="39.123ex" height="15.367ex" role="img" focusable="false" viewBox="0 -3646.2 17292.5 6792.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mrow"><g data-mml-node="mo"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0,2136.8)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0,-2146.8)"></path><svg width="667" height="2683.5" y="-1091.8" x="0" viewBox="0 670.9 667 2683.5"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1,6.687)"></path></svg></g><g data-mml-node="mtable" transform="translate(667,0)"><g data-mml-node="mtr" transform="translate(0,2540.8)"><g data-mml-node="mtd" transform="translate(7.4,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(2725,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(5490.1,0)"><g data-mml-node="mo"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g></g><g data-mml-node="mtd" transform="translate(7724.5,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(778,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g><g data-mml-node="mtr" transform="translate(0,1103.6)"><g data-mml-node="mtd" transform="translate(7.4,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(2725,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(5490.1,0)"><g data-mml-node="mo"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g></g><g data-mml-node="mtd" transform="translate(7724.5,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(778,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-1103.6)"><g data-mml-node="mtd" transform="translate(719.8,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path></g></g></g><g data-mml-node="mtd" transform="translate(3437.3,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path></g></g></g><g data-mml-node="mtd" transform="translate(5435.1,0)"><g data-mml-node="mo"><path data-c="22F1" d="M133 760Q133 784 150 802T193 820Q217 820 235 804T254 761Q254 736 237 718T194 700T151 717T133 760ZM580 460Q580 484 597 502T640 520Q664 520 682 504T701 461Q701 436 684 418T641 400T598 417T580 460ZM1027 160Q1027 184 1044 202T1087 220Q1111 220 1129 204T1148 161Q1148 136 1131 118T1088 100T1045 117T1027 160Z"></path></g></g><g data-mml-node="mtd" transform="translate(8472.2,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-2503.6)"><g data-mml-node="mtd"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(799,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(2717.5,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(799,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtd" transform="translate(5490.1,0)"><g data-mml-node="mo"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g></g><g data-mml-node="mtd" transform="translate(7717.1,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="TeXAtom" transform="translate(749,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(799,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g></g><g data-mml-node="mo" transform="translate(10172.3,0)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0,2136.8)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0,-2146.8)"></path><svg width="667" height="2683.5" y="-1091.8" x="0" viewBox="0 670.9 667 2683.5"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1,6.687)"></path></svg></g></g><g data-mml-node="mrow" transform="translate(11006,0)"><g data-mml-node="mo"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0,2492.2)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0,-2502.2)"></path><svg width="667" height="3394.3" y="-1447.2" x="0" viewBox="0 848.6 667 3394.3"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1,8.458)"></path></svg></g><g data-mml-node="mtable" transform="translate(667,0)"><g data-mml-node="mtr" transform="translate(0,2585.5)"><g data-mml-node="mtd"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" transform="translate(562,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mn" transform="translate(562,-297.3) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,811.9)"><g data-mml-node="mtd"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" transform="translate(562,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mn" transform="translate(562,-297.3) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-1185.5)"><g data-mml-node="mtd" transform="translate(618.8,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-2896.2)"><g data-mml-node="mtd"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" transform="translate(562,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mi" transform="translate(562,-138.9) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></g><g data-mml-node="mo" transform="translate(2182.7,0)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0,2492.2)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0,-2502.2)"></path><svg width="667" height="3394.3" y="-1447.2" x="0" viewBox="0 848.6 667 3394.3"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1,8.458)"></path></svg></g></g><g data-mml-node="mo" transform="translate(14077.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mrow" transform="translate(15078.1,0)"><g data-mml-node="mo"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0,1971)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0,-1981)"></path><svg width="667" height="2352" y="-926" x="0" viewBox="0 588 667 2352"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1,5.86)"></path></svg></g><g data-mml-node="mtable" transform="translate(667,0)"><g data-mml-node="mtr" transform="translate(0,2375)"><g data-mml-node="mtd" transform="translate(7.4,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(462,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,975)"><g data-mml-node="mtd" transform="translate(7.4,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(462,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-975)"><g data-mml-node="mtd" transform="translate(301.2,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-2375)"><g data-mml-node="mtd"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(462,-150) scale(0.707)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g></g></g></g></g><g data-mml-node="mo" transform="translate(1547.4,0)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0,1971)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0,-1981)"></path><svg width="667" height="2352" y="-926" x="0" viewBox="0 588 667 2352"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1,5.86)"></path></svg></g></g></g></g></svg></mjx-container>
    </div>
</div>


  <div class="note p-4 mb-4 rounded-small info">
    <p>💡矩阵第一行与第二层第一个的神经元的所有权重对应，也就是对应第一个圆的所有线。</p>

  </div>

<h2 id="神经网络的原理"><a href="#神经网络的原理" class="headerlink" title="神经网络的原理"></a>神经网络的原理</h2><p>通过梯度下降法来寻找函数的最低点，对应的是所有权重的最优值。</p>
<h3 id="随机梯度下降-Stochastic-Gradient-Descent"><a href="#随机梯度下降-Stochastic-Gradient-Descent" class="headerlink" title="随机梯度下降 Stochastic Gradient Descent"></a>随机梯度下降 Stochastic Gradient Descent</h3><p>看3b1b的视频来学习，做好笔记</p>
<h3 id="反向传播法"><a href="#反向传播法" class="headerlink" title="反向传播法"></a>反向传播法</h3><h2 id="手写数字识别"><a href="#手写数字识别" class="headerlink" title="手写数字识别"></a>手写数字识别</h2><p><a class="link" href="http://neuralnetworksanddeeplearning.com/chap1.html">A simple networks to classify handwritten digits<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>手写数字是一个很好的原型对于学习神经网络，这个网络算法的核心，就是找到最合适的weights和biaes，使得网络能够成功识别数字。</p>
<p>对于一个手写数字的神经网络，第一层是这个图像的单个像素的排列，最后一层是对应0~9这9个数字的神经元。</p>
<h3 id="Cost-Function"><a href="#Cost-Function" class="headerlink" title="Cost Function"></a>Cost Function</h3><p>cost function相当于对网络中的所有的weights和biaes进行评分。</p>
<p>类似于概率论中的方差公式，cost function的公式如下：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.619ex;" xmlns="http://www.w3.org/2000/svg" width="27.97ex" height="5.656ex" role="img" focusable="false" viewBox="0 -1342 12362.6 2499.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(760,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1149,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(1865,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2309.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2738.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3405.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(4461.2,0)"><g data-mml-node="mn" transform="translate(520,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><rect width="1300" height="60" x="120" y="220"></rect></g><g data-mml-node="munder" transform="translate(6167.9,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="mi" transform="translate(519.8,-1050) scale(0.707)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g><g data-mml-node="mo" transform="translate(7778.6,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(8056.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(8546.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(8935.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(9507.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(10118.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(11119,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="msup" transform="translate(11648,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mn" transform="translate(311,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container></p>
<p>其中</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.163ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 1840 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(490,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(879,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(1451,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>是网络的输出</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.197ex" height="1.02ex" role="img" focusable="false" viewBox="0 -441 529 451"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>是期望的输出</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container>是训练样本的数量。</li>
</ul>
<h2 id="强化学习基础-Deep-Reinforcement-Learning"><a href="#强化学习基础-Deep-Reinforcement-Learning" class="headerlink" title="强化学习基础 Deep Reinforcement Learning"></a>强化学习基础 Deep Reinforcement Learning</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a class="link" href="https://www.bilibili.com/video/BV1bx411M7Zx/?spm_id_from=333.999.0.0&vd_source=5c8e073b8f94f9e61f07ae791a132eaf">【官方双语】深度学习之神经网络的结构 Part 1 ver 2.0<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="http://neuralnetworksanddeeplearning.com/">Neural Networks and Deep Learning<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title>模拟信号处理的PCB设计</title>
    <url>/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="设计需求和原理"><a href="#设计需求和原理" class="headerlink" title="设计需求和原理"></a>设计需求和原理</h2><p>根据实验室电机控制需求，需要给电机三相交流电的电流传感器的输出信号进行处理，将电流传感器的-4V~+4V的输出信号转换为0~3.3V的电压信号，以便于后续单片机的AD采样。</p>
<p>采用运放模块进行运算，先用加法器将-4V~+4V的信号转换为0~8V的信号，再用比例放大器将0<del>8V的信号转换为0</del>3.3V的信号。</p>
<p>要处理信号的电流传感器为 LEM HAS 50-S</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_1.jpg" class="" width="500">

<h2 id="电路设计"><a href="#电路设计" class="headerlink" title="电路设计"></a>电路设计</h2><p>参考运放的负反馈电路，几乎所有运算电路都可以通过运放的两个特性计算出来：</p>
<ul>
<li>虚断：理想运放的输入阻抗无穷大，输入电流近似为零。</li>
<li>虚短：当给运放引入反馈时，运放的两个输入端的电压相等，相当于短路。</li>
</ul>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_3.png" class="" width="500">

<p>通过公式可以对加法器进行计算：将-4V~+4V的信号转换为0~8V的信号</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_4.png" class="" width="500">

<p>乘法器的计算公式如下：将0~8V的信号转换为0~3.3V的信号，增益系数为0.4125</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_5.png" class="" width="500">

<p>采用LM358运放，AD的原理图如下：（单个原理图）<br>运放的输入电压和供电均采用LDO线性稳压器，减少输入电压的纹波；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_6.png" class="" width="500">

<p>线性稳压将15V的电压输入转换为12V的电压输出，作为运放输入和供电：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_7.png" class="" width="300">

<h3 id="仿真测试"><a href="#仿真测试" class="headerlink" title="仿真测试"></a>仿真测试</h3><p>在1kHz的输入信号下，输出信号的波形如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_10.png" class="" width="500">

<p>在LM358带宽内，输出信号正常不失真。</p>
<h2 id="PCB设计"><a href="#PCB设计" class="headerlink" title="PCB设计"></a>PCB设计</h2><p>除了需要处理的信号，还需要将电流传感器原本的信号通过SMA接口输出，方便输入到Dspace进行调试。</p>
<p>PCB的设计如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_8.png" class="" width="600">

<p>实际焊接效果如图：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_9.png" class="" width="600">

<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p>通过信号发生器输入1kHz的正弦波信号，用示波器测得输出信号如下：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_11.png" class="" width="500">

<p>可以看到输出信号的幅值为0~3.3V，基本符合设计要求。</p>
<h2 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h2><ul>
<li><p>LM358的供电电压应该大于输出电压，否则输出电压会嵌在特定的电压值，无法正常输出。</p>
</li>
<li><p>电路设计一定要多仿真，不要没有仿真就画pcb，仿真能够提前发现和解决很多问题。</p>
</li>
</ul>
<p>最开始设计的时候采用5V供电电压，导致加法器后的输出无论输入多少，都是3.5V，后续去掉5V的降压芯片，直接使用12V供电电压，输出信号正常。</p>
<ul>
<li>4p的xh接口封装与板子画的封装不是对应的封装</li>
</ul>
<p>后续的PCB设计中，注意购买的封装和设计的封装是否对得上，可以通过软件中的3维模型来判断。</p>
<ul>
<li><p>3P的AD输出接口应该改为4P，除了三路模拟信号外，还需要一个接地信号。</p>
</li>
<li><p>多买一些3p和4p的xh线，方便测试。</p>
</li>
<li><p>四个角应该开一个M3的螺纹孔，并用尼龙柱来支撑，与放置平面绝缘。</p>
</li>
<li><p>PCB的布局应该更加合理，同一路模拟信号的器件都放在一起，电源和信号隔离开。</p>
</li>
<li><p>PCB需要处于强电的工作环境中，具有较强的电磁干扰，后续需要做好电磁屏蔽和隔离。</p>
</li>
<li><p>LM358的单位增益带宽仅为1.2MHz，对于电机三相交流电，需要100kHz的带宽，需要更好用的运放，来增加带宽冗余。</p>
</li>
</ul>
<p>运放的增益带宽积，即运放能处理的最高频率计算如下：</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="35.195ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 15556 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">增</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">益</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">带</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">宽</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">积</text></g><g data-mml-node="mo" transform="translate(5277.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(6333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">单</text></g><g data-mml-node="mi" transform="translate(7333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">位</text></g><g data-mml-node="mi" transform="translate(8333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">增</text></g><g data-mml-node="mi" transform="translate(9333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">益</text></g><g data-mml-node="mi" transform="translate(10333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">带</text></g><g data-mml-node="mi" transform="translate(11333.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">宽</text></g><g data-mml-node="mo" transform="translate(12555.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mi" transform="translate(13556,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">增</text></g><g data-mml-node="mi" transform="translate(14556,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">益</text></g></g></g></svg></mjx-container></p>
<p>实际上LM358的增益非常小，在板子最大增益系数为1的时候，输入1MHz的模拟信号，输出信号出现了明显的失真。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2024/05/23/%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84PCB%E8%AE%BE%E8%AE%A1/fig_12.png" class="" width="500">]]></content>
      <categories>
        <category>Electronics and Embedded System</category>
      </categories>
  </entry>
  <entry>
    <title>服务机器人的构想</title>
    <url>/2024/08/28/%E5%BF%AB%E9%80%92%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E6%9E%84%E6%83%B3/</url>
    <content><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>解决校园或者园区内实验室和宿舍取快递, 取外卖的问题. 解决取快递, 取外卖最后一公里的问题.</p>
<p>例如机器人要从实验室出发, 到达驿站, 取了快递之后, 进入大楼, 送到指定楼层的指定房间.</p>
<h2 id="技术难点"><a href="#技术难点" class="headerlink" title="技术难点"></a>技术难点</h2><ul>
<li>SLAM技术</li>
</ul>
<p>从实验室到驿站, 这一段路程, 机器人需要自主导航.</p>
<ul>
<li>带视觉系统的机械臂</li>
</ul>
<p>机器人到达快递柜之后, 需要输入取件码, 打开柜门, 取出快递. 除了使用神经网络的视觉系统外, 还需要机器人有一定的大模型能力.</p>
<ul>
<li>室内导航</li>
</ul>
<p>室内使用SLAM技术, 使得机器人会按电梯, 在指定的楼层导航, 最后能够到达指定楼层的指定房间.</p>
<p>主要难点在于让机器人能够理解乘坐电梯这件事情, 就非常困难.</p>
<p>整个室内导航可以分为三个部分: </p>
<ul>
<li>从一楼导航到电梯门口</li>
<li>乘坐电梯</li>
<li>从电梯出来, 导航到指定楼层的指定房间</li>
</ul>
<p>机器人导航到电梯门口, 如何判断电梯是否到达, 电梯门是否打开, 电梯内部是否有人, 如何躲避人类避免误伤, 如何判断电梯是否到达指定楼层, 判断指定楼层到达之后, 等待电梯门打开.</p>
<h2 id="初步设想"><a href="#初步设想" class="headerlink" title="初步设想"></a>初步设想</h2><ul>
<li>由我来完成机械臂取快递的操作, 然后找会SLAM的同学来完成机器人的导航. 最后一起解决乘坐电梯的问题.</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>本科毕业设计</title>
    <url>/2023/05/19/%E6%9C%AC%E7%A7%91%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="合作博弈与可解释性"><a href="#合作博弈与可解释性" class="headerlink" title="合作博弈与可解释性"></a>合作博弈与可解释性</h2><p>项目的核心是将合作博弈中的估值问题与深度学习中的可解释性问题联系起来，用于解决样本的估值问题，判断出数据集的好坏和价值。</p>
<h2 id="博弈论中的估值问题"><a href="#博弈论中的估值问题" class="headerlink" title="博弈论中的估值问题"></a>博弈论中的估值问题</h2><h3 id="沙普利值-Shapley-Value"><a href="#沙普利值-Shapley-Value" class="headerlink" title="沙普利值 Shapley Value"></a>沙普利值 Shapley Value</h3><blockquote>
<p>沙普利值是由莱斯特·沙普利（Lloyd Shapley）在1953年提出的，用于解决合作博弈（Cooperative Game）中的支付分配问题。合作博弈中，个体或者团体可以通过联合行动以达到优于单独行动的结果，沙普利值则是判断如何公平地分配这个联合行动的收益。</p>
</blockquote>
<h2 id="机器学习中的估值问题"><a href="#机器学习中的估值问题" class="headerlink" title="机器学习中的估值问题"></a>机器学习中的估值问题</h2><ul>
<li><strong>Feature interpretation 可解释性的特征归因</strong><ul>
<li>特征解释通常涉及理解模型的输入特征如何影响模型的预测。这通常包括特征选择（哪些特征是重要的）以及特征的重要性排序，即对单个样本对模型的影响进行解释。</li>
</ul>
</li>
<li><strong>Data valuation 数据估值</strong><ul>
<li>数据估值涉及到评估数据集中每个样本的价值或贡献。找到贡献最大的样本和噪声最大的样本。</li>
</ul>
</li>
<li><strong>Model valuation for ensembles 模型估值</strong><ul>
<li>模型估值涉及到评估单个模型或模型组合（ensemble）对预测性能的贡献。通过模型估值，可以决定哪些模型应该包含在组合中，以及每个模型应该被赋予多少权重。</li>
</ul>
</li>
</ul>
<p>我主要的研究方向是先从Data valuation 数据估值入手，其实就是研究在机器学习中哪些数据是有用的，哪些数据是冗余的和对模型造成噪声。</p>
<h2 id="文献分析"><a href="#文献分析" class="headerlink" title="文献分析"></a>文献分析</h2><h3 id="Energy-Based-Learning-For-Cooperative-Games-with-Applications-to-Valuation-Problems-in-Machine-Learning"><a href="#Energy-Based-Learning-For-Cooperative-Games-with-Applications-to-Valuation-Problems-in-Machine-Learning" class="headerlink" title="Energy-Based Learning For Cooperative Games, with Applications to Valuation Problems in Machine Learning"></a>Energy-Based Learning For Cooperative Games, with Applications to Valuation Problems in Machine Learning</h3><blockquote>
<p>Valuation problems, such as feature interpretation, data valuation and model valuation for ensembles, become increasingly more important in many machine learning applications. Such problems are commonly addressed via well-known game-theoretic criteria, such as the Shapley value or Banzhaf value. In this work, we present a novel energy-based treatment for cooperative games, with a theoretical justification via the maximum entropy principle.</p>
</blockquote>
<p>在机器学习里面，在feature interpretation, data valuation, model valuation的三个估值问题上，通过博弈论中的Shapley值和Banzhaf值来解决。同时用一种基于能量的方法，，并通过最大熵原理进行理论上的证明。</p>
<blockquote>
<p>Surprisingly, through mean-field variational inference in the energy-based model, we recover classical game-theoretic valuation criteria by conducting one-step of fixed point iteration for maximizing the ELBO objective. By running the fixed point iteration for multiple steps, we achieve a trajectory of the variational valuations…</p>
</blockquote>
<p>利用平均场变分推断来进行学习和推断，通过一步不动点迭代来恢复Shapley值和Banzhaf值，并通过多步不动点迭代来得到一系列变分估值。</p>
<h2 id="概念分析"><a href="#概念分析" class="headerlink" title="概念分析"></a>概念分析</h2><h3 id="Shapley-Value"><a href="#Shapley-Value" class="headerlink" title="Shapley Value"></a>Shapley Value</h3><blockquote>
<p>沙普利值是由莱斯特·沙普利（Lloyd Shapley）在1953年提出的，用于解决合作博弈（Cooperative Game）中的支付分配问题。合作博弈中，个体或者团体可以通过联合行动以达到优于单独行动的结果，沙普利值则是判断如何公平地分配这个联合行动的收益。</p>
</blockquote>
<p>在深度学习中，训练数据的顺序确实可以影响模型的学习效果，尤其是在使用随机梯度下降（SGD）及其变种作为优化算法时。这是因为随机梯度下降每次更新权重时只使用一部分（即一个mini-batch）的数据，因此数据的顺序和组成可以影响梯度估计的准确性以及模型训练的方向和速度。</p>
<p>数据顺序的影响<br>局部最小和鞍点：在某些情况下，数据的顺序可能会导致模型更容易陷入局部最小值或鞍点。特别是在复杂的高维优化问题中，不同的数据顺序可能会使优化路径发生变化，从而影响最终模型的性能。</p>
<p>学习动态：不同的数据顺序可能会影响模型的学习动态，包括学习速率和收敛速度。例如，如果模型连续遇到相似的样本，它可能不会学习到足够多样化的特征表示；相反，如果数据顺序能够保证良好的样本多样性，模型可能会更快地学习到更泛化的特征表示。</p>
<p><strong>计算方法</strong></p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.222ex;" xmlns="http://www.w3.org/2000/svg" width="48.719ex" height="6.525ex" role="img" focusable="false" viewBox="0 -1460 21533.6 2884.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D719" d="M409 688Q413 694 421 694H429H442Q448 688 448 686Q448 679 418 563Q411 535 404 504T392 458L388 442Q388 441 397 441T429 435T477 418Q521 397 550 357T579 260T548 151T471 65T374 11T279 -10H275L251 -105Q245 -128 238 -160Q230 -192 227 -198T215 -205H209Q189 -205 189 -198Q189 -193 211 -103L234 -11Q234 -10 226 -10Q221 -10 206 -8T161 6T107 36T62 89T43 171Q43 231 76 284T157 370T254 422T342 441Q347 441 348 445L378 567Q409 686 409 688ZM122 150Q122 116 134 91T167 53T203 35T237 27H244L337 404Q333 404 326 403T297 395T255 379T211 350T170 304Q152 276 137 237Q122 191 122 150ZM500 282Q500 320 484 347T444 385T405 400T381 404H378L332 217L284 29Q284 27 285 27Q293 27 317 33T357 47Q400 66 431 100T475 170T494 234T500 282Z"></path></g><g data-mml-node="mi" transform="translate(629,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(923,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1312,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(1797,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2463.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="munder" transform="translate(3519.5,0)"><g data-mml-node="mo" transform="translate(393.8,0)"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(0,-1147.3) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(645,0)"><path data-c="2286" d="M84 346Q84 468 166 546T360 635Q361 635 370 635T395 635T430 636T475 636T524 636H679Q694 628 694 616Q694 607 681 597L522 596H470H441Q366 596 338 592T266 568Q244 557 224 542T179 500T139 433T124 346V341Q124 253 185 185Q244 121 328 103Q348 98 366 98T522 96H681Q694 86 694 76Q694 64 679 56H526Q510 56 480 56T434 55Q350 55 289 71T172 141Q84 223 84 346ZM104 -131T104 -118T118 -98H679Q694 -106 694 -118T679 -138H118Q104 -131 104 -118Z"></path></g><g data-mml-node="mi" transform="translate(1423,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(2311,0)"><path data-c="2216" d="M56 731Q56 740 62 745T75 750Q85 750 92 740Q96 733 270 255T444 -231Q444 -239 438 -244T424 -250Q414 -250 407 -240Q404 -236 230 242T56 731Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2811,0)"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></g><g data-mml-node="mfrac" transform="translate(5917.8,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(923,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(1201,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g><g data-mml-node="mo" transform="translate(1479,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mo" transform="translate(1868,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(2146,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(3034,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(3534.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mo" transform="translate(4534.4,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(4812.4,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(5457.4,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(5957.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(6957.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(7457.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(7846.9,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g></g><g data-mml-node="mrow" transform="translate(3421.4,-709.5)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(1166,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(1444,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g></g><rect width="8324.9" height="60" x="120" y="220"></rect></g><g data-mml-node="mrow" transform="translate(14482.7,0)"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(2019.2,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2908.4,0)"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(3253.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3864.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4864.9,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(5349.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5738.9,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(6383.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6772.9,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></g></svg></mjx-container></p>
<h2 id="算法复杂度的计算"><a href="#算法复杂度的计算" class="headerlink" title="算法复杂度的计算"></a>算法复杂度的计算</h2><p>了解shapley值的计算复杂度，判断对于计算机来说是否是可行的。</p>
<ul>
<li>时间复杂度：衡量算法执行所需时间的增长率，随着输入数据量的增加，算法执行时间的增长情况。</li>
<li>空间复杂度：衡量算法执行过程中所需存储空间的增长率，同样随着输入数据量的增加，所需的存储空间增长的情况。</li>
</ul>
<p>对shapley value的计算复杂度进行分析，可以从以下几个方面进行分析：</p>
<p>计算复杂度分析</p>
<ul>
<li><p>子集数量：最关键的因素是需要考虑所有不包括特定玩家 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 的子集 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container>。对于一个包含 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 个玩家的集合 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.009ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 888 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container>，去除一个特定玩家后，剩余 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="5.254ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 2322.4 748"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(822.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1822.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container> 个玩家。这 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="5.254ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 2322.4 748"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(822.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1822.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container> 个玩家可以形成的子集总数为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.323ex" height="1.887ex" role="img" focusable="false" viewBox="0 -833.9 1910.9 833.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1378,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></svg></mjx-container>。这是因为每个玩家可以选择加入或不加入子集，因此每个玩家对子集的形成有2种可能的状态（在或不在），对所有玩家来说总共有 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.323ex" height="1.887ex" role="img" focusable="false" viewBox="0 -833.9 1910.9 833.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1378,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></svg></mjx-container> 种组合。</p>
</li>
<li><p>每个子集的计算：对于每个子集 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container>，需要计算两个值：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.612ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3364.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(874,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(1741.2,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2630.4,0)"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(2975.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.317ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 1908 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(874,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(1519,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，然后计算它们的差值。这个差值之后会乘以一个系数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.236ex;" xmlns="http://www.w3.org/2000/svg" width="12.572ex" height="3.605ex" role="img" focusable="false" viewBox="0 -1047.1 5556.6 1593.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(220,516.8) scale(0.707)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(923,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(1201,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g><g data-mml-node="mo" transform="translate(1479,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mo" transform="translate(1868,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(2146,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(3034,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(3312,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mo" transform="translate(4090,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(4368,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(5013,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(5291,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(6069,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(6569,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6958,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g></g><g data-mml-node="mrow" transform="translate(2169.5,-370) scale(0.707)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(1166,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path></g><g data-mml-node="mo" transform="translate(1444,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g></g><rect width="5316.6" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container>。计算这个系数涉及到阶乘运算，但与子集的数量相比，阶乘运算的复杂度不是主导因素。</p>
</li>
</ul>
<p>因此，Shapley值计算的总体复杂度主要受到子集枚举的影响，即 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.662ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4270.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(2381.5,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3381.7,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(3881.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>。这意味着随着n增大，Shapley值的计算复杂度是指数级的，对于大规模的数据集，计算Shapley值是非常耗时的。</p>
<p>因此我们需要一些优化的方法来降低计算复杂度，使其计算结果近似于真实的Shapley值。</p>
<h2 id="近似计算方法"><a href="#近似计算方法" class="headerlink" title="近似计算方法"></a>近似计算方法</h2><p>抽样方法<br>由于直接计算Shapley值涉及到的所有可能子集的数量是指数级的，一种解决方案是通过抽样子集而不是枚举所有可能的子集来估计Shapley值。这种方法随机选择子集并计算这些子集的贡献，然后基于这些抽样结果估计Shapley值。</p>
<p>优点：大大减少了计算量。<br>缺点：结果是近似的，准确度取决于抽样的数量和方法。<br>2. 分组抽样<br>这种方法涉及将特征或玩家分组，并将每个组作为单个实体来处理。通过评估组的贡献而不是个别特征或玩家的贡献，可以减少必要的计算量。</p>
<p>优点：减少了考虑的特征或玩家的数量。<br>缺点：可能会丢失组内元素的细节信息。<br>3. TMC (Truncated Monte Carlo) Shapley估计<br>这种方法结合了蒙特卡洛方法和截断策略，通过在蒙特卡洛抽样过程中引入截断来限制每个玩家或特征的贡献计算次数，以此来减少总的计算次数。</p>
<p>优点：提供了一种平衡计算复杂度和估计准确性的方法。<br>缺点：选择合适的截断阈值可能需要一定的经验和实验。<br>4. 使用机器学习模型<br>另一种方法是使用机器学习模型直接学习特征贡献的映射关系。例如，可以训练一个模型来预测给定数据点的Shapley值，而不是通过传统的计算方法来直接计算。</p>
<p>优点：可以显著减少计算时间，特别是在可以重复使用模型的场景中。<br>缺点：需要足够的数据来训练模型，且模型的准确性直接影响Shapley值估计的准确性。</p>
<p>在SHAP中的近似计算方法</p>
<ul>
<li>Kernel SHAP<ul>
<li>通过对特征空间进行采样，然后计算每个采样点的Shapley值，最后对所有采样点的Shapley值进行平均来估计真实的Shapley值。</li>
</ul>
</li>
<li>Tree SHAP<ul>
<li>通过树搜索的方式来近似计算Shapley值，通过构建一个树结构来表示特征的组合，然后通过树搜索来计算Shapley值。</li>
</ul>
</li>
<li>Deep SHAP<ul>
<li>通过深度学习模型来学习特征的贡献，通过训练一个深度神经网络来预测Shapley值，从而减少计算复杂度。</li>
</ul>
</li>
<li>Gradient SHAP<ul>
<li>通过梯度的方式来近似计算Shapley值，通过计算梯度来估计特征的贡献，从而减少计算复杂度。</li>
</ul>
</li>
</ul>
<p>针对不同的模型采用了不同的近似方法。</p>
<h2 id="开题报告"><a href="#开题报告" class="headerlink" title="开题报告"></a>开题报告</h2><h3 id="选题目的与意义"><a href="#选题目的与意义" class="headerlink" title="选题目的与意义"></a>选题目的与意义</h3><p>近年来，估值问题再机器学习中变得越来越重要，其中一种典型的估值问题是数据估值，用于数据估值涉及到评估数据集中每个样本的价值或贡献。找到贡献最大的样本和噪声最大的样本。</p>
<p>沙普利值是博弈论中的一个概念，用来公平地分配合作博弈中玩家的收益。在机器学习中引入合作博弈中的沙普利值作为度量标准，用来量化每个训练数据对预测器性能的价值。</p>
<p>但在实际的应用过程中，对于数据量较大的模型，沙普利值的计算考虑需要所有可能的数据子集，并评估每个子集对模型性能的贡献。这意味着数据量大的模型计算量呈指数级增长，变得及其庞大，对于复杂的模型，单词模型训练就可能需要很长时间，整个过程因此变得不切实际。</p>
<p>因此很难估算单个数据的沙普利值，该研究需要提出一种优化的算法策略，高效的近似估算单个数据的沙普利值。</p>
<h3 id="研究现状与文献综述"><a href="#研究现状与文献综述" class="headerlink" title="研究现状与文献综述"></a>研究现状与文献综述</h3><p>在过去的几年中，沙普利值的计算方法和应用已经成为了研究的热点。研究者们提出了多种策略来降低其计算复杂度，如蒙特卡洛近似和基于梯度的方法。这些方法在一定程度上缓解了计算复杂度的问题，但仍然存在一些局限性，特别是在处理大规模数据时。</p>
<p>当前的研究主要集中在如何提高计算效率，以及如何更准确地近似估算沙普利值。但是，现有方法在处理大数据模型时仍然面临着巨大的挑战，需要进一步的研究和优化。</p>
<h3 id="研究的主要内容、预期目标与创新点"><a href="#研究的主要内容、预期目标与创新点" class="headerlink" title="研究的主要内容、预期目标与创新点"></a>研究的主要内容、预期目标与创新点</h3><p>研究的主要内容为刨析沙普利值的传统计算方法，找到或者提出一种高效的近似估算单个数据的沙普利值的方法。预期目标是能够在有限的计算资源下，快速完成沙普利值的估计。创新点是提高了沙普利值的计算效率，使得沙普利值的计算更加实用。</p>
<h3 id="研究思路、研究方法与研究计划"><a href="#研究思路、研究方法与研究计划" class="headerlink" title="研究思路、研究方法与研究计划"></a>研究思路、研究方法与研究计划</h3><p>尝试使用特定的机器学习模型，对数据进行采用和降维来减少计算量。并且采用并行化和分布式计算来加速计算。利用现有的数据集进行实验，验证算法的有效性。</p>
<p>同时尝试其他算法，如粒子滤波，树搜索等，来优化沙普利值的计算。</p>
<p>研究计划：</p>
<ol>
<li>研究合作博弈中标准的沙普利值计算方法，分析其在算法上的复杂度是如何产生的；</li>
<li>研究现有的沙普利值计算方法，包括蒙特卡洛法和基于梯度的方法，分析其优缺点；</li>
<li>尝试引入机器学习模型，对数据进行采用和降维或者其他更优的算法策略，来减少计算量，提高效率；</li>
<li>搭建神经网络测试平台，利用现有的数据集进行实验，验证算法的有效性；</li>
</ol>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link" href="https://m.thepaper.cn/baijiahao_18000292">腾讯AI Lab联合ETH提出合作博弈新范式，为可解释性等机器学习估值问题提供新方法<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://www.bilibili.com/video/BV1Kt411h7Ep?p=21&vd_source=77634fbace993f80c84cb94e22e46e73">【公开课】耶鲁大学：博弈论（中英双语字幕）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://zhuanlan.zhihu.com/p/343529491">综述：基于能量的模型<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://github.com/AstraZeneca/awesome-shapley-value?tab=readme-ov-file">Awesome Shapley Value<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Other Projects</category>
      </categories>
  </entry>
  <entry>
    <title>TCP/IP基础知识以及ssh连接</title>
    <url>/2024/02/07/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<blockquote>
<p>在研究ssh连接的时候，无法解决服务器接入公网的问题，因此学习网络通信的理论知识；</p>
</blockquote>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>计算机网络可以根据规模分为</p>
<ul>
<li>WAN (Wide Area Network, 广域网)</li>
<li>MAN (Metropolitan Area Network, 城域网, 整个城市的网络)</li>
<li>LAN (Local Area Network, 局域网)</li>
</ul>
<p>局域网LAN可以在一个实验室, 一栋楼中, 若干个主机连接到路由器上, 形成一个有限, 狭小的区域内网络;</p>
<p>TCP&#x2F;IP通信协议为现代计算机网络的基本工作模式；它是一种网络体系架构, 就是IP, TCP, HTTP等协议的集合.</p>
<blockquote>
<p>TCP&#x2F;IP协议指利用IP进行通信时所必须用到的协议群的统称, IP或ICMP, TCP或UDP, TELNET或FTP以及HTTP都属于TCP&#x2F;IP的协议.</p>
</blockquote>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/02/07/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/fig_1.png"
                      class="" width="500"
                >

<p>网卡 (NIC, Network Interface Card) </p>
<p>IP地址具有层次性，而MAC地址不具备；</p>
<h2 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h2><p>ubuntu设置环境变量指定代理服务器，</p>
<h2 id="路由器的工作原理"><a href="#路由器的工作原理" class="headerlink" title="路由器的工作原理"></a>路由器的工作原理</h2><p>静态路由方式:</p>
<ul>
<li>泛洪法</li>
<li>固定路由法</li>
</ul>
<h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><h2 id="NAT内网穿透"><a href="#NAT内网穿透" class="headerlink" title="NAT内网穿透"></a>NAT内网穿透</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>《图解tcp&#x2F;ip》</li>
<li><a class="link"   href="https://www.bilibili.com/video/BV1Ea411V7gu/?spm_id_from=333.337.search-card.all.click&vd_source=5c8e073b8f94f9e61f07ae791a132eaf" >路由器是如何路由的？（上集）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Basic Computer Programming</category>
      </categories>
  </entry>
  <entry>
    <title>机械臂论文笔记</title>
    <url>/2024/09/09/%E6%9C%BA%E6%A2%B0%E8%87%82%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="Inverse-kinematics-solution-and-control-method-of-6-degree-of-freedom-manipulator-based-on-deep-reinforcement-learning"><a href="#Inverse-kinematics-solution-and-control-method-of-6-degree-of-freedom-manipulator-based-on-deep-reinforcement-learning" class="headerlink" title="Inverse kinematics solution and control method of 6-degree-of-freedom manipulator based on deep reinforcement learning"></a>Inverse kinematics solution and control method of 6-degree-of-freedom manipulator based on deep reinforcement learning</h2><p>2024.5</p>
<p>该文章主要解决的是机械臂逆运动学的算法，通过强化学习设置奖励机制，实时计算末端执行器与目标位姿之间的差异，考虑了高斯距离和余弦距离，称为 MAPPO-IK算法。通过实际的实验表明，MAPPO-IK算法相比传统的逆运动学算法，具有更好的泛化能力和计算效率，能够实时求解唯一解，并且在复杂环境中具有更改好的适应性，还具备路径规划和智能避障等优势。</p>


	<div class="row">
    <embed src="./6.pdf" width="100%" height="550" type="application/pdf">
	</div>





<h2 id="Hybrid-hierarchical-learning-for-solving-complex-sequential-tasks-using-the-robotic-manipulation-network-ROMAN"><a href="#Hybrid-hierarchical-learning-for-solving-complex-sequential-tasks-using-the-robotic-manipulation-network-ROMAN" class="headerlink" title="Hybrid hierarchical learning for solving complex sequential tasks using the robotic manipulation network ROMAN"></a>Hybrid hierarchical learning for solving complex sequential tasks using the robotic manipulation network ROMAN</h2><p>2023.11</p>
<p>该文章提出了一个混合分层学习框架，称为机器人操作网络 ROMAN, 以应对在机器人操作中解决长时间跨度内的多个复杂任务的挑战。通过整合行为克隆、模仿学习和强化学习。中央操作网络协调一组专门化的神经网络，每个神经网络专注于不同的子任务，从而生成正确的顺序动作，解决复杂的操作任务。</p>
<p>整个框架通过设计一个中央操作网络 (MN) 来协调多个专家网络，每个专家网络专注于特定的操作任务，专家网络包括多个专门化的神经网络，每个网络擅长特定的操作任务，如推按钮，拾取并插入，拾取并放置，旋转开关，拾取并丢弃，拉开等。使用行为克隆 (BC) 收集初始的状态-动作数据。实施生成对抗模仿学习 (GAIL) 来进一步优化策略，使其能够更好地模仿人类专家的行为。最后，通过强化学习进行策略更新，使用PPO算法结合内在和外在奖励来鼓励探索和改进行为。最终通过在虚拟环境中实验得到结果。</p>


	<div class="row">
    <embed src="./7.pdf" width="100%" height="550" type="application/pdf">
	</div>




<h2 id="Large-Language-Models-for-Robotics-Opportunities-Challenges-and-Perspectives"><a href="#Large-Language-Models-for-Robotics-Opportunities-Challenges-and-Perspectives" class="headerlink" title="Large Language Models for Robotics: Opportunities, Challenges, and Perspectives"></a>Large Language Models for Robotics: Opportunities, Challenges, and Perspectives</h2>

	<div class="row">
    <embed src="./1.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p>LLMs 正在多个领域得到广泛应用，尤其是在机器人任务规划方面，它们通过其推理和语言理解能力，能够根据自然语言指令生成高效的行动计划。然而，当涉及到机器人需要与复杂环境进行交互的任务时，单纯基于文本的 LLMs 存在与视觉感知不兼容的挑战。</p>
<p>为了解决这个问题，本文提出了一个基于多模态 GPT-4V 的框架，将自然语言指令与机器人视觉感知结合，以提升机器人在任务规划中的表现。</p>
<p>同时这篇论文给出了LLM方向的综述:</p>
<h2 id="TidyBot-personalized-robot-assistance-with-large-language-models"><a href="#TidyBot-personalized-robot-assistance-with-large-language-models" class="headerlink" title="TidyBot: personalized robot assistance with large language models"></a>TidyBot: personalized robot assistance with large language models</h2>

	<div class="row">
    <embed src="./5.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p>TidyBot主要结构是一个机械臂加上AGV小车，然后机械臂末端有两个摄像头。首先这个TidyBot要实现通过目标检测来识别有哪些物体，这里他用了ViLD网络。然后对于距离自己最近的检测物体，将这个物体所在的矩形框图片（图像）和之前LLM summarized的物体概括（文本），通过CLIP进行embedding之后，计算余弦相似度获取和这个物体最匹配的物体概括，从而确定这个物体属于哪一类。这里就体现了抽象的物体概括的好处，如果不概括，那么就需要人实现指定一个更大的物体列表，这样的话整体的泛化能力就下降了。有了这个物体的概括之后，然后再通过LLM，来确定这个物体应该放到哪（”recycling bin”, “plastic storage box”, “black storage box”, “sofa”, “drawer”）以及以怎样的方式放（place、toss）。</p>
<p><a class="link"   href="https://zhuanlan.zhihu.com/p/664959506" >Robotics+LLM系列TidyBot家务机器人<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="⭐ReKep-Spatio-Temporal-Reasoning-of-Relational-Keypoint-Constraints-for-Robotic-Manipulation"><a href="#⭐ReKep-Spatio-Temporal-Reasoning-of-Relational-Keypoint-Constraints-for-Robotic-Manipulation" class="headerlink" title="⭐ReKep: Spatio-Temporal Reasoning of Relational Keypoint Constraints for Robotic Manipulation"></a>⭐ReKep: Spatio-Temporal Reasoning of Relational Keypoint Constraints for Robotic Manipulation</h2><p><a href="https://rekep-robot.github.io/">ReKep: Spatio-Temporal Reasoning of Relational<br>Keypoint Constraints for Robotic Manipulation</a></p>


	<div class="row">
    <embed src="./2.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p>文提出了一种名为 Relational Keypoint Constraints (ReKep) 的方法，用于表示机器人操作中的约束条件。传统的操作任务往往需要明确的约束定义，而 ReKep 通过将 3D 关键点映射为数值成本的 Python 函数，能够灵活适应不同的任务，并实现实时优化。通过这种方法，机器人可以在多任务场景中执行复杂操作，而无需手动标注或特定的环境数据模型。此外，作者设计了一个自动化流程，利用大型视觉模型和视觉语言模型，从自由形式的语言指令和 RGB-D 数据中自动生成 ReKep。系统在单臂和双臂平台上的实验表明，该方法在多阶段、野外、多手臂协作和动态响应任务中的有效性。</p>
<p>ReKep 的核心是基于 3D 关键点的约束表示。关键点是物体或机器人的特定位置（例如，抓手的末端或物体的边缘），这些关键点之间的空间关系被定义为 Python 函数，表示约束条件。</p>
<ul>
<li>关键点：在环境中定义的一组语义相关的 3D 点，通常与任务目标相关，例如茶壶的把手、壶嘴、杯子的位置。</li>
<li>约束函数：这些函数基于关键点之间的几何关系（例如，距离、角度、相对位置）来计算数值成本。约束满足时，成本接近于零，否则约束不成立。</li>
</ul>
<p>这些关键点之间的关系可以通过简单的几何计算表达，例如欧几里得距离或点积。这些关系不仅可以在平面上定义，还可以定义在 3D 空间内，适应复杂的操作场景。</p>
<p>ReKep 将操作任务分解为多个阶段，每个阶段由两类约束定义：</p>
<ul>
<li>子目标约束（Sub-goal Constraints）：这些约束定义了每个阶段需要达到的目标位置。例如，在倒茶任务中，第一阶段的子目标约束是让抓手接近茶壶的把手。</li>
<li>路径约束（Path Constraints）：这些约束定义了在完成某个子目标时必须持续满足的条件。例如，在移动茶壶过程中，壶嘴必须保持与杯子对齐以避免洒水。</li>
</ul>
<p>通过这些约束，ReKep 可以确保机器人在执行复杂操作时不仅能达到每个阶段的目标，还能确保操作过程中的中间行为是安全和有效的。</p>
<h2 id="⭐In-Hand-Singulation-and-Scooping-Manipulation-with-a-5-DOF-Tactile-Gripper"><a href="#⭐In-Hand-Singulation-and-Scooping-Manipulation-with-a-5-DOF-Tactile-Gripper" class="headerlink" title="⭐In-Hand Singulation and Scooping Manipulation with a 5 DOF Tactile Gripper"></a>⭐In-Hand Singulation and Scooping Manipulation with a 5 DOF Tactile Gripper</h2>

	<div class="row">
    <embed src="./3.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p><a class="link"   href="https://www.youtube.com/watch?v=6c1AyeaGjbk" >In-Hand Singulation and Scooping Manipulation with a 5 DOF Tactile Gripper<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p> 这篇文章讨论了在机器人操作任务中，灵巧性是一个关键要求，通常需要具有多个自由度（DoF）的抓手。然而，多自由度的抓手虽然能完成复杂任务，但也增加了操作的复杂性。本文介绍了一种带有触觉传感器的两指抓手设计，具有五个自由度，并结合 GelSight 触觉传感器，以提高操作控制精度。文中通过两个实验评估了该抓手的性能：1）从颗粒物中提取、分离和分类不同物体，2）在狭小环境中执行信用卡的铲取和精确插入操作。实验结果表明，该方法在分离和分类任务中，尤其是对球形物体，达到了 94.3% 的高成功率，而在信用卡铲取和插入任务中，成功率达到了 100%。</p>
<h2 id="⭐RGBManip-Monocular-Image-based-Robotic-Manipulation-through-Active-Object-Pose-Estimation"><a href="#⭐RGBManip-Monocular-Image-based-Robotic-Manipulation-through-Active-Object-Pose-Estimation" class="headerlink" title="⭐RGBManip: Monocular Image-based Robotic Manipulation through Active Object Pose Estimation"></a>⭐RGBManip: Monocular Image-based Robotic Manipulation through Active Object Pose Estimation</h2><p><a class="link"   href="https://rgbmanip.github.io/" >RGBManip: Monocular Image-based Robotic Manipulation through Active Object Pose Estimation<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>


	<div class="row">
    <embed src="./4.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p>这篇文章主要探讨了在机器人操作中常用的两种视觉感知方式：RGB 图像和点云数据。虽然点云可以提供 3D 信息，但由于技术限制，点云数据常常面临稀疏采样和噪声的问题。相比之下，RGB 图像能提供丰富的纹理信息，但缺乏深度和 3D 空间信息，这对机器人操作非常关键。</p>
<p>为了克服这些问题，作者提出了一种仅基于图像的机器人操作框架。该框架利用安装在机器人抓取器上的单目相机，通过相机随抓取器移动从多个视角感知物体，从而估计物体的 6D 姿态（即位置和方向）。这种方法虽然通过多视角提高了姿态估计的准确性，但也增加了操作时间。为了解决这个权衡问题，作者采用了强化学习策略来平衡操作效率和姿态估计的准确性。实验结果表明，该方法在仿真和实际环境中均表现出色。</p>
<p>文中使用了一种常见的强化学习算法——Proximal Policy Optimization (PPO) 来训练全局调度策略。PPO 是一种高效且稳定的强化学习方法，通过不断优化策略来改进机器人在不同视角之间的切换决策，使其能够更好地权衡感知精度和操作效率。</p>
<p>该强化学习应用的算法, 全局调度策略（Global Scheduling Policy），该策略是一个高层次的决策机制。其主要功能是在机器人探索环境或开始操作之间做出决策。它根据已经累积的环境信息和主动感知模块的反馈，决定是否需要进一步探索新视角。若选择探索，策略会为机械臂指定 6D 外参参数，调整相机位置以获取图像；若决定停止探索，机器人将进入操作模式，继续执行任务。</p>
<h2 id="Plan-Seq-Learn-Language-Model-Guided-RL-for-Solving-Long-Horizon-Robotics-Tasks"><a href="#Plan-Seq-Learn-Language-Model-Guided-RL-for-Solving-Long-Horizon-Robotics-Tasks" class="headerlink" title="Plan-Seq-Learn: Language Model Guided RL for Solving Long Horizon Robotics Tasks"></a>Plan-Seq-Learn: Language Model Guided RL for Solving Long Horizon Robotics Tasks</h2><p>2024 ICLR</p>
<p><a class="link"   href="https://mihdalal.github.io/planseqlearn/" >Plan-Seq-Learn: Language Model Guided RL for Solving Long Horizon Robotics Tasks<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>


	<div class="row">
    <embed src="./8.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p>现有的LLM方法能够给机器人提供high-level的planning. 但是这些方法依赖预定义的技能库(抓取, 放置, 拉动, 推动). LLM无法解决如何设计或学习这些技能, 尤其是在长时序任务中.</p>
<p>本文提出了一个Plan-Seq-Learn框架, 利用LLM的高层次策略引导强化学习(RL)来解决机器人的控制任务.</p>
<p>文中提出一个观点, LLM与RL优势互补, LLMs可以借助互联网规模的知识将长时序任务分解为可实现的子目标，但它们缺乏生成低层次控制策略的能力；而RL则擅长发现复杂的控制行为，但在长时序推理方面表现不足。</p>
<p>PSL框架的创新在于, 它不依赖任何预定义的技能库, 而是通过运动规划控制跟踪LLM的计划, 并通过RL学习低层次的控制技能.</p>
<ol>
<li>Plan（计划）阶段：由LLM生成高层次任务分解计划<br>在“NutAssembly”任务中，首先由LLM生成任务的高层次计划。这一步的目的是将任务分解为多个可执行的子步骤。对于这个任务，LLM可能生成如下计划：</li>
</ol>
<ul>
<li>抓取金色螺母</li>
<li>将金色螺母放置在金色螺栓上</li>
<li>抓取银色螺母</li>
<li>将银色螺母放置在银色螺栓上</li>
</ul>
<p>原文示例：</p>
<blockquote>
<p>Plan: [(“gold nut”,“grasp”), (“gold peg”, “place”), (“silver nut”, “grasp”), (“silver peg”, “place”)]​。</p>
</blockquote>
<p>这个计划展示了任务的四个关键步骤，分别是抓取和放置两个螺母。计划通过自然语言描述任务的各个阶段，供后续模块执行。</p>
<ol start="2">
<li>Seq（序列）阶段：运动规划追踪任务计划<br>在这一步中，PSL框架使用视觉引导的运动规划模块（Seq）将计划的每个阶段转化为机器人要达到的具体目标位置。具体来说：</li>
</ol>
<p>系统通过视觉系统识别场景中的目标对象，如“金色螺母”和“金色螺栓”。<br>通过视觉估计物体的三维坐标，计算机器人臂的目标姿态（q_target）。<br>运动规划算法（如AIT*）计算从机器人当前姿态到目标姿态的无碰撞路径，使机器人到达目标区域。<br>这一步主要是通过视觉引导和运动规划来执行无接触的运动，比如将机器人移动到金色螺母的上方，准备抓取。</p>
<p>原文说明：</p>
<blockquote>
<p>Vision and Estimation: Using a text label of the target region of interest from the high-level plan and observation Oglobal, we need to compute a target robot state qtarget for the motion planner to achieve​。</p>
</blockquote>
<p>通过运动规划模块，机器人能够在空间中移动到正确的目标区域，比如移动到金色螺母上方。</p>
<ol start="3">
<li>Learn（学习）阶段：强化学习策略进行低层次控制<br>当机器人到达目标区域（如金色螺母上方）后，系统开始执行与环境的接触互动，这时RL模块开始发挥作用。RL策略负责学习如何抓取螺母、如何精确地放置螺母在螺栓上等接触任务。</li>
</ol>
<p>强化学习（RL）模型通过观察局部的环境信息（如机器人手臂末端的摄像头视角）执行动作。<br>机器人通过与环境的反复交互，逐渐学习到如何精确操控物体，如抓取螺母、放置到螺栓上。<br>每次成功执行后，系统通过奖励函数反馈调整策略，逐渐提高成功率。<br>原文说明：</p>
<blockquote>
<p>Once the agent steps through the plan and achieves states near target regions of interest, it needs to train an RL policy πθ to learn low-level control for solving the task. We train πθ using DRQ-v2 Yarats et al. (2021), a SOTA visual model-free RL algorithm​。</p>
</blockquote>
<p>通过RL策略，PSL能够处理需要精细控制的接触任务，比如如何准确抓住螺母并将其对准螺栓。</p>
]]></content>
      <categories>
        <category>Scientific Research</category>
      </categories>
  </entry>
  <entry>
    <title>电机原理与驱动设计</title>
    <url>/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h2 id="有刷电机原理"><a href="#有刷电机原理" class="headerlink" title="有刷电机原理"></a>有刷电机原理</h2><p>电机最底层的物理原理来源于电流的磁效应；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_1.png" class="" width="400">

<p>利用电磁铁的原理，得到直流有刷电机的<strong>转子</strong>，可以绕轴心转动；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_2.png" class="" width="400">

<p>两块弧形永磁体放置在左右两边，称为<strong>定子</strong>；</p>
<p>由于异性相吸，同性相斥，使得电机快速转到异性相吸的位置。</p>
<p>利用电刷进行换相，切换电流方向；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_3.png" class="" width="400">

<p>但由于双极容易平衡，容易锁住无法启动，因此转子都是奇数线圈。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_4.png" class="" width="400">

<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_6.png" class="" width="400">

<p>电刷限制了电机的转速，也容易造成磨损，电火花的问题；因此为了更加高速的旋转，则把电刷去掉，即无刷电机；</p>
<h2 id="无刷电机原理"><a href="#无刷电机原理" class="headerlink" title="无刷电机原理"></a>无刷电机原理</h2><img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_5.png" class="" width="400">

<p>有感无刷电机采用永磁体作为转子，电磁铁作为定子，还需要霍尔原件来感受转子的状态和位置；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_7.png" class="" width="400">

<p>一般的霍尔器件N级激发为高电平，S级激发低电平，如下图；</p>
<center><img lazyload="" src="/images/loading.svg" data-src="gif_1.gif" width="800"></center>

<ul>
<li>当N级同时激活两块霍尔元件时，控制电路中的两个mos管导通，两个线圈流入电流产生不同极性的磁场；</li>
<li>当N级只激活一块霍尔元件时，控制电路切换开关，另外两个线圈导通，继续推动转子转动，使其循环往复；<br>（感觉像是人坐在一头猪上，吊着胡萝卜吸引猪使得人可以一直前进）</li>
</ul>
<p>利用pwm波可以控制电机的转速，不同的占空比可以得到不同的电机速度，这是因为输入的电能越多，转化为的机械能就越多；PWM波的占空比越高，它的速度也越快；</p>
<p>在实际应用中，应用比较多的时三相无刷直流电机，这也是为什么一般的无刷电机有三条线的缘故；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_8.png" class="" width="400">

<p>除了三相无刷电机，还有单相无刷电机，通过霍尔传感器来判断转子之后，然后用4个mos管组成的H桥电路来改变电流方向；</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_9.png" class="" width="400">

<p>在同等体积下，单相无刷电机拥有更低的成本，而三相电机则拥有更高的功率；</p>

  <div class="note p-4 mb-4 rounded-small primary">
    <p>💡由于霍尔传感器容易受环境影响，可以使用磁场改变之后在线圈中产生的的反电动势，再将该反生电动势的电流通过单片机检测电压的多少，但是该方法则需要复杂的FOC控制，才能实现对电机精确的控制。</p>

  </div>

<h2 id="BLDC与PMSM"><a href="#BLDC与PMSM" class="headerlink" title="BLDC与PMSM"></a>BLDC与PMSM</h2><p>无刷电机可以分为<strong>无刷直流电机 BLDC</strong>和<strong>永磁同步电机 PMSM</strong>；结构大同小异，主要区别在于线圈绕组不同导致的一些特性差异。</p>
<p>由于转子在磁场中只有一定数量的稳定状态，在上述动画中，显然我们能发现电机之后6个稳定状态，因此事实上电机的旋转不是均匀平滑的吗，存在扭矩转动。</p>

  <div class="note p-4 mb-4 rounded-small default">
    <p>没有通电的时候可以用手转一下无刷电机，会感受到这种“颗粒感”。</p>

  </div>

<ul>
<li>从硬件上解决这个问题，就是增加极对数，即磁铁对数，拆开航模的电机我们都能发现里面有很多组线圈和很多个磁铁，这样就是<strong>BLDC</strong>；</li>
<li>从软件上解决这个问题，通过产生正弦波来驱动电机，就是<strong>PMSM</strong>；</li>
</ul>
<h3 id="驱动电路"><a href="#驱动电路" class="headerlink" title="驱动电路"></a>驱动电路</h3><p>三相逆变电路主要用到场效应管，这里先复习一下场效应管的原理：</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_10.png" class="" width="500">

<p>初始状态如下，金属薄板与半导体之间有一层二氧化硅，从左到右分别为源极，栅极，漏极；</p>
<ol>
<li>由于漏极是正电，源极和栅极都是负电，PN结不可反向通电，因此该管无电流流动，属于关闭状态；<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_11.png" class="" width="500"></li>
<li>当栅极是正电时，栅极的金属通过中间的二氧化硅层形成电容激发电场，P型半导体靠近栅极处在电容作用下聚集大量电子；</li>
<li>在栅极处，P型半导体的电子多于N型半导体，电子开始反向扩散，此时原来的PN结变为<strong>反型层</strong>；</li>
<li>在源极处，由于连接负极，电子无法扩散，反而源源不断向其他两极输入电子；</li>
<li>漏极连接正电，因此电子不断从漏极处流出；</li>
<li>最终，在栅极的控制下，源极和漏极形成通电回路；</li>
<li>正电为1，负电为0，则可以通过输入0和1到栅极处控制电路通断；</li>
</ol>


<p>三相逆变电路具体实现是由半桥MOS电路来制作的，<strong>半桥电路</strong>由两个MOS管组成上桥臂和下桥臂，中间引出一条输出线；</p>
<p>3个半桥电路就可以组成一个三相逆变电路，每个半桥引出一根输出线与无刷电机相连，组成最基本的无刷驱动电路。</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/fig_13.png" class="" width="800">

<p>如图，通过霍尔传感器或者pwm信号连接到控制电路，再连接到相应MOS管的栅极，就能控制特定线圈的通电，从而控制电机转动；</p>
<h2 id="FOC原理与设计"><a href="#FOC原理与设计" class="headerlink" title="FOC原理与设计"></a>FOC原理与设计</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><p><strong>有感FOC (Sensor-Based FOC)</strong></p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/1.png" class="" width="800">

<p>控制器通过接收传感器的电流和角度信号, 再与主控发出的信号作为输入, 通过运算得出当前电机应该达到的转速, 位置和扭矩, 并将其转换为对应的电信号, 控制电机按照我们的要求转动.</p>
<p>foc带来的精准控制主要包括:</p>
<ul>
<li>以任意的速度旋转</li>
<li>停留在任意的位置</li>
<li>任意的调节它的扭矩</li>
</ul>
<p>因此, 需要一个方向和强度都可控的磁场;</p>
<p>通过角度传感器来检测当前转子的角度, 然后产生一个永远垂直与当前转子磁场方向的磁场; </p>
<p>此时产生的扭矩最大, 效率也是最高的;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/7.png" class="" width="800">

<blockquote>
<p>可以理解为胡萝卜理论, 胡萝卜挂在驴前面, 永远牵着驴走, 但是驴永远够不到胡萝卜;</p>
</blockquote>
<p>最后通过控制磁场强度, 就可以任意控制无刷电机的位置, 速度和扭矩;</p>
<p>实际上, 我们会用电流来控制磁场强度, 因为线圈中电流和磁场方向一致, 大小成比例;</p>
<p>加入PID算法, 形成完整的foc控制;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/8.png" class="" width="800">

<p>系统根据当前位置和目标位置, 得到目标速度, 再根据当前速度和目标速度, 得到目标电流, 再根据当前电流和目标电流, 通过两个数学变换得到三相逆变电路的控制信号, 最终输入电机;</p>
<p>完整的foc拓扑图如下:</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/9.png" class="" width="800">

<p><strong>Clark变换</strong></p>
<p>从无刷电机的基本结构, 我们知道, 无刷电机的定子至少需要三个线圈, 多个线圈的组合也可以简化为三个方向的线圈, 这三个方向的线圈产生三个方向的磁场合成一个方向的磁场;</p>
<p>由于电流和磁场方向相同, 大小成比例, 并且合成的磁场方向永远垂直于转子的磁场方向, 在一个匀速旋转的过程中, 磁场随时间的表示乃至控制磁场的电流必须是正弦波;</p>
<p>显然, 由于三个线圈磁场方向相隔120°; 因此, 输入电机三相线中正弦交流电的相位差为120°; 如下图所示:</p>
<p>从几何的角度理解, 就是二维平面上, 三个相差120°的基向量, 通过线性组合得到一个随时间匀速旋转的矢量向量, 这三个基向量的系数, 就是三个相位差为120°的正弦波;</p>

  <div class="note p-4 mb-4 rounded-small primary">
    <p>💡可以形象的理解, 当一个匀速旋转的向量<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="3.218ex" height="1.904ex" role="img" focusable="false" viewBox="0 -830.4 1422.3 841.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" transform="translate(499,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(874,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.197ex" height="1.02ex" role="img" focusable="false" viewBox="0 -441 529 451"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>表示角速度的时候, 分解为x轴和y轴的基向量时, 会得到<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.253ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2764 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(469,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(814,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1414,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1803,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2375,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>和<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.192ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2737 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(433,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(918,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(1387,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1776,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(2348,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>, 这两个波相位差刚好时90度, 当三个基向量相隔120度时, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.666ex" height="1.848ex" role="img" focusable="false" viewBox="0 -805.6 1178.3 816.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" transform="translate(499,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(529,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></g></g></svg></mjx-container>分解为三个大小随时间变化, 方向不变的向量, 一定是三个相位差为120°的正弦波.</p>

  </div>

<p>显然三个正弦波的电流环环相扣, 为了简化计算, 我们可以将三个正弦波的电流转换为一个直角坐标系下的矢量, 这个过程就是<strong>Clark变换</strong>;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/10.png" class="" width="800">

<p><strong>Park变换</strong></p>
<p><strong>SVPWM算法</strong></p>
<p>SVPWM会控制三个MOS管，使得三个线圈都有电流流过，这样可以不浪费电机的扭矩；</p>
<p>通过打开三个MOS管, 使得三个线圈合成一个更强的磁场来控制转子转动, 有六个方向的磁场, 通过组合两个相邻磁场得到;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/2.png" class="" width="800">

<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/3.png" class="" width="800">

<p>在一个时间周期内, 切换不同的三相逆变电路的组合, 不同三相逆变电路在一个时间周期内占据的时间比例不同, 从而控制磁场的方向;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/4.png" class="" width="800">

<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/5.png" class="" width="800">

<p>当只开桑面三个MOS管时, 线圈电压为零, 此时磁场会逐渐衰减为0(由于电感的存在, 电流会渐渐衰减);</p>
<p>在一个时间周期内, 插入磁场衰减为0的状态(死区), 调节时间占比, 就能改变磁场的强度;</p>
<img lazyload="" src="/images/loading.svg" data-src="/2023/09/08/%E7%94%B5%E6%9C%BA%E5%8E%9F%E7%90%86/6.png" class="" width="800">


<h3 id="驱动器设计"><a href="#驱动器设计" class="headerlink" title="驱动器设计"></a>驱动器设计</h3><p>由于foc需要大量的浮点运算, 这里不使用简单的stm32f103系列的单片机, 采用stm32f411带有fpu硬件加速的单片机, 能够进行高精度的浮点运算;</p>
<h2 id="无感FOC-Sensorless-FOC"><a href="#无感FOC-Sensorless-FOC" class="headerlink" title="无感FOC (Sensorless FOC)"></a>无感FOC (Sensorless FOC)</h2><p>无感foc通过电机本身的电气特性和控制算法来估算转子的位置和速度, 常用的方法有:</p>
<ul>
<li><strong>反电动势(Back-EMF)</strong><ul>
<li>基于转子运动产生的反电动势, 通过测量电机端电压和电流, 推算出转子位置和速度;</li>
<li>适用于中高速范围, 但在低速时反电动势较小, 估算精度下降.</li>
</ul>
</li>
<li><strong>模型预测与状态观测</strong><ul>
<li><strong>滑膜观测器(Sliding Mode Observer)</strong>, **相位锁环 (PLL, Phase-Locked Loop)**等方法, 建立电机的数学模型, 结合测量的电压和电流, 实时估算转自的位置和速度;</li>
</ul>
</li>
<li><strong>高频注入(High-Frequency Injection)</strong><ul>
<li>在电机驱动信号中叠加高频扰动信号, 通过分析电机响应来推算转子位置;</li>
<li>可在低速下提高位置估算精度, 但增加了系统的控制复杂性;</li>
</ul>
</li>
<li><strong>非线性磁链</strong><ul>
<li>磁链是指磁通量通过线圈的总量, 通常与电机的电流和磁场强度相关. 由于实际电机中, 铁心材料的饱和, 绕组结构等因素, 磁链与电流之间往往表现出非线性特性;</li>
<li>通过施加特定的电流或者电压波形, 激发电机的非线性磁特性, 使得磁链与电流之间产生可检测的非线性响应. 这些响应中包含了转子位置和速度的信息.</li>
</ul>
</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a class="link" href="https://zhuanlan.zhihu.com/p/72091265">无刷电机的工作原理，动图演示，一目了然<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1ig411S7gX/?spm_id_from=333.337.search-card.all.click&vd_source=5c8e073b8f94f9e61f07ae791a132eaf">有刷电机与无刷电机的原理，为什么无刷电机转的更快？<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1dc41137Gx/?spm_id_from=333.788.recommend_more_video.0&vd_source=5c8e073b8f94f9e61f07ae791a132eaf">底层原理极其简单，却很难造出精品！无刷直流电机的工作原理<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/helaisun/article/details/127156100">永磁同步电机（PMSM）<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV11V411m7rh/?spm_id_from=333.788.recommend_more_video.6&vd_source=5c8e073b8f94f9e61f07ae791a132eaf">TI公开课 永磁同步电机（PMSM）磁场定向控制（FOC）中文字幕<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://zhuanlan.zhihu.com/p/147659820">【自制FOC驱动器】深入浅出讲解FOC算法与SVPWM技术<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1XvtNeaE54/?spm_id_from=333.337.search-card.all.click&vd_source=3c842e78ba17ee7afd3375b35f554ca1">没有专业术语！新手小白也能看懂的FOC科普<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1dy4y1X7yx/?spm_id_from=333.337.search-card.all.click&vd_source=3c842e78ba17ee7afd3375b35f554ca1">【手把手教写FOC算法】1_起源，无刷电机概念与控制原理<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://www.bilibili.com/video/BV1wP4y167ao?spm_id_from=333.788.videopod.sections&vd_source=3c842e78ba17ee7afd3375b35f554ca1">从零开始自己编写FOC 算法篇：FOC和SVPWM<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
<li><p><a class="link" href="https://blog.csdn.net/qq_35947329/article/details/115483413">FOC入门教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Electronics and Embedded System</category>
      </categories>
  </entry>
  <entry>
    <title>通用麦轮底盘设计文档</title>
    <url>/2024/04/11/%E9%80%9A%E7%94%A8%E9%BA%A6%E8%BD%AE%E5%BA%95%E7%9B%98%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h2 id="硬件选型"><a href="#硬件选型" class="headerlink" title="硬件选型"></a>硬件选型</h2><p>电机选用众灵370总线直流有刷电机，包含编码器，参数如下：</p>
<ul>
<li>减速比：1：56</li>
<li>转速：178rpm</li>
<li>额定电压：7.4V(使用范围为6-8.4V)</li>
<li>额定电流：0.50A</li>
<li>扭矩：3.5N.m</li>
<li>编码器类型：霍尔AB相编码器</li>
<li>编码器线数：13线</li>
</ul>
<p><a class="link"   href="https://item.taobao.com/item.htm?id=588112233735&skuId=5116592929189&spm=a1z0d.6639537/tb.1997196601.4.8bb57484kA21wW" >购买链接<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="机械设计"><a href="#机械设计" class="headerlink" title="机械设计"></a>机械设计</h2><p>麦轮选型:<br>采用80mm直径的麦克纳姆轮，在178rpm的转速下，直线速度可达0.75m&#x2F;s，足以满足机器人的运动需求。</p>



<p>机械臂的yaw轴可以使用法兰轴承</p>
<p>使用打印嵌入轴承的做法，做一个杠铃的打印件，打印到一半的时候放入轴承</p>
<h2 id="电源管理设计"><a href="#电源管理设计" class="headerlink" title="电源管理设计"></a>电源管理设计</h2><p>小车的底盘采用can总线控制，设计一个pcb，用来搭载can通讯的芯片，然后与stm32f103通讯，实现底盘的控制。同时PCB包含了电源管理模块，可以接受7.4V的电源输入，输出5V和3.3V的电源。</p>
<p><a class="link"   href="https://item.taobao.com/item.htm?_u=b3hgjd528872&id=659735392980&spm=a1z09.2.0.0.63b22e8dOu1XHj" >购买链接<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Robotics</category>
      </categories>
  </entry>
  <entry>
    <title>树莓派语音交互助手笨笨</title>
    <url>/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/</url>
    <content><![CDATA[<blockquote>
<p>发布到知乎上！</p>
</blockquote>
<blockquote>
<p>该项目目标实现一个放置在工位上的智能语音助手，能够与其进行语音对话并且控制卧室家居；</p>
</blockquote>
<h2 id="snowboy语音唤醒"><a href="#snowboy语音唤醒" class="headerlink" title="snowboy语音唤醒"></a>snowboy语音唤醒</h2><p><a class="link"   href="https://github.com/Kitt-AI/snowboy/blob/master/README_ZH_CN.md" >Snowboy 唤醒词检测<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>根据官方的readme，配置环境；</p>
<p>这里采用的安装环境位RaspberryPi 4B；</p>
<p>克隆项目：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Kitt-AI/snowboy.git</span><br></pre></td></tr></table></figure></div>

<h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><ul>
<li>SWIG<ul>
<li>SWIG（Simplified Wrapper and Interface Generator）是一个软件开发工具，用来将C&#x2F;C++代码连接到各种高级编程语言，包括Python、Java、C#等；</li>
</ul>
</li>
<li>python-pyaudio<ul>
<li>pyAudio是一个python库，用于处理音频流，它提供了音频录制和播放的功能， python3-pyaudio是pyAudio的python3版本；</li>
</ul>
</li>
<li>sox<ul>
<li>Sound eXchange，用于处理音频文件；</li>
</ul>
</li>
<li>Atlas<ul>
<li>ATLAS（Automatically Tuned Linear Algebra Software）是一个自动优化的矩阵计算库。它提供了高性能的线性代数计算能力，包括矩阵乘法、求逆、分解等操作；</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install swig python3-pyaudio sox</span><br><span class="line">sudo apt-get install libatlas-base-dev</span><br></pre></td></tr></table></figure></div>

<h3 id="测试demo"><a href="#测试demo" class="headerlink" title="测试demo"></a>测试demo</h3><p>配置好环境之后，进入项目，修改两个bug；</p>
<ol>
<li>修改snowboydecoder.py库的引用</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> snowboy/examples/Python3</span><br><span class="line">nano snowboydecoder.py</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_3.png"
                      class="" width="400"
                >

<p>将<code>from . import snowboydetect</code>修改为<code>import snowboydetect</code></p>
<ol start="2">
<li>修改Makefile中libsnowboy-detect.a文件</li>
</ol>
<p>如果不修改，会出现以下报错：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_1.png"
                      class="" width="600"
                >

<p>由于<code>Makefile</code>中的<code>libsnowboy-detect.a</code>文件默认x86-64架构的Ubuntu系统编译版本，与我的树莓派架构不同；</p>
<p>通过以下命令得到树莓派的架构为aarch64</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br></pre></td></tr></table></figure></div>
<p>在目录<code>/snowboy/lib/aarch64-ubuntu1604</code>中找到了<code>libsnowboy-detect.a</code>文件，于是修改<code>Makefile</code>：</p>
<div class="code-container" data-rel="Makefile"><figure class="iseeu highlight makefile"><table><tr><td class="code"><pre><span class="line">SNOWBOYDETECTLIBFILE = <span class="variable">$(TOPDIR)</span>/lib/ubuntu64/libsnowboy-detect.a</span><br></pre></td></tr></table></figure></div>
<p>修改为</p>
<div class="code-container" data-rel="Makefile"><figure class="iseeu highlight makefile"><table><tr><td class="code"><pre><span class="line">SNOWBOYDETECTLIBFILE = <span class="variable">$(TOPDIR)</span>/lib/aarch64-ubuntu1604/libsnowboy-detect.a</span><br></pre></td></tr></table></figure></div>
<p>在该目录下<code>/snowboy/swig/Python3</code>编译：<code>make</code><br>得到<code>snowboydetect.py</code>和<code>_snowboydetect.so</code>两个文件；</p>
<p>进入示例文件夹：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> snowboy/examples/Python3</span><br><span class="line">python3 demo.py resources/models/snowboy.umdl</span><br></pre></td></tr></table></figure></div>
<p>对着麦克风说“snowboy!”<br>回应如下即测试成功:</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_2.png"
                      class="" width="500"
                >

<h3 id="录制自己的唤醒词"><a href="#录制自己的唤醒词" class="headerlink" title="录制自己的唤醒词"></a>录制自己的唤醒词</h3><p><a class="link"   href="https://snowboy.hahack.com/" >Snowboy Personal Wake Word Recorder<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>录入三遍音频，给模型命名，即可得到<code>.pmdl</code>文件；（这里是<code>Stupid.pmdl</code>）</p>
<p>如果是通过ssh连接的树莓派，通过以下命令传输文件（本机是win11）</p>
<div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">scp C:\Users\hwx_pc\Downloads\Stupid.pmdl hwx_pi@192.168.3.232:/home/hwx_pi/snowboy/examples/Python3</span><br></pre></td></tr></table></figure></div>
<p>在示例目录下执行命令进行测试：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> snowboy/examples/Python3</span><br><span class="line">python demo.py Stupid.pmdl</span><br></pre></td></tr></table></figure></div>

<h3 id="Python-API"><a href="#Python-API" class="headerlink" title="Python API"></a>Python API</h3><p>这个是<code>demo.py</code>的源代码，</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> snowboydecoder</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line">interrupted = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">signal_handler</span>(<span class="params">signal, frame</span>):</span><br><span class="line">    <span class="keyword">global</span> interrupted</span><br><span class="line">    interrupted = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">interrupt_callback</span>():</span><br><span class="line">    <span class="keyword">global</span> interrupted</span><br><span class="line">    <span class="keyword">return</span> interrupted</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: need to specify model name&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Usage: python demo.py your.model&quot;</span>)</span><br><span class="line">    sys.exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">model = sys.argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># capture SIGINT signal, e.g., Ctrl+C</span></span><br><span class="line">signal.signal(signal.SIGINT, signal_handler)</span><br><span class="line"></span><br><span class="line">detector = snowboydecoder.HotwordDetector(model, sensitivity=<span class="number">0.5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Listening... Press Ctrl+C to exit&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line">detector.start(detected_callback=snowboydecoder.play_audio_file, <span class="comment"># 重新绑定detected_callback</span></span><br><span class="line">               interrupt_check=interrupt_callback,</span><br><span class="line">               sleep_time=<span class="number">0.03</span>)</span><br><span class="line"></span><br><span class="line">detector.terminate()</span><br></pre></td></tr></table></figure></div>
<p>重新绑定detected_callback所对应的函数，即可实现其他动作。</p>
<h2 id="语音识别ASR-sherpa-ncnn"><a href="#语音识别ASR-sherpa-ncnn" class="headerlink" title="语音识别ASR: sherpa-ncnn"></a>语音识别ASR: sherpa-ncnn</h2><p><a class="link"   href="https://k2-fsa.github.io/sherpa/intro.html" >sherpa-ncnn<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>采用ncnn框架下的sherpa-ncnn，是一个轻量级的语音识别模型，支持中英文双语言以及离线识别。</p>
<h3 id="配置ncnn环境"><a href="#配置ncnn环境" class="headerlink" title="配置ncnn环境"></a>配置ncnn环境</h3><p><a class="link"   href="https://k2-fsa.github.io/sherpa/ncnn/install/index.html" >Installation<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/k2-fsa/sherpa-ncnn</span><br><span class="line"><span class="built_in">cd</span> sherpa-ncnn</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake \</span><br><span class="line">  -DCMAKE_BUILD_TYPE=Release \</span><br><span class="line">  -DCMAKE_C_FLAGS=<span class="string">&quot;-march=armv8-a&quot;</span> \</span><br><span class="line">  -DCMAKE_CXX_FLAGS=<span class="string">&quot;-march=armv8-a&quot;</span> \</span><br><span class="line">  ..</span><br><span class="line">make -j4</span><br></pre></td></tr></table></figure></div>
<p>输入命令<code>cmake...</code>之后，提示在<code>./build/bin</code>中不能找到<code>sherpa-ncnn-alsa</code>，则需要进行以下步骤：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/sherpa-ncnn</span><br><span class="line">sudo apt-get install alsa-utils libasound2-dev</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"><span class="built_in">rm</span> CMakeCache.txt <span class="comment"># Important, remove the cmake cache file</span></span><br><span class="line">make -j</span><br></pre></td></tr></table></figure></div>
<p>之后就可以找到对应的文件了。</p>
<p>检查，如果出现以下结果，则说明编译成功：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -lh bin/</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">total 13M</span><br><span class="line">-rwxr-xr-x 1 kuangfangjun root 6.5M Dec 18 11:31 sherpa-ncnn</span><br><span class="line">-rwxr-xr-x 1 kuangfangjun root 6.5M Dec 18 11:31 sherpa-ncnn-microphone</span><br></pre></td></tr></table></figure></div>

<h3 id="下载预训练大模型"><a href="#下载预训练大模型" class="headerlink" title="下载预训练大模型"></a>下载预训练大模型</h3><p>下载模型之前，需要提前安装git-lfs</p>
<p>由于Huggingface国内无法访问，需要全局代理之后才能访问，为了方便，不需要在树莓派中另外设置科学上网，因此利用ssh的<code>scp</code>将文件从windows传输到树莓派中。</p>
<p>在windows下<code>git bash</code>任意一个目录，执行以下命令：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">GIT_LFS_SKIP_SMUDGE=1 git <span class="built_in">clone</span> https://huggingface.co/marcoyang/sherpa-ncnn-streaming-zipformer-zh-14M-2023-02-23</span><br><span class="line"><span class="built_in">cd</span> sherpa-ncnn-streaming-zipformer-zh-14M-2023-02-23</span><br><span class="line">git lfs pull --include <span class="string">&quot;*.bin&quot;</span></span><br><span class="line">scp -r sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13 hwx_pi@192.168.3.232:/home/hwx_pi/sherpa-ncnn</span><br></pre></td></tr></table></figure></div>

<p>检查是否下载成功：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13 fangjun$ <span class="built_in">ls</span> -lh *.bin</span><br></pre></td></tr></table></figure></div>
<p>生成结果</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">-rw-r--r--  1 fangjun  staff   6.1M Feb 14 10:08 decoder_jit_trace-pnnx.ncnn.bin</span><br><span class="line">-rw-r--r--  1 fangjun  staff   121M Feb 14 10:09 encoder_jit_trace-pnnx.ncnn.bin</span><br><span class="line">-rw-r--r--  1 fangjun  staff   7.0M Feb 14 10:08 joiner_jit_trace-pnnx.ncnn.bin</span><br></pre></td></tr></table></figure></div>
<p>测试：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/sherpa-ncnn</span><br><span class="line"></span><br><span class="line">./build/bin/sherpa-ncnn-microphone \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/tokens.txt \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/encoder_jit_trace-pnnx.ncnn.param \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/encoder_jit_trace-pnnx.ncnn.bin \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/decoder_jit_trace-pnnx.ncnn.param \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/decoder_jit_trace-pnnx.ncnn.bin \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/joiner_jit_trace-pnnx.ncnn.param \</span><br><span class="line">  ./sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13/joiner_jit_trace-pnnx.ncnn.bin \</span><br><span class="line">  2 \</span><br><span class="line">  greedy_search</span><br></pre></td></tr></table></figure></div>

<p><code>Ctrl+C</code>之后会出现语音识别成功的文本。</p>
<h3 id="Python-API-1"><a href="#Python-API-1" class="headerlink" title="Python API"></a>Python API</h3><p>首先要安装python3的依赖</p>
<p>运用文档的method 4可以成功安装python3依赖</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> sherpa-ncnn</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake \</span><br><span class="line">  -D SHERPA_NCNN_ENABLE_PYTHON=ON \</span><br><span class="line">  -D SHERPA_NCNN_ENABLE_PORTAUDIO=OFF \</span><br><span class="line">  -D BUILD_SHARED_LIBS=ON \</span><br><span class="line">  -DCMAKE_C_FLAGS=<span class="string">&quot;-march=armv8-a&quot;</span> \</span><br><span class="line">  -DCMAKE_CXX_FLAGS=<span class="string">&quot;-march=armv8-a&quot;</span> \</span><br><span class="line">  ..</span><br><span class="line"></span><br><span class="line">make -j2</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PYTHONPATH=<span class="variable">$PWD</span>/lib:<span class="variable">$PWD</span>/../sherpa-ncnn/python:<span class="variable">$PYTHONPATH</span></span><br></pre></td></tr></table></figure></div>
<p>检查是否安装成功；</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">python3 -c <span class="string">&quot;import sherpa_ncnn; print(sherpa_ncnn.__file__)&quot;</span></span><br><span class="line">python3 -c <span class="string">&quot;import _sherpa_ncnn; print(_sherpa_ncnn.__file__)&quot;</span></span><br></pre></td></tr></table></figure></div>
<p>如果有具体的路径，则说明安装成功。</p>
<p>在安装python库sounddevice中发现，在终端不能直接使用<code>pip install sounddevice</code>，会发生如下报错：</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_6.png"
                      class="" width="600"
                >

<p>这是由于树莓派是由系统外部管理，意味着系统禁止使用pip直接在全局环境安装python包，避免与系统管理的Python软件包发生冲突。此时需要创建一个虚拟环境：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">python3 -m venv ~/python_venv <span class="comment"># 需要等一会</span></span><br><span class="line"><span class="built_in">source</span> ~/python_venv/bin/activate</span><br></pre></td></tr></table></figure></div>
<p>此时终端前面会出现<code>(python_venv)</code>，表示虚拟环境已经激活；<br>由于pip被墙了，因此需要用镜像源来进行安装，这里用清华源；</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple sounddevice</span><br></pre></td></tr></table></figure></div>

<p><strong>Python脚本如果包含虚拟环境的库，必须在虚拟环境激活后才能运行python脚本；</strong></p>
<p>如果要退出虚拟环境，在终端输入<code>deactivate</code>即可退出。</p>
<p>利用<code>pip list</code>来检查环境中是否包含sounddevice库和sherpa-ncnn包。</p>
<p>测试脚本<code>asr_test.py</code>：</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> sounddevice <span class="keyword">as</span> sd</span><br><span class="line">    <span class="keyword">import</span> sherpa_ncnn</span><br><span class="line"><span class="keyword">except</span> ImportError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Please install sounddevice first. You can use&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  pip install sounddevice&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;to install it&quot;</span>)</span><br><span class="line">    sys.exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># replace the model files</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_recognizer</span>():</span><br><span class="line">    <span class="comment"># 使用绝对路径定位模型文件</span></span><br><span class="line">    base_path = <span class="string">&quot;/home/hwx_pi/sherpa-ncnn/sherpa-ncnn-streaming-zipformer-bilingual-zh-en-2023-02-13&quot;</span></span><br><span class="line">    recognizer = sherpa_ncnn.Recognizer(</span><br><span class="line">        tokens=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/tokens.txt&quot;</span>,</span><br><span class="line">        encoder_param=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/encoder_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        encoder_bin=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/encoder_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        decoder_param=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/decoder_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        decoder_bin=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/decoder_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        joiner_param=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/joiner_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        joiner_bin=<span class="string">f&quot;<span class="subst">&#123;base_path&#125;</span>/joiner_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        num_threads=<span class="number">4</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> recognizer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Started! Please speak&quot;</span>)</span><br><span class="line">    recognizer = create_recognizer()</span><br><span class="line">    sample_rate = recognizer.sample_rate</span><br><span class="line">    samples_per_read = <span class="built_in">int</span>(<span class="number">0.1</span> * sample_rate)  <span class="comment"># 0.1 second = 100 ms</span></span><br><span class="line">    last_result = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> sd.InputStream(</span><br><span class="line">        channels=<span class="number">1</span>, dtype=<span class="string">&quot;float32&quot;</span>, samplerate=sample_rate</span><br><span class="line">    ) <span class="keyword">as</span> s:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            samples, _ = s.read(samples_per_read)  <span class="comment"># a blocking read</span></span><br><span class="line">            samples = samples.reshape(-<span class="number">1</span>)</span><br><span class="line">            recognizer.accept_waveform(sample_rate, samples)</span><br><span class="line">            result = recognizer.text</span><br><span class="line">            <span class="keyword">if</span> last_result != result:</span><br><span class="line">                last_result = result</span><br><span class="line">                <span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    devices = sd.query_devices()</span><br><span class="line">    <span class="built_in">print</span>(devices)</span><br><span class="line">    default_input_device_idx = sd.default.device[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Use default device: <span class="subst">&#123;devices[default_input_device_idx][<span class="string">&quot;name&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        main()</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> asr_test</span><br><span class="line">python asr_test.py</span><br></pre></td></tr></table></figure></div>
<p>运行脚本后能够实时识别说话的内容。</p>
<h2 id="Mqtt协议通信"><a href="#Mqtt协议通信" class="headerlink" title="Mqtt协议通信"></a>Mqtt协议通信</h2><p>采用Mqtt协议进行通信，以树莓派作为Mqtt Broker，ESP32作为Mqtt Client。</p>
<p>Client通过订阅topic，向Broker发送消息，同时从Broker上接收消息。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_5.png"
                      class="" width="600"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/11/02/%E8%AF%AD%E9%9F%B3%E4%BA%A4%E4%BA%92%E5%8A%A9%E6%89%8BEric/fig_4.png"
                      class="" width="600"
                >

<p>关于Mqtt的详细介绍：</p>
<p><a class="link"   href="https://randomnerdtutorials.com/what-is-mqtt-and-how-it-works/" >What is MQTT and How It Works<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="树莓派安装和配置Mosquitto-Broker"><a href="#树莓派安装和配置Mosquitto-Broker" class="headerlink" title="树莓派安装和配置Mosquitto Broker"></a>树莓派安装和配置Mosquitto Broker</h3><p><a class="link"   href="https://randomnerdtutorials.com/how-to-install-mosquitto-broker-on-raspberry-pi/" >Install Mosquitto MQTT Broker on Raspberry Pi<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>安装与配置完之后进行测试；</p>
<p><a class="link"   href="https://randomnerdtutorials.com/testing-mosquitto-broker-and-client-on-raspbbery-pi/" >Testing Mosquitto Broker and Client on Raspberry Pi<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="软件框架整合"><a href="#软件框架整合" class="headerlink" title="软件框架整合"></a>软件框架整合</h2><p>首先需要激活虚拟环境：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/python_venv/bin/activate</span><br></pre></td></tr></table></figure></div>

<p>由于在虚拟的环境中运行，需要安装一些基本的库：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple numpy pyaudio paho-mqtt</span><br></pre></td></tr></table></figure></div>

<h3 id="语音唤醒：awaken-py"><a href="#语音唤醒：awaken-py" class="headerlink" title="语音唤醒：awaken.py"></a>语音唤醒：awaken.py</h3><blockquote>
<p>这里由于树莓派计算能力有限，因此将中文识别模型和英语识别模型分开，中文模型叫做笨笨，英文模型叫做Echo；</p>
</blockquote>
<p>将snowboy的运行依赖移植到新的文件夹中：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -Lr /home/hwx_pi/snowboy/examples/Python3/* /home/hwx_pi/Stupid</span><br></pre></td></tr></table></figure></div>
<p>录入模型Stupid.pmdl，测试snowboy是否能够正常运行：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">python snowboy_test.py Stupid.pmdl</span><br></pre></td></tr></table></figure></div>
<p>如果能够正常唤醒，可以听到“叮”的一声。</p>
<p>新建库<code>awaken.py</code>，用于语音唤醒：</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> snowboydecoder</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">snowboy_awaken</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model, detected_callback = <span class="literal">None</span></span>):</span><br><span class="line">        self.interrupted = <span class="literal">False</span></span><br><span class="line">        self.model = model</span><br><span class="line">        self.sensitivity = <span class="number">0.5</span></span><br><span class="line">        self.detected_callback = detected_callback</span><br><span class="line">        self.detector = snowboydecoder.HotwordDetector(self.model, sensitivity = self.sensitivity)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">signal_handler</span>(<span class="params">self, signal, frame</span>):</span><br><span class="line">        self.interrupted = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">interrupt_callback</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.interrupted</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        signal.signal(signal.SIGINT, self.signal_handler)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;我正在休眠中，需要的时候呼叫我zzz&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        self.detector.start(detected_callback = self.detected_callback, </span><br><span class="line">                            interrupt_check = self.interrupt_callback,</span><br><span class="line">                            sleep_time = <span class="number">0.03</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">stop</span>(<span class="params">self</span>):</span><br><span class="line">        self.detector.terminate()</span><br></pre></td></tr></table></figure></div>

<h3 id="语音识别：ASR-py"><a href="#语音识别：ASR-py" class="headerlink" title="语音识别：ASR.py"></a>语音识别：ASR.py</h3><div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> sounddevice <span class="keyword">as</span> sd</span><br><span class="line">    <span class="keyword">import</span> sherpa_ncnn</span><br><span class="line"><span class="keyword">except</span> ImportError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Please source first. You can use&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;source ~/python_venv/bin/activate&quot;</span>)</span><br><span class="line">    sys.exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASR_system</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, base_path</span>):</span><br><span class="line">        self.base_path = base_path</span><br><span class="line">        self.recognizer = self.create_recognizer()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_recognizer</span>(<span class="params">self</span>):</span><br><span class="line">        recognizer = sherpa_ncnn.Recognizer(</span><br><span class="line">        tokens=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/tokens.txt&quot;</span>,</span><br><span class="line">        encoder_param=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/encoder_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        encoder_bin=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/encoder_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        decoder_param=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/decoder_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        decoder_bin=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/decoder_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        joiner_param=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/joiner_jit_trace-pnnx.ncnn.param&quot;</span>,</span><br><span class="line">        joiner_bin=<span class="string">f&quot;<span class="subst">&#123;self.base_path&#125;</span>/joiner_jit_trace-pnnx.ncnn.bin&quot;</span>,</span><br><span class="line">        num_threads=<span class="number">4</span>,</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> recognizer</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_recognition</span>(<span class="params">self, total_timeout = <span class="number">10</span>, silence_timeout =<span class="number">1</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;主人您好，请问有什么需要帮助。&quot;</span>)</span><br><span class="line">        sample_rate = self.recognizer.sample_rate</span><br><span class="line">        samples_per_read = <span class="built_in">int</span>(<span class="number">0.1</span> * sample_rate)  <span class="comment"># 0.1 second = 100 ms</span></span><br><span class="line">        last_text = <span class="string">&quot;&quot;</span></span><br><span class="line">        silence_time = time.time()  <span class="comment"># initial time</span></span><br><span class="line">        total_time = time.time()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> sd.InputStream(channels=<span class="number">1</span>, dtype=<span class="string">&quot;float32&quot;</span>, samplerate=sample_rate) <span class="keyword">as</span> s:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                samples, _ = s.read(samples_per_read)  <span class="comment"># a blocking read</span></span><br><span class="line">                samples = samples.reshape(-<span class="number">1</span>)</span><br><span class="line">                self.recognizer.accept_waveform(sample_rate, samples)</span><br><span class="line">                result = self.recognizer.text <span class="comment"># overlay content</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> last_text != result: <span class="comment"># if I speak</span></span><br><span class="line">                    last_text = result</span><br><span class="line">                    silence_time = time.time() <span class="comment"># silence_time start counting or reset</span></span><br><span class="line">                    total_time = time.time() <span class="comment"># total_time start counting or reset</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> time.time() - silence_time &gt; silence_timeout:</span><br><span class="line">                    <span class="keyword">if</span> last_text:</span><br><span class="line">                        <span class="keyword">yield</span> last_text.strip()</span><br><span class="line">                        last_text = <span class="string">&quot;&quot;</span> <span class="comment"># clear text</span></span><br><span class="line">                        self.recognizer.reset()</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> time.time() - total_time &gt; total_timeout:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;没有人说话，我先溜了&quot;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Mqtt-python"><a href="#Mqtt-python" class="headerlink" title="Mqtt-python"></a>Mqtt-python</h3><p>创建库<code>mqtt_client.py</code>：</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> paho.mqtt.client <span class="keyword">as</span> mqtt</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">mqtt_controller</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, server, port=<span class="number">1883</span></span>):</span><br><span class="line">        self.client = mqtt.Client()</span><br><span class="line">        self.server = server</span><br><span class="line">        self.port = <span class="number">1883</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connect</span>(<span class="params">self</span>):</span><br><span class="line">        self.client.connect(self.server, self.port, <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">publish</span>(<span class="params">self, topic, message</span>):</span><br><span class="line">        self.client.publish(topic, message)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">disconnect</span>(<span class="params">self</span>):</span><br><span class="line">        self.client.disconnect()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">instruct</span>(<span class="params">self, order</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;开灯&quot;</span> <span class="keyword">in</span> order:</span><br><span class="line">            self.publish(<span class="string">&quot;test/led&quot;</span>, <span class="string">&quot;led on&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;已开灯&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&quot;关灯&quot;</span> <span class="keyword">in</span> order:</span><br><span class="line">            self.publish(<span class="string">&quot;test/led&quot;</span>, <span class="string">&quot;led off&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;已关灯&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="语音合成：Espeak-NG-TTS"><a href="#语音合成：Espeak-NG-TTS" class="headerlink" title="语音合成：Espeak-NG TTS"></a>语音合成：Espeak-NG TTS</h3><p><a class="link"   href="https://github.com/espeak-ng/espeak-n" >espeak-ng<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>这是一个轻量化的离线语音合成模块，支持多种语言，包括中文。</p>
<p>安装：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install espeak-ng</span><br></pre></td></tr></table></figure></div>

<p>测试：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">espeak-ng hello <span class="comment"># 英语</span></span><br><span class="line">espeak-ng -v cmn-latn-pinyin <span class="string">&quot;你好世界&quot;</span> <span class="comment"># 普通话</span></span><br><span class="line">espeak-ng -v yue <span class="string">&quot;丢雷老母&quot;</span> <span class="comment"># 粤语</span></span><br></pre></td></tr></table></figure></div>

<p>在python脚本中使用：</p>
<div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> time <span class="comment"># 用于断句</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">text, language=<span class="string">&#x27;cmn-latn-pinyin&#x27;</span></span>):</span><br><span class="line">    subprocess.call([<span class="string">&#x27;espeak-ng&#x27;</span>, <span class="string">&#x27;-v&#x27;</span>, language, text])</span><br><span class="line"></span><br><span class="line">speak(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">speak(<span class="string">&quot;世界&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="主程序：Stupid-py"><a href="#主程序：Stupid-py" class="headerlink" title="主程序：Stupid.py"></a>主程序：Stupid.py</h3><div class="code-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> awaken <span class="keyword">import</span> snowboy_awaken</span><br><span class="line"><span class="keyword">from</span> mqtt_client <span class="keyword">import</span> mqtt_controller</span><br><span class="line"><span class="keyword">from</span> ASR <span class="keyword">import</span> ASR_system</span><br><span class="line"></span><br><span class="line">model = sys.argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: need to specify model name&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Usage: python demo.py your.model&quot;</span>)</span><br><span class="line">    sys.exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">IP = <span class="string">&quot;192.168.3.232&quot;</span> <span class="comment"># IP address for Mqtt broker</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> asr_text</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">appliances_controller</span>(): <span class="comment"># Control the house appliances by mqtt</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recognize</span>(): <span class="comment"># auto speech recognition success</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;唤醒成功！&quot;</span>)</span><br><span class="line">    appliances.connect()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;MQTT连接成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> text <span class="keyword">in</span> asr.start_recognition():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;语音识别：<span class="subst">&#123;text&#125;</span>&quot;</span>)</span><br><span class="line">        appliances.instruct(text)</span><br><span class="line"></span><br><span class="line">    appliances.disconnect()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;MQTT断开连接&quot;</span>)</span><br><span class="line"></span><br><span class="line">asr = ASR_system(<span class="string">&quot;/home/hwx_pi/sherpa-ncnn/sherpa-ncnn-streaming-zipformer-zh-14M-2023-02-23&quot;</span>)</span><br><span class="line">awaken = snowboy_awaken(model, detected_callback = recognize) <span class="comment"># wake up the robot</span></span><br><span class="line">appliances = mqtt_controller(IP)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    awaken.start()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    awaken.stop()</span><br></pre></td></tr></table></figure></div>

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a class="link"   href="https://blog.csdn.net/qq_38844263/article/details/127143725" >[Raspi][SnowBoy][教程]树莓派SnowBoy搭建教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://blog.csdn.net/qq_43280079/article/details/105039963" >关于树莓派编译及运行Snowboy的详细教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://www.jianshu.com/p/a1c06020f5fd" >树莓派使用 snowboy 配置语音唤醒<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://github.com/Kitt-AI/snowboy/issues/713" >makefile有问题<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://k2-fsa.github.io/sherpa/intro.html" >sherpa-ncnn<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Other Projects</category>
      </categories>
  </entry>
</search>
